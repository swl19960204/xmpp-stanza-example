/*! For license information please see stanza.browser.js.LICENSE.txt */
(()=>{"use strict";var e={4058:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=i(7582),n=i(1641),s=i(7187),a=(0,r.__importDefault)(i(9845)),o=(0,r.__importStar)(i(549)),l=(0,r.__importStar)(i(9447)),c=(0,r.__importStar)(i(5803)),u=i(8614),p=(0,r.__importDefault)(i(9672)),d=(0,r.__importDefault)(i(5559)),h=(0,r.__importDefault)(i(1667)),f=i(2898),m=(0,r.__importDefault)(i(848));class g extends s.EventEmitter{constructor(e={}){super(),this.reconnectAttempts=0,this.setMaxListeners(100),this.off=this.removeListener,this.updateConfig(e),this.jid="",this.sasl=new c.Factory,this.sasl.register("EXTERNAL",c.EXTERNAL,1e3),this.sasl.register("SCRAM-SHA-256-PLUS",c.SCRAM,350),this.sasl.register("SCRAM-SHA-256",c.SCRAM,300),this.sasl.register("SCRAM-SHA-1-PLUS",c.SCRAM,250),this.sasl.register("SCRAM-SHA-1",c.SCRAM,200),this.sasl.register("DIGEST-MD5",c.DIGEST,100),this.sasl.register("OAUTHBEARER",c.OAUTH,100),this.sasl.register("X-OAUTH2",c.PLAIN,50),this.sasl.register("PLAIN",c.PLAIN,1),this.sasl.register("ANONYMOUS",c.ANONYMOUS,0),this.stanzas=new l.Registry,this.stanzas.define(p.default),this.resolver=new m.default,this.use(u.core),this.sm=new a.default,void 0!==this.config.allowResumption&&(this.sm.allowResume=this.config.allowResumption),this.sm.on("prebound",(e=>{this.jid=e,this.emit("session:bound",e)})),this.on("session:bound",(e=>this.sm.bind(e))),this.sm.on("send",(e=>this.send("sm",e))),this.sm.on("acked",(e=>this.emit("stanza:acked",e))),this.sm.on("failed",(e=>this.emit("stanza:failed",e))),this.sm.on("hibernated",(e=>this.emit("stanza:hibernated",e))),this.sm.on("begin-resend",(()=>this.outgoingDataQueue.pause())),this.sm.on("resend",(({kind:e,stanza:t})=>this.send(e,t,!0))),this.sm.on("end-resend",(()=>this.outgoingDataQueue.resume()));for(const e of["acked","hibernated","failed"])this.on(`stanza:${e}`,(t=>{"message"===t.kind&&this.emit(`message:${e}`,t.stanza)}));this.transports={bosh:d.default,websocket:h.default},this.incomingDataQueue=(0,n.priorityQueue)((async(e,t)=>{const{kind:i,stanza:r}=e;this.emit(i,r),r.id&&this.emit(i+":id:"+r.id,r),"message"===i||"presence"===i||"iq"===i?(this.emit("stanza",r),await this.sm.handle()):"sm"===i&&("ack"===r.type&&(await this.sm.process(r),this.emit("stream:management:ack",r)),"request"===r.type&&this.sm.ack()),t&&t()}),1);const t=(e,t)=>{["message","presence","iq"].includes(e)&&(this.sm.started&&this.sm.resumable?this.sm.resumable&&!this.transport&&this.emit("stanza:hibernated",{kind:e,stanza:t}):this.emit("stanza:failed",{kind:e,stanza:t}))};this.outgoingDataQueue=(0,n.priorityQueue)((async(e,i)=>{var r;const{kind:n,stanza:s,replay:a}=e,o=a||await this.sm.track(n,s);if("message"===n&&(a?this.emit("message:retry",s):this.emit("message:sent",s,!1)),this.transport)try{await this.transport.send(n,s),o&&(null===(r=this.transport)||void 0===r||r.send("sm",{type:"request"}))}catch(e){console.error(e),t(n,s)}else t(n,s);i&&i()}),1),this.on("stream:data",((e,t)=>{this.incomingDataQueue.push({kind:t,stanza:e},0)})),this.on("--transport-disconnected",(async()=>{const e=[];this.incomingDataQueue.idle()||e.push(this.incomingDataQueue.drain()),this.outgoingDataQueue.idle()||e.push(this.outgoingDataQueue.drain()),await Promise.all(e),await this.sm.hibernate(),this.transport&&delete this.transport,this.emit("--reset-stream-features"),!this.sessionTerminating&&this.config.autoReconnect&&(this.reconnectAttempts+=1,clearTimeout(this.reconnectTimer),this.reconnectTimer=setTimeout((()=>{this.connect()}),1e3*Math.min(Math.pow(2,this.reconnectAttempts)+Math.random(),this.config.maxReconnectBackoff||32))),this.emit("disconnected")})),this.on("iq",(e=>{const t=e.type,i=e.payloadType,r="iq:"+t+":"+i;if("get"===t||"set"===t){if("invalid-payload-count"===i)return this.sendIQError(e,{error:{condition:"bad-request",type:"modify"}});if("unknown-payload"===i||0===this.listenerCount(r))return this.sendIQError(e,{error:{condition:"service-unavailable",type:"cancel"}});this.emit(r,e)}})),this.on("message",(e=>{const t=e.alternateLanguageBodies&&e.alternateLanguageBodies.length||e.links&&e.links.length,i=e.marker&&"markable"!==e.marker.type;t&&!i&&("chat"===e.type||"normal"===e.type?this.emit("chat",e):"groupchat"===e.type&&this.emit("groupchat",e)),"error"===e.type&&this.emit("message:error",e)})),this.on("presence",(e=>{let t=e.type||"available";"error"===t&&(t="presence:error"),this.emit(t,e)})),this.on("session:started",(()=>{this.sessionStarting=!1,this.reconnectAttempts=0,this.reconnectTimer&&clearTimeout(this.reconnectTimer)}))}updateConfig(e={}){var t;const i=this.config||{};this.config={allowResumption:!0,jid:"",transports:{bosh:!0,websocket:!0},useStreamManagement:!0,transportPreferenceOrder:["websocket","bosh"],...i,...e},this.config.server||(this.config.server=o.getDomain(this.config.jid)),this.config.password&&(this.config.credentials=this.config.credentials||{},this.config.credentials.password=this.config.password,delete this.config.password),this.config.transportPreferenceOrder||(this.config.transportPreferenceOrder=Object.keys(null!==(t=this.config.transports)&&void 0!==t?t:{}))}get stream(){return this.transport?this.transport.stream:void 0}emit(e,...t){const i=super.emit(e,...t);return"raw"===e?(super.emit(`raw:${t[0]}`,t[1]),super.emit("raw:*",`raw:${t[0]}`,t[1]),super.emit("*",`raw:${t[0]}`,t[1])):super.emit("*",e,...t),i}use(e){"function"==typeof e&&e(this,this.stanzas,this.config)}nextId(){return(0,f.uuid)()}async getCredentials(){return this._getConfiguredCredentials()}async connect(){var e,t,i;this.sessionTerminating=!1,this.sessionStarting=!0,this.emit("--reset-stream-features"),this.transport&&this.transport.disconnect(!1);const r=null!==(e=this.config.transportPreferenceOrder)&&void 0!==e?e:[];let n;for(const e of r){const r=this.config.transports[e];if(!r||!this.transports[e])continue;let s={acceptLanguages:this.config.acceptLanguages||[null!==(t=this.config.lang)&&void 0!==t?t:"en"],jid:this.config.jid,lang:null!==(i=this.config.lang)&&void 0!==i?i:"en",server:this.config.server};const a=new this.transports[e](this,this.sm,this.stanzas);if("string"==typeof r)s.url=r;else if(1==r)if(a.discoverBindings){const e=await a.discoverBindings(this.config.server);if(!e)continue;s={...s,...e}}else{if(!n)try{n=await this.discoverBindings(this.config.server)}catch(e){console.error(e);continue}if(n[e]=(n[e]||[]).filter((e=>e.startsWith("wss:")||e.startsWith("https:"))),!n[e]||!n[e].length)continue;s.url=n[e][0]}return this.transport=a,void this.transport.connect(s)}console.error("No endpoints found for the requested transports."),this.emit("--transport-disconnected")}async disconnect(){this.sessionTerminating=!0,clearTimeout(this.reconnectTimer),this.outgoingDataQueue.pause(),this.sessionStarted&&!this.sm.started&&this.emit("session:end"),this.emit("--reset-stream-features"),this.sessionStarted=!1,this.transport?this.transport.disconnect():this.emit("--transport-disconnected"),this.outgoingDataQueue.resume(),this.outgoingDataQueue.idle()||await this.outgoingDataQueue.drain(),await this.sm.shutdown()}async send(e,t,i=!1){return new Promise(((r,n)=>{this.outgoingDataQueue.push({kind:e,stanza:t,replay:i},i?0:1,(e=>e?n(e):r()))}))}sendMessage(e){const t=e.id||this.nextId(),i={id:t,originId:t,...e};return this.send("message",i),i.id}sendPresence(e={}){const t={id:this.nextId(),...e};return this.send("presence",t),t.id}sendIQ(e){const t={id:this.nextId(),...e},i=o.allowedResponders(this.jid,e.to),r="iq:id:"+t.id,n=new Promise(((e,t)=>{const n=s=>{i.has(s.from)&&("result"!==s.type&&"error"!==s.type||(this.off(r,n),"result"===s.type?e(s):t(s)))};this.on(r,n)}));this.send("iq",t);const s=this.config.timeout||15;return(0,f.timeoutPromise)(n,1e3*s,(()=>({...t,to:void 0,from:void 0,error:{condition:"timeout",text:`Request timed out after ${s} seconds.`},id:t.id,type:"error"})))}sendIQResult(e,t){this.send("iq",{...t,id:e.id,to:e.from,type:"result"})}sendIQError(e,t){this.send("iq",{...t,id:e.id,to:e.from,type:"error"})}sendStreamError(e){this.emit("stream:error",e),this.send("error",e),this.disconnect()}_getConfiguredCredentials(){const e=this.config.credentials||{},t=o.parse(this.config.jid||""),i=e.username||t.local,r=e.host||t.domain;return{host:r,password:this.config.password,realm:r,serviceName:r,serviceType:"xmpp",username:i,...e}}}t.default=g},2768:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.directionToSenders=t.sendersToDirection=t.JINGLE_INFO_RECEIVED_5=t.JINGLE_INFO_CHECKSUM_5=t.JINGLE_INFO_RINGING=t.JINGLE_INFO_ACTIVE=t.JINGLE_INFO_UNHOLD=t.JINGLE_INFO_HOLD=t.JINGLE_INFO_UNMUTE=t.JINGLE_INFO_MUTE=t.JINGLE_INFO=t.USER_ACTIVITY_SPECIFIC=t.USER_ACTIVITY_GENERAL=t.USER_MOODS=t.JingleReasonCondition=t.JingleErrorCondition=t.JingleAction=t.JingleContentSenders=t.JingleApplicationDirection=t.JingleSessionRole=t.ChatState=t.PubsubErrorCondition=t.MUCStatusCode=t.MUCRole=t.MUCAffiliation=t.DataFormFieldType=t.DataFormType=t.RosterSubscription=t.PresenceShow=t.IQType=t.PresenceType=t.MessageType=t.StanzaErrorCondition=t.StreamErrorCondition=t.SASLFailureCondition=t.StreamType=t.VERSION=void 0;const r=i(6552);t.VERSION="12.19.0";const n="not-authorized";t.StreamType={Bosh:r.NS_BOSH,Client:r.NS_CLIENT,Component:r.NS_COMPONENT,Server:r.NS_SERVER},t.SASLFailureCondition={AccountDisabled:"account-disabled",CredentialsExpired:"credentials-expired",EncryptionRequired:"encryption-required",IncorrectEncoding:"incorrect-encoding",InvalidAuthzid:"invalid-authzid",InvalidMechanism:"invalid-mechanism",MalformedRequest:"malformed-request",MechanismTooWeak:"mechanism-too-weak",NotAuthorized:n,TemporaryAuthFailure:"temporary-auth-failure"},t.StreamErrorCondition={BadFormat:"bad-format",BadNamespacePrefix:"bad-namespace-prefix",Conflict:"conflict",ConnectionTimeout:"connection-timeout",HostGone:"host-gone",HostUnknown:"host-unknown",ImproperAddressing:"improper-addressing",InternalServerError:"internal-server-error",InvalidFrom:"invalid-from",InvalidId:"invalid-id",InvalidNamespace:"invalid-namespace",InvalidXML:"invalid-xml",NotAuthorized:n,NotWellFormed:"not-well-formed",PolicyViolation:"policy-violation",RemoteConnectionFailed:"remote-connection-failed",Reset:"reset",ResourceConstraint:"resource-constraint",RestrictedXML:"restricted-xml",SeeOtherHost:"see-other-host",SystemShutdown:"system-shutdown",UndefinedCondition:"undefined-condition",UnsupportedEncoding:"unsupported-encoding",UnsupportedStanzaType:"unsupported-stanza-type",UnsupportedVersion:"unsupported-version"},t.StanzaErrorCondition={BadRequest:"bad-request",Conflict:"conflict",FeatureNotImplemented:"feature-not-implemented",Forbidden:"forbidden",Gone:"gone",InternalServerError:"internal-server-error",ItemNotFound:"item-not-found",JIDMalformed:"jid-malformed",NotAcceptable:"not-acceptable",NotAllowed:"not-allowed",NotAuthorized:n,PolicyViolation:"policy-violation",RecipientUnavailable:"recipient-unavailable",Redirect:"redirect",RegistrationRequired:"registration-required",RemoteServerNotFound:"remote-server-not-found",RemoteServerTimeout:"remote-server-timeout",ResourceConstraint:"resource-constraint",ServiceUnavailable:"service-unavailable",SubscriptionRequired:"subscription-required",UndefinedCondition:"undefined-condition",UnexpectedRequest:"unexpected-request"},t.MessageType={Chat:"chat",Error:"error",GroupChat:"groupchat",Headline:"headline",Normal:"normal"},t.PresenceType={Available:void 0,Error:"error",Probe:"probe",Subscribe:"subscribe",Subscribed:"subscribed",Unavailable:"unavailable",Unsubscribe:"unsubscribe",Unsubscribed:"unsubscribed"},t.IQType={Error:"error",Get:"get",Result:"result",Set:"set"},t.PresenceShow={Away:"away",Chat:"chat",DoNotDisturb:"dnd",ExtendedAway:"xa"},t.RosterSubscription={Both:"both",From:"from",None:"none",ReceivePresenceOnly:"to",Remove:"remove",SendAndReceivePresence:"both",SendPresenceOnly:"from",To:"to"},t.DataFormType={Cancel:"cancel",Form:"form",Result:"result",Submit:"submit"},t.DataFormFieldType={Boolean:"boolean",Fixed:"fixed",Hidden:"hidden",JID:"jid-single",JIDMultiple:"jid-multi",List:"list-single",ListMultiple:"list-multi",Password:"text-private",Text:"text-single",TextMultiple:"text-multi",TextPrivate:"text-private"},t.MUCAffiliation={Admin:"admin",Banned:"outcast",Member:"member",None:"none",Outcast:"outcast",Owner:"owner"},t.MUCRole={Moderator:"moderator",None:"none",Participant:"participant",Visitor:"visitor"},t.MUCStatusCode={AffiliationChanged:"101",AffiliationLost:"321",Banned:"301",Error:"333",Kicked:"307",LoggingDisabled:"171",LoggingEnabled:"170",MembershipLost:"322",NickChanged:"303",NickChangedByService:"210",NonAnonymous:"172",NonAnonymousRoom:"100",NonPrivacyConfigurationChange:"104",RoomCreated:"201",SelfPresence:"110",SemiAnonymous:"173",Shutdown:"332",UnavailableMembersListed:"102",UnavailableMembersNotListed:"103"},t.PubsubErrorCondition={ClosedNode:"closed-node",ConfigurationRequired:"configuration-required",InvalidJID:"invalid-jid",InvalidOptions:"invalid-options",InvalidPayload:"invalid-payload",InvalidSubscriptionId:"invalid-subid",ItemForbidden:"item-forbidden",ItemRequired:"item-required",JIDRequired:"jid-required",MaxItemsExceeded:"max-items-exceeded",MaxNodesExceeded:"max-nodes-exceeded",NodeIdRequired:"nodeid-required",NotInRosterGroup:"not-in-roster-group",NotSubscribed:"not-subscribed",PayloadRequired:"payload-required",PayloadTooBig:"payload-too-big",PendingSubscription:"pending-subscription",PresenceSubscriptionRequired:"presence-subscription-required",SubscriptionIdRequired:"subid-required",TooManySubscriptions:"too-many-subscriptions",Unsupported:"unsupported",UnsupportedAccessModel:"unsupported-access-model"},t.ChatState={Active:"active",Composing:"composing",Gone:"gone",Inactive:"inactive",Paused:"paused"},t.JingleSessionRole={Initiator:"initiator",Responder:"responder"},t.JingleApplicationDirection={Inactive:"inactive",Receive:"recvonly",Send:"sendonly",SendReceive:"sendrecv"},t.JingleContentSenders={Both:"both",Initiator:"initiator",None:"none",Responder:"responder"},t.JingleAction={ContentAccept:"content-accept",ContentAdd:"content-add",ContentModify:"content-modify",ContentReject:"content-reject",ContentRemove:"content-remove",DescriptionInfo:"description-info",SecurityInfo:"security-info",SessionAccept:"session-accept",SessionInfo:"session-info",SessionInitiate:"session-initiate",SessionTerminate:"session-terminate",TransportAccept:"transport-accept",TransportInfo:"transport-info",TransportReject:"transport-reject",TransportReplace:"transport-replace"},t.JingleErrorCondition={OutOfOrder:"out-of-order",TieBreak:"tie-break",UnknownContent:"unknown-content",UnknownSession:"unknown-session",UnsupportedInfo:"unsupported-info"},t.JingleReasonCondition={AlternativeSession:"alternative-session",Busy:"busy",Cancel:"cancel",ConnectivityError:"connectivity-error",Decline:"decline",Expired:"expired",FailedApplication:"failed-application",FailedTransport:"failed-transport",GeneralError:"general-error",Gone:"gone",IncompatibleParameters:"incompatible-parameters",MediaError:"media-error",SecurityError:"security-error",Success:"success",Timeout:"timeout",UnsupportedApplications:"unsupported-applications",UnsupportedTransports:"unsupported-transports"},t.USER_MOODS=["afraid","amazed","amorous","angry","annoyed","anxious","aroused","ashamed","bored","brave","calm","cautious","cold","confident","confused","contemplative","contented","cranky","crazy","creative","curious","dejected","depressed","disappointed","disgusted","dismayed","distracted","embarrassed","envious","excited","flirtatious","frustrated","grateful","grieving","grumpy","guilty","happy","hopeful","hot","humbled","humiliated","hungry","hurt","impressed","in_awe","in_love","indignant","interested","intoxicated","invincible","jealous","lonely","lost","lucky","mean","moody","nervous","neutral","offended","outraged","playful","proud","relaxed","relieved","remorseful","restless","sad","sarcastic","satisfied","serious","shocked","shy","sick","sleepy","spontaneous","stressed","strong","surprised","thankful","thirsty","tired","undefined","weak","worried"],t.USER_ACTIVITY_GENERAL=["doing_chores","drinking","eating","exercising","grooming","having_appointment","inactive","relaxing","talking","traveling","undefined","working"],t.USER_ACTIVITY_SPECIFIC=["at_the_spa","brushing_teeth","buying_groceries","cleaning","coding","commuting","cooking","cycling","cycling","dancing","day_off","doing_maintenance","doing_the_dishes","doing_the_laundry","driving","fishing","gaming","gardening","getting_a_haircut","going_out","hanging_out","having_a_beer","having_a_snack","having_breakfast","having_coffee","having_dinner","having_lunch","having_tea","hiding","hiking","in_a_car","in_a_meeting","in_real_life","jogging","on_a_bus","on_a_plane","on_a_train","on_a_trip","on_the_phone","on_vacation","on_video_phone","other","partying","playing_sports","praying","reading","rehearsing","running","running_an_errand","scheduled_holiday","shaving","shopping","skiing","sleeping","smoking","socializing","studying","sunbathing","swimming","taking_a_bath","taking_a_shower","thinking","walking","walking_the_dog","watching_a_movie","watching_tv","working_out","writing"],t.JINGLE_INFO=(e,t)=>`{${e}}${t}`,t.JINGLE_INFO_MUTE=(0,t.JINGLE_INFO)(r.NS_JINGLE_RTP_INFO_1,"mute"),t.JINGLE_INFO_UNMUTE=(0,t.JINGLE_INFO)(r.NS_JINGLE_RTP_INFO_1,"unmute"),t.JINGLE_INFO_HOLD=(0,t.JINGLE_INFO)(r.NS_JINGLE_RTP_INFO_1,"hold"),t.JINGLE_INFO_UNHOLD=(0,t.JINGLE_INFO)(r.NS_JINGLE_RTP_INFO_1,"unhold"),t.JINGLE_INFO_ACTIVE=(0,t.JINGLE_INFO)(r.NS_JINGLE_RTP_INFO_1,"active"),t.JINGLE_INFO_RINGING=(0,t.JINGLE_INFO)(r.NS_JINGLE_RTP_INFO_1,"ringing"),t.JINGLE_INFO_CHECKSUM_5=(0,t.JINGLE_INFO)(r.NS_JINGLE_FILE_TRANSFER_5,"checksum"),t.JINGLE_INFO_RECEIVED_5=(0,t.JINGLE_INFO)(r.NS_JINGLE_FILE_TRANSFER_5,"received"),t.sendersToDirection=function(e,i=t.JingleContentSenders.Both){const r=e===t.JingleSessionRole.Initiator;switch(i){case t.JingleContentSenders.Initiator:return r?t.JingleApplicationDirection.Send:t.JingleApplicationDirection.Receive;case t.JingleContentSenders.Responder:return r?t.JingleApplicationDirection.Receive:t.JingleApplicationDirection.Send;case t.JingleContentSenders.Both:return t.JingleApplicationDirection.SendReceive}return t.JingleApplicationDirection.Inactive},t.directionToSenders=function(e,i=t.JingleApplicationDirection.SendReceive){const r=e===t.JingleSessionRole.Initiator;switch(i){case t.JingleApplicationDirection.Send:return r?t.JingleContentSenders.Initiator:t.JingleContentSenders.Responder;case t.JingleApplicationDirection.Receive:return r?t.JingleContentSenders.Responder:t.JingleContentSenders.Initiator;case t.JingleApplicationDirection.SendReceive:return t.JingleContentSenders.Both}return t.JingleContentSenders.None}},549:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.toURI=t.parseURI=t.toBare=t.getResource=t.getDomain=t.getLocal=t.isBare=t.isFull=t.equalBare=t.equal=t.allowedResponders=t.parse=t.createFull=t.create=t.prepare=t.unescapeLocal=t.escapeLocal=void 0;const r=(0,i(7582).__importDefault)(i(3689)),n=i(8123);function s(e=""){return e.replace(/^\s+|\s+$/g,"").replace(/\\5c/g,"\\5c5c").replace(/\\20/g,"\\5c20").replace(/\\22/g,"\\5c22").replace(/\\26/g,"\\5c26").replace(/\\27/g,"\\5c27").replace(/\\2f/g,"\\5c2f").replace(/\\3a/g,"\\5c3a").replace(/\\3c/g,"\\5c3c").replace(/\\3e/g,"\\5c3e").replace(/\\40/g,"\\5c40").replace(/ /g,"\\20").replace(/"/g,"\\22").replace(/&/g,"\\26").replace(/'/g,"\\27").replace(/\//g,"\\2f").replace(/:/g,"\\3a").replace(/</g,"\\3c").replace(/>/g,"\\3e").replace(/@/g,"\\40")}function a(e){return e.replace(/\\20/g," ").replace(/\\22/g,'"').replace(/\\26/g,"&").replace(/\\27/g,"'").replace(/\\2f/g,"/").replace(/\\3a/g,":").replace(/\\3c/g,"<").replace(/\\3e/g,">").replace(/\\40/g,"@").replace(/\\5c/g,"\\")}function o(e){let t=e.local||"",i=e.domain,s=e.resource||"";return t&&(t=(0,n.nodeprep)(t)),s&&(s=(0,n.resourceprep)(s)),"."===i[i.length-1]&&(i=i.slice(0,i.length-1)),i=(0,n.nameprep)(i.split(".").map(r.default.toUnicode).join(".")),{domain:i,local:t,resource:s}}function l(e,t={}){let i=e.local;t.escaped||(i=s(e.local));const r=t.prepared?e:o({local:i,domain:e.domain,resource:e.resource}),n=i?`${i}@${r.domain}`:r.domain;return r.resource?`${n}/${r.resource}`:n}function c(e=""){let t="",i="",r="";const n=e.indexOf("/");n>0&&(r=e.slice(n+1),e=e.slice(0,n));const s=e.indexOf("@");s>0&&(t=e.slice(0,s),e=e.slice(s+1)),i=e;const c=o({domain:i,local:t,resource:r});return{bare:l({local:c.local,domain:c.domain},{escaped:!0,prepared:!0}),domain:c.domain,full:l(c,{escaped:!0,prepared:!0}),local:a(c.local),resource:c.resource}}function u(e){return!!c(e).resource}function p(e=""){return c(e).bare}t.escapeLocal=s,t.unescapeLocal=a,t.prepare=o,t.create=l,t.createFull=function(e,t){return t?`${p(e)}/${t}`:p(e)},t.parse=c,t.allowedResponders=function(e,t){const i=new Set;if(i.add(void 0),i.add(""),e){const t=c(e);i.add(t.full),i.add(t.bare),i.add(t.domain)}if(t){const e=c(t);i.add(e.domain),i.add(e.bare),i.add(e.full)}return i},t.equal=function(e,t){if(!e||!t)return!1;const i=c(e),r=c(t);return i.local===r.local&&i.domain===r.domain&&i.resource===r.resource},t.equalBare=function(e,t){if(!e||!t)return!1;const i=c(e),r=c(t);return i.local===r.local&&i.domain===r.domain},t.isFull=u,t.isBare=function(e){return!u(e)},t.getLocal=function(e=""){return c(e).local},t.getDomain=function(e=""){return c(e).domain},t.getResource=function(e=""){return c(e).resource},t.toBare=p,t.parseURI=function(e){const t=new URL(e);if("xmpp:"!==t.protocol)throw new Error("Invalid XMPP URI, wrong protocol: "+t.protocol);const i=t.hostname?t.username?l({domain:decodeURIComponent(t.hostname),local:decodeURIComponent(t.username)},{escaped:!0}):decodeURIComponent(t.hostname):void 0,r=c(decodeURIComponent(i?t.pathname.substr(1):t.pathname)).full,n=t.search&&t.search.indexOf(";")>=1,s=n?t.search.substr(t.search.indexOf(";")+1):"",a=t.search?decodeURIComponent(t.search.substr(1,n?t.search.indexOf(";")-1:void 0)):void 0,o={};for(const e of s.split(";")){const[t,i]=e.split("=").map(decodeURIComponent);if(o[t]){const e=o[t];Array.isArray(e)?e.push(i):o[t]=[e,i]}else o[t]=i}return{action:a,identity:i,jid:r,parameters:o}},t.toURI=function(e){const t=["xmpp:"],i=(e,i)=>{const r=c(e);r.local&&(t.push(encodeURIComponent(s(r.local))),t.push("@")),t.push(encodeURIComponent(r.domain)),i&&r.resource&&(t.push("/"),t.push(encodeURIComponent(r.resource)))};e.identity&&(t.push("//"),i(e.identity,!1),e.jid&&t.push("/")),e.jid&&i(e.jid,!0),e.action&&(t.push("?"),t.push(encodeURIComponent(e.action)));for(const[i,r]of Object.entries(e.parameters||{}))for(const e of Array.isArray(r)?r:[r])t.push(";"),t.push(encodeURIComponent(i)),void 0!==e&&(t.push("="),t.push(encodeURIComponent(e)));return t.join("")}},6552:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NS_AVATAR_METADATA=t.NS_AVATAR_DATA=t.NS_ROSTER_DELIMITER=t.NS_GEOLOC=t.NS_AMP=t.NS_INBAND_REGISTRATION=t.NS_REGISTER=t.NS_XHTML_IM=t.NS_XHTML=t.NS_HTTP_AUTH=t.NS_OOB_TRANSFER=t.NS_OOB=t.NS_SOCKS5=t.NS_PUBSUB_OWNER=t.NS_PUBSUB_EVENT=t.NS_PUBSUB_ERRORS=t.NS_PUBSUB=t.NS_RSM=t.NS_SEARCH=t.NS_VCARD_TEMP=t.NS_ADHOC_COMMANDS=t.NS_PRIVATE=t.NS_BOOKMARKS=t.NS_IBB=t.NS_MUC_USER=t.NS_MUC_OWNER=t.NS_MUC_ADMIN=t.NS_MUC=t.NS_ADDRESS=t.NS_DISCO_ITEMS=t.NS_DISCO_INFO=t.NS_LEGACY_CHAT_EVENTS=t.NS_PRIVACY=t.NS_LAST_ACTIVITY=t.NS_RPC=t.NS_DATAFORM=t.NS_FRAMING=t.NS_SUBSCRIPTION_PREAPPROVAL=t.NS_ROSTER_VERSIONING=t.NS_ROSTER=t.NS_STARTTLS=t.NS_STREAMS=t.NS_STREAM=t.NS_STANZAS=t.NS_SESSION=t.NS_SERVER=t.NS_SASL=t.NS_CLIENT=t.NS_BIND=t.NS_ATOM=void 0,t.NS_JINGLE_FILE_TRANSFER_4=t.NS_JINGLE_FILE_TRANSFER_3=t.NS_SOFTWARE_INFO=t.NS_BOB=t.NS_ATTENTION_0=t.NS_DATAFORM_MEDIA=t.NS_DISCO_EXTERNAL_2=t.NS_DISCO_EXTERNAL_1=t.NS_BOSH_XMPP=t.NS_DELAY=t.NS_TIME=t.NS_PING=t.NS_SMACKS_3=t.NS_BLOCKING_ERRORS=t.NS_BLOCKING=t.NS_INVISIBLE_0=t.NS_RECEIPTS=t.NS_JINGLE_RAW_UDP_1=t.NS_JINGLE_ICE_UDP_1=t.NS_NICK=t.NS_LANG_TRANS_ITEMS=t.NS_LANG_TRANS=t.NS_JINGLE_RTP_VIDEO=t.NS_JINGLE_RTP_AUDIO=t.NS_JINGLE_RTP_INFO_1=t.NS_JINGLE_RTP_ERRORS_1=t.NS_JINGLE_RTP_1=t.NS_JINGLE_ERRORS_1=t.NS_JINGLE_1=t.NS_PEP_NOTIFY=t.NS_CAPTCHA=t.NS_ALT_CONNECTIONS_XBOSH=t.NS_ALT_CONNECTIONS_WEBSOCKET=t.NS_VCARD_TEMP_UPDATE=t.NS_REACH_0=t.NS_ROSTER_NOTES=t.NS_ROSTER_EXCHANGE=t.NS_DATAFORM_LAYOUT=t.NS_COMPRESSION=t.NS_COMPRESSION_FEATURE=t.NS_SHIM=t.NS_BOSH=t.NS_DATAFORM_VALIDATION=t.NS_TUNE=t.NS_DISCO_LEGACY_CAPS=t.NS_COMPONENT=t.NS_ACTIVITY=t.NS_MOOD=t.NS_VERSION=t.NS_CHAT_STATES=void 0,t.NS_OMEMO_AXOLOTL=t.NS_SPOILER_0=t.NS_EME_0=t.NS_REFERENCE_0=t.NS_JINGLE_ICE_0=t.NS_JINGLE_HTTP_UPLOAD_0=t.NS_JINGLE_HTTP_0=t.NS_HTTP_UPLOAD_0=t.NS_SID_0=t.NS_JINGLE_PUB_1=t.NS_PUSH_0=t.NS_DELEGATION_1=t.NS_JINGLE_MSG_INITIATE_0=t.NS_CSI_0=t.NS_JINGLE_DTLS_SCTP_1=t.NS_JINGLE_RTP_SSMA_0=t.NS_JINGLE_GROUPING_0=t.NS_JSON_0=t.NS_HINTS=t.NS_CHAT_MARKERS_0=t.NS_JINGLE_DTLS_0=t.NS_IDLE_1=t.NS_HATS_0=t.NS_MAM_2=t.NS_MAM_1=t.NS_MAM_0=t.NS_MAM_TMP=t.NS_PSA=t.NS_CORRECTION_0=t.NS_MUC_UNIQUE=t.NS_RTT_0=t.NS_HASH_NAME=t.NS_HASHES_2=t.NS_HASHES_1=t.NS_FORWARD_0=t.NS_JINGLE_RTP_HDREXT_0=t.NS_JINGLE_RTP_RTCP_FB_0=t.NS_CARBONS_2=t.NS_DECLOAKING_0=t.NS_THUMBS_1=t.NS_THUMBS_0=t.NS_JINGLE_RTP_ZRTP_1=t.NS_JINGLE_IBB_1=t.NS_JINGLE_SOCKS5_1=t.NS_SEC_LABEL_ESS_0=t.NS_SEC_LABEL_CATALOG_2=t.NS_SEC_LABEL_0=t.NS_MUC_DIRECT_INVITE=t.NS_JINGLE_XML_0=t.NS_JINGLE_FILE_TRANSFER_5=void 0,t.NS_JINGLE_RTP_MSID_0=t.NS_XRD=t.NS_JSON_MESSAGE_0=t.NS_OMEMO_AXOLOTL_BUNDLE=t.NS_OMEMO_AXOLOTL_BUNDLES=t.NS_OMEMO_AXOLOTL_DEVICELIST=void 0,t.NS_ATOM="http://www.w3.org/2005/Atom",t.NS_BIND="urn:ietf:params:xml:ns:xmpp-bind",t.NS_CLIENT="jabber:client",t.NS_SASL="urn:ietf:params:xml:ns:xmpp-sasl",t.NS_SERVER="jabber:server",t.NS_SESSION="urn:ietf:params:xml:ns:xmpp-session",t.NS_STANZAS="urn:ietf:params:xml:ns:xmpp-stanzas",t.NS_STREAM="http://etherx.jabber.org/streams",t.NS_STREAMS="urn:ietf:params:xml:ns:xmpp-streams",t.NS_STARTTLS="urn:ietf:params:xml:ns:xmpp-tls",t.NS_ROSTER="jabber:iq:roster",t.NS_ROSTER_VERSIONING="urn:xmpp:features:rosterver",t.NS_SUBSCRIPTION_PREAPPROVAL="urn:xmpp:features:pre-approval",t.NS_FRAMING="urn:ietf:params:xml:ns:xmpp-framing",t.NS_DATAFORM="jabber:x:data",t.NS_RPC="jabber:iq:rpc",t.NS_LAST_ACTIVITY="jabber:iq:last",t.NS_PRIVACY="jabber:iq:privacy",t.NS_LEGACY_CHAT_EVENTS="jabber:x:event",t.NS_DISCO_INFO="http://jabber.org/protocol/disco#info",t.NS_DISCO_ITEMS="http://jabber.org/protocol/disco#items",t.NS_ADDRESS="http://jabber.org/protocol/address",t.NS_MUC="http://jabber.org/protocol/muc",t.NS_MUC_ADMIN="http://jabber.org/protocol/muc#admin",t.NS_MUC_OWNER="http://jabber.org/protocol/muc#owner",t.NS_MUC_USER="http://jabber.org/protocol/muc#user",t.NS_IBB="http://jabber.org/protocol/ibb",t.NS_BOOKMARKS="storage:bookmarks",t.NS_PRIVATE="jabber:iq:private",t.NS_ADHOC_COMMANDS="http://jabber.org/protocol/commands",t.NS_VCARD_TEMP="vcard-temp",t.NS_SEARCH="jabber:iq:search",t.NS_RSM="http://jabber.org/protocol/rsm",t.NS_PUBSUB="http://jabber.org/protocol/pubsub",t.NS_PUBSUB_ERRORS="http://jabber.org/protocol/pubsub#errors",t.NS_PUBSUB_EVENT="http://jabber.org/protocol/pubsub#event",t.NS_PUBSUB_OWNER="http://jabber.org/protocol/pubsub#owner",t.NS_SOCKS5="http://jabber.org/protocol/bytestreams",t.NS_OOB="jabber:x:oob",t.NS_OOB_TRANSFER="jabber:iq:oob",t.NS_HTTP_AUTH="http://jabber.org/protocol/http-auth",t.NS_XHTML="http://www.w3.org/1999/xhtml",t.NS_XHTML_IM="http://jabber.org/protocol/xhtml-im",t.NS_REGISTER="jabber:iq:register",t.NS_INBAND_REGISTRATION="http://jabber.org/features/iq-register",t.NS_AMP="http://jabber.org/protocol/amp",t.NS_GEOLOC="http://jabber.org/protocol/geoloc",t.NS_ROSTER_DELIMITER="roster:delimiter",t.NS_AVATAR_DATA="urn:xmpp:avatar:data",t.NS_AVATAR_METADATA="urn:xmpp:avatar:metadata",t.NS_CHAT_STATES="http://jabber.org/protocol/chatstates",t.NS_VERSION="jabber:iq:version",t.NS_MOOD="http://jabber.org/protocol/mood",t.NS_ACTIVITY="http://jabber.org/protocol/activity",t.NS_COMPONENT="jabber:component:accept",t.NS_DISCO_LEGACY_CAPS="http://jabber.org/protocol/caps",t.NS_TUNE="http://jabber.org/protocol/tune",t.NS_DATAFORM_VALIDATION="http://jabber.org/protocol/xdata-validate",t.NS_BOSH="http://jabber.org/protocol/httpbind",t.NS_SHIM="http://jabber.org/protocol/shim",t.NS_COMPRESSION_FEATURE="http://jabber.org/features/compress",t.NS_COMPRESSION="http://jabber.org/protocol/compress",t.NS_DATAFORM_LAYOUT="http://jabber.org/protocol/xdata-layout",t.NS_ROSTER_EXCHANGE="http://jabber.org/protocol/rosterx",t.NS_ROSTER_NOTES="storage:rosternotes",t.NS_REACH_0="urn:xmpp:reach:0",t.NS_VCARD_TEMP_UPDATE="vcard-temp:x:update",t.NS_ALT_CONNECTIONS_WEBSOCKET="urn:xmpp:alt-connections:websocket",t.NS_ALT_CONNECTIONS_XBOSH="urn:xmpp:alt-connections:xbosh",t.NS_CAPTCHA="urn:xmpp:captcha",t.NS_PEP_NOTIFY=e=>`${e}+notify`,t.NS_JINGLE_1="urn:xmpp:jingle:1",t.NS_JINGLE_ERRORS_1="urn:xmpp:jingle:errors:1",t.NS_JINGLE_RTP_1="urn:xmpp:jingle:apps:rtp:1",t.NS_JINGLE_RTP_ERRORS_1="urn:xmpp:jingle:apps:rtp:errors:1",t.NS_JINGLE_RTP_INFO_1="urn:xmpp:jingle:apps:rtp:info:1",t.NS_JINGLE_RTP_AUDIO="urn:xmpp:jingle:apps:rtp:audio",t.NS_JINGLE_RTP_VIDEO="urn:xmpp:jingle:apps:rtp:video",t.NS_LANG_TRANS="urn:xmpp:langtrans",t.NS_LANG_TRANS_ITEMS="urn:xmpp:langtrans:items",t.NS_NICK="http://jabber.org/protocol/nick",t.NS_JINGLE_ICE_UDP_1="urn:xmpp:jingle:transports:ice-udp:1",t.NS_JINGLE_RAW_UDP_1="urn:xmpp:jingle:transports:raw-udp:1",t.NS_RECEIPTS="urn:xmpp:receipts",t.NS_INVISIBLE_0="urn:xmpp:invisible:0",t.NS_BLOCKING="urn:xmpp:blocking",t.NS_BLOCKING_ERRORS="urn:xmpp:blocking:errors",t.NS_SMACKS_3="urn:xmpp:sm:3",t.NS_PING="urn:xmpp:ping",t.NS_TIME="urn:xmpp:time",t.NS_DELAY="urn:xmpp:delay",t.NS_BOSH_XMPP="urn:xmpp:xbosh",t.NS_DISCO_EXTERNAL_1="urn:xmpp:extdisco:1",t.NS_DISCO_EXTERNAL_2="urn:xmpp:extdisco:2",t.NS_DATAFORM_MEDIA="urn:xmpp:media-element",t.NS_ATTENTION_0="urn:xmpp:attention:0",t.NS_BOB="urn:xmpp:bob",t.NS_SOFTWARE_INFO="urn:xmpp:dataforms:softwareinfo",t.NS_JINGLE_FILE_TRANSFER_3="urn:xmpp:jingle:apps:file-transfer:3",t.NS_JINGLE_FILE_TRANSFER_4="urn:xmpp:jingle:apps:file-transfer:4",t.NS_JINGLE_FILE_TRANSFER_5="urn:xmpp:jingle:apps:file-transfer:5",t.NS_JINGLE_XML_0="urn:xmpp:jingle:apps:xmlstream:0",t.NS_MUC_DIRECT_INVITE="jabber:x:conference",t.NS_SEC_LABEL_0="urn:xmpp:sec-label:0",t.NS_SEC_LABEL_CATALOG_2="urn:xmpp:sec-label:catalog:2",t.NS_SEC_LABEL_ESS_0="urn:xmpp:sec-label:ess:0",t.NS_JINGLE_SOCKS5_1="urn:xmpp:jingle:transports:s5b:1",t.NS_JINGLE_IBB_1="urn:xmpp:jingle:transports:ibb:1",t.NS_JINGLE_RTP_ZRTP_1="urn:xmpp:jingle:apps:rtp:zrtp:1",t.NS_THUMBS_0="urn:xmpp:thumbs:0",t.NS_THUMBS_1="urn:xmpp:thumbs:1",t.NS_DECLOAKING_0="urn:xmpp:decloaking:0",t.NS_CARBONS_2="urn:xmpp:carbons:2",t.NS_JINGLE_RTP_RTCP_FB_0="urn:xmpp:jingle:apps:rtp:rtcp-fb:0",t.NS_JINGLE_RTP_HDREXT_0="urn:xmpp:jingle:apps:rtp:rtp-hdrext:0",t.NS_FORWARD_0="urn:xmpp:forward:0",t.NS_HASHES_1="urn:xmpp:hashes:1",t.NS_HASHES_2="urn:xmpp:hashes:2",t.NS_HASH_NAME=e=>`urn:xmpp:hash-function-text-names:${e}`,t.NS_RTT_0="urn:xmpp:rtt:0",t.NS_MUC_UNIQUE="http://jabber.org/protocol/muc#unique",t.NS_CORRECTION_0="urn:xmpp:message-correct:0",t.NS_PSA="urn:xmpp:psa",t.NS_MAM_TMP="urn:xmpp:mam:tmp",t.NS_MAM_0="urn:xmpp:mam:0",t.NS_MAM_1="urn:xmpp:mam:1",t.NS_MAM_2="urn:xmpp:mam:2",t.NS_HATS_0="urn:xmpp:hats:0",t.NS_IDLE_1="urn:xmpp:idle:1",t.NS_JINGLE_DTLS_0="urn:xmpp:jingle:apps:dtls:0",t.NS_CHAT_MARKERS_0="urn:xmpp:chat-markers:0",t.NS_HINTS="urn:xmpp:hints",t.NS_JSON_0="urn:xmpp:json:0",t.NS_JINGLE_GROUPING_0="urn:xmpp:jingle:apps:grouping:0",t.NS_JINGLE_RTP_SSMA_0="urn:xmpp:jingle:apps:rtp:ssma:0",t.NS_JINGLE_DTLS_SCTP_1="urn:xmpp:jingle:transports:dtls-sctp:1",t.NS_CSI_0="urn:xmpp:csi:0",t.NS_JINGLE_MSG_INITIATE_0="urn:xmpp:jingle:jingle-message:0",t.NS_DELEGATION_1="urn:xmpp:delegation:1",t.NS_PUSH_0="urn:xmpp:push:0",t.NS_JINGLE_PUB_1="urn:xmpp:jinglepub:1",t.NS_SID_0="urn:xmpp:sid:0",t.NS_HTTP_UPLOAD_0="urn:xmpp:http:upload:0",t.NS_JINGLE_HTTP_0="urn:xmpp:jingle:transports:http:0",t.NS_JINGLE_HTTP_UPLOAD_0="urn:xmpp:jingle:transports:http:upload:0",t.NS_JINGLE_ICE_0="urn:xmpp:jingle:transports:ice:0",t.NS_REFERENCE_0="urn:xmpp:reference:0",t.NS_EME_0="urn:xmpp:eme:0",t.NS_SPOILER_0="urn:xmpp:spoiler:0",t.NS_OMEMO_AXOLOTL="eu.siacs.conversations.axolotl",t.NS_OMEMO_AXOLOTL_DEVICELIST="eu.siacs.conversations.axolotl.devicelist",t.NS_OMEMO_AXOLOTL_BUNDLES="eu.siacs.conversations.axolotl.bundles",t.NS_OMEMO_AXOLOTL_BUNDLE=e=>`${t.NS_OMEMO_AXOLOTL_BUNDLES}:${e}`,t.NS_JSON_MESSAGE_0="urn:xmpp:json-msg:0",t.NS_XRD="http://docs.oasis-open.org/ns/xri/xrd-1.0",t.NS_JINGLE_RTP_MSID_0="urn:xmpp:jingle:apps:rtp:msid:0"},2898:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.reviveData=t.uuid=t.octetCompare=t.sleep=t.shuffle=t.promiseAny=t.timeoutPromise=void 0;const r=i(4142),n=[];for(let e=0;e<256;++e)n[e]=(e+256).toString(16).substr(1);t.timeoutPromise=async function(e,t,i=(()=>{})){let r;const n=await Promise.race([e,new Promise(((e,n)=>{r=setTimeout((()=>n(i())),t)}))]);return clearTimeout(r),n},t.promiseAny=async function(e){try{const t=await Promise.all(e.map((e=>e.then((e=>Promise.reject(e)),(e=>Promise.resolve(e))))));return Promise.reject(t)}catch(e){return Promise.resolve(e)}},t.shuffle=function(e){let t=e.length;for(;t>0;){const i=Math.floor(Math.random()*t);t-=1;const r=e[t];e[t]=e[i],e[i]=r}return e},t.sleep=async function(e){return new Promise((t=>{setTimeout((()=>t()),e)}))},t.octetCompare=function(e,t){const i="string"==typeof e?r.Buffer.from(e,"utf8"):e,n="string"==typeof t?r.Buffer.from(t,"utf8"):t;return i.compare(n)},t.uuid=function(){const e=(0,r.randomBytes)(16);e[6]=15&e[6]|64,e[8]=63&e[8]|128;let t=0;return[n[e[t++]],n[e[t++]],n[e[t++]],n[e[t++]],"-",n[e[t++]],n[e[t++]],"-",n[e[t++]],n[e[t++]],"-",n[e[t++]],n[e[t++]],"-",n[e[t++]],n[e[t++]],n[e[t++]],n[e[t++]],n[e[t++]],n[e[15]]].join("")};const s=new Set(["date","expires","httpUploadRetry","idleSince","published","since","stamp","timestamp","updated","utc"]),a=/^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2}(?:\.\d*)?)(?:Z|((\+|-)([\d|:]*)))?$/;t.reviveData=function(e,t){return s.has(e)&&t&&"string"==typeof t&&a.test(t)?new Date(t):t&&"object"==typeof t&&"Buffer"===t.type&&Array.isArray(t.data)?r.Buffer.from(t):t}},6070:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.mergeFields=void 0,t.mergeFields=function(e,t){const i=[],r=new Map;for(const e of t)e.name&&r.set(e.name,e);const n=new Set;for(const t of e)t.name&&r.has(t.name)?(i.push({...t,...r.get(t.name)}),n.add(t.name)):i.push({...t});for(const e of t)(!e.name||e.name&&!n.has(e.name))&&i.push({...e});return i}},573:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=(0,i(7582).__importStar)(i(4426));t.default=class{constructor(){this.capsAlgorithms=["sha-1"],this.features=new Map,this.identities=new Map,this.extensions=new Map,this.items=new Map,this.caps=new Map,this.features.set("",new Set),this.identities.set("",[]),this.extensions.set("",[])}getNodeInfo(e){return{extensions:[...this.extensions.get(e)||[]],features:[...this.features.get(e)||[]],identities:[...this.identities.get(e)||[]]}}addFeature(e,t=""){this.features.has(t)||this.features.set(t,new Set),this.features.get(t).add(e)}addIdentity(e,t=""){this.identities.has(t)||this.identities.set(t,[]),this.identities.get(t).push(e)}addItem(e,t=""){this.items.has(t)||this.items.set(t,[]),this.items.get(t).push(e)}addExtension(e,t=""){this.extensions.has(t)||this.extensions.set(t,[]),this.extensions.get(t).push(e)}updateCaps(e,t=this.capsAlgorithms){const i={extensions:[...this.extensions.get("")],features:[...this.features.get("")],identities:[...this.identities.get("")],type:"info"};for(const n of t){const t=r.generate(i,n);if(!t){this.caps.delete(n);continue}this.caps.set(n,{algorithm:n,node:e,value:t});const s=`${e}#${t}`;for(const e of i.features)this.addFeature(e,s);for(const e of i.identities)this.addIdentity(e,s);for(const e of i.extensions)this.addExtension(e,s);this.identities.set(s,i.identities),this.features.set(s,new Set(i.features)),this.extensions.set(s,i.extensions)}return[...this.caps.values()]}getCaps(){return[...this.caps.values()]}}},4426:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.verify=t.generate=void 0;const r=i(4142),n=i(2898);function s(e){return r.Buffer.from(e.replace(/</g,"&lt;"),"utf-8")}function a(e=[]){const t=[];for(const i of e)"FORM_TYPE"!==i.name&&(i.rawValues?t.push({name:s(i.name),values:i.rawValues.map((e=>s(e))).sort(n.octetCompare)}):Array.isArray(i.value)?t.push({name:s(i.name),values:i.value.map((e=>s(e))).sort(n.octetCompare)}):!0===i.value||!1===i.value?t.push({name:s(i.name),values:[s(i.value?"1":"0")]}):t.push({name:s(i.name),values:[s(i.value||"")]}));t.sort(((e,t)=>(0,n.octetCompare)(e.name,t.name)));const i=[];for(const e of t){i.push(e.name);for(const t of e.values)i.push(t)}return i}function o(e,t){const i=[],o=r.Buffer.from("<","utf8"),l=e=>{i.push(e),i.push(o)},c=function(e=[]){const t=[],i=new Set;for(const{category:r,type:n,lang:a,name:o}of e){const e=`${r}/${n}/${a||""}/${o||""}`;if(i.has(e))return null;i.add(e),t.push(s(e))}return t.sort(n.octetCompare),t}(e.identities),u=function(e=[]){const t=[],i=new Set;for(const r of e){if(i.has(r))return null;i.add(r),t.push(s(r))}return t.sort(n.octetCompare),t}(e.features),p=function(e=[]){const t=[],i=new Set;for(const r of e){let e;for(const t of r.fields||[])if("FORM_TYPE"===t.name&&"hidden"===t.type){if(t.rawValues&&1===t.rawValues.length){e=s(t.rawValues[0]);break}if(t.value&&"string"==typeof t.value){e=s(t.value);break}}if(e){if(i.has(e.toString()))return null;i.add(e.toString()),t.push({type:e,form:r})}}t.sort(((e,t)=>(0,n.octetCompare)(e.type,t.type)));const r=[];for(const e of t){r.push(e.type);const t=a(e.form.fields);for(const e of t)r.push(e)}return r}(e.extensions);if(!c||!u||!p)return null;for(const e of c)l(e);for(const e of u)l(e);for(const e of p)l(e);return(0,r.createHash)(t).update(r.Buffer.concat(i)).digest("base64")}t.generate=o,t.verify=function(e,t,i){const r=o(e,t);return!!r&&r===i}},848:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=i(7582),n=i(4142),s=i(2898),a=i(9447),o=(0,r.__importDefault)(i(6335));t.default=class{constructor(){this.hostMetaCache=new Map,this.hostMetaTTL=3e4,this.resolver=(0,n.createResolver)(),this.registry=new a.Registry,this.registry.define(o.default)}async getHostMeta(e){const t=this.hostMetaCache.get(e);if(t){if(t.created+this.hostMetaTTL<Date.now())return t.hostmeta;this.hostMetaCache.delete(e)}const i=(0,s.promiseAny)([(0,n.fetch)(`https://${e}/.well-known/host-meta.json`).then((async e=>{if(!e.ok)throw new Error("could-not-fetch-json");return e.json()})),(0,n.fetch)(`https://${e}/.well-known/host-meta`).then((async e=>{if(!e.ok)throw new Error("could-not-fetch-xml");const t=await e.text(),i=(0,a.parse)(t);if(i)return this.registry.import(i);throw new Error("could-not-import-xml")}))]);return this.hostMetaCache.set(e,{created:Date.now(),hostmeta:i}),i.catch((()=>{this.hostMetaCache.delete(e)})),i}async resolveTXT(e){var t,i;return null!==(i=null===(t=this.resolver)||void 0===t?void 0:t.resolveTxt(e))&&void 0!==i?i:[]}async resolve(e,t,i={}){if(!this.resolver)return[];let r=[],n=!0;if(i.srvType){const t=await this.resolveWeightedSRV(e,i.srvType,i.srvTypeSecure);n=t.allowFallback,r=t.records.map((e=>({host:e.name,port:e.port,secure:e.secure})))}return n&&r.push({host:e,port:t}),r}async resolveWeightedSRV(e,t,i){const[r,n]=await Promise.all([this.resolveSRV(e,t),i?this.resolveSRV(e,i,!0):Promise.resolve({records:[],allowFallback:!1})]),a=[...r.records,...n.records],o=new Map;let l=0;for(const e of a)e.id=l++,e.runningSum=0,o.has(e.priority)||o.set(e.priority,[]),o.get(e.priority).push(e);const c=e=>{const t=[];for(;t.length<e.length;){const i=(0,s.shuffle)(e.filter((e=>0===e.weight&&!e.used))),r=(0,s.shuffle)(e.filter((e=>0!==e.weight&&!e.used)));let n=0;for(const e of r)n+=e.weight,e.runningSum=n,i.push(e);const a=Math.floor(Math.random()*(n+1));for(const e of i)if(e.runningSum>=a){e.used=!0,t.push(e);break}}return t};let u=[];for(const e of Array.from(o.keys()).sort(((e,t)=>e<t?-1:e>t?1:0))){const t=o.get(e);u=u.concat(c(t))}return{records:u,allowFallback:r.allowFallback}}async resolveSRV(e,t,i){var r,n;try{const s=null!==(n=await(null===(r=this.resolver)||void 0===r?void 0:r.resolveSrv(`${t}.${e}`)))&&void 0!==n?n:[];return 1!==s.length||"."!==s[0].name&&""!==s[0].name?{records:s.map((e=>({secure:i,...e}))).filter((e=>""!==e.name&&"."!==e.name)),allowFallback:!1}:{records:[],allowFallback:!1}}catch(e){return{records:[],allowFallback:!0}}}}},4106:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createPager=t.ResultSetPager=void 0;class i{constructor(e){var t,i,r;this.resultComplete=!1,this.fetchedCount=0,this.yieldedCount=0,this.cursor={first:e.before,last:e.after},this.query=e.query,this.direction=null!==(t=e.direction)&&void 0!==t?t:"forward",this.reverse=null!==(i=e.reverse)&&void 0!==i?i:"backward"===this.direction,this.pageSize=null!==(r=e.pageSize)&&void 0!==r?r:20}async*[Symbol.asyncIterator](){let e=[];do{e=await this.fetchPage();for(const t of e)this.yieldedCount+=1,yield t}while(e.length>0)}async size(){if(void 0!==this.resultCount)return this.resultCount;const{paging:e}=await this.query({max:0});return this.resultCount=e.count,e.count}queryCompleted(){return this.resultComplete}finished(){return this.resultComplete&&this.yieldedCount===this.fetchedCount}async fetchPage(){var e;const{results:t,paging:i}=await this.query({before:"backward"===this.direction?null!==(e=this.cursor.first)&&void 0!==e?e:"":void 0,after:"forward"===this.direction?this.cursor.last:void 0,max:this.pageSize});return this.cursor=i,this.resultCount=i.count,this.fetchedCount+=t.length,(this.pageSize&&t.length<this.pageSize||this.resultCount&&this.fetchedCount===this.resultCount)&&(this.resultComplete=!0),this.reverse&&t.reverse(),t}}t.ResultSetPager=i,t.createPager=function(e){return new i(e)}},3116:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.InputBuffer=t.DisplayBuffer=t.diff=void 0;const r=i(7582),n=i(1641),s=(0,r.__importDefault)(i(3689));function a(e,t){const i=e.length,r=t.length,n=Math.min(i,r);let a=0;for(a=0;a<n&&e[a]===t[a];a++);let o=0;for(o=0;o<n-a&&e[i-o-1]===t[r-o-1];o++);const l=a+o,c=[];if(l<i&&c.push({length:i-l,position:i-o,type:"erase"}),l<r){const e=t.slice(a,a+r-l);c.push({position:a,text:s.default.ucs2.encode(e),type:"insert"})}return c}t.diff=a,t.DisplayBuffer=class{constructor(e,t=!1){this.synced=!1,this.cursorPosition=0,this.ignoreWaits=!1,this.timeDeficit=0,this.sequenceNumber=0,this.onStateChange=e||function(){},this.ignoreWaits=t,this.buffer=[],this.resetActionQueue()}get text(){return s.default.ucs2.encode(this.buffer.slice())}commit(){this.resetActionQueue()}process(e){if("cancel"!==e.event&&"init"!==e.event){if("reset"===e.event||"new"===e.event?(this.resetActionQueue(),void 0!==e.seq&&(this.sequenceNumber=e.seq)):e.seq!==this.sequenceNumber&&(this.synced=!1),e.actions){const t=Date.now();let i=0;for(const r of e.actions)r.baseTime=t+i,"wait"===r.type&&(i+=r.duration),this.actionQueue.push(r,0)}this.sequenceNumber=this.sequenceNumber+1}else this.resetActionQueue()}insert(e="",t=this.buffer.length){e=e.normalize("NFC");const i=s.default.ucs2.decode(e);this.buffer.splice(t,0,...i),this.cursorPosition=t+i.length,this.emitState()}erase(e=1,t=this.buffer.length){t=Math.max(Math.min(t,this.buffer.length),0),e=Math.max(Math.min(e,this.text.length),0),this.buffer.splice(Math.max(t-e,0),e),this.cursorPosition=Math.max(t-e,0),this.emitState()}emitState(e={}){this.onStateChange({cursorPosition:this.cursorPosition,synced:this.synced,text:this.text,...e})}resetActionQueue(){this.actionQueue&&this.actionQueue.kill(),this.sequenceNumber=0,this.synced=!0,this.buffer=[],this.timeDeficit=0,this.actionQueue=(0,n.priorityQueue)(((e,t)=>{const i=Date.now();if("insert"===e.type)return this.insert(e.text,e.position),t();if("erase"===e.type)return this.erase(e.length,e.position),t();if("wait"!==e.type)return t();{if(this.ignoreWaits)return t();e.duration>700&&(e.duration=700);const r=e.duration-(i-e.baseTime)+this.timeDeficit;if(r<=0)return this.timeDeficit=r,t();this.timeDeficit=0,setTimeout((()=>t()),r)}}),1),this.emitState()}},t.InputBuffer=class{constructor(e,t=!1){this.resetInterval=1e4,this.ignoreWaits=!1,this.isStarting=!1,this.isReset=!1,this.changedBetweenResets=!1,this.onStateChange=e||function(){},this.ignoreWaits=t,this.buffer=[],this.actionQueue=[],this.sequenceNumber=0}get text(){return s.default.ucs2.encode(this.buffer.slice())}update(e){let t=[];if(void 0!==e){e=e.normalize("NFC");const i=s.default.ucs2.decode(e);t=a(this.buffer,i.slice()),this.buffer=i,this.emitState()}const i=Date.now();if(this.changedBetweenResets&&i-this.lastResetTime>this.resetInterval)this.actionQueue=[],this.actionQueue.push({position:0,text:this.text,type:"insert"}),this.isReset=!0,this.lastActionTime=i,this.lastResetTime=i,this.changedBetweenResets=!1;else if(t.length){const e=i-(this.lastActionTime||i);e>0&&!this.ignoreWaits&&this.actionQueue.push({duration:e,type:"wait"});for(const e of t)this.actionQueue.push(e);this.lastActionTime=i,this.changedBetweenResets=!0}else this.lastActionTime=i}start(e=this.resetInterval){return this.commit(),this.isStarting=!0,this.resetInterval=e,this.sequenceNumber=Math.floor(1e4*Math.random()+1),{event:"init"}}stop(){return this.commit(),{event:"cancel"}}diff(){if(this.update(),!this.actionQueue.length)return null;const e={actions:this.actionQueue,seq:this.sequenceNumber++};return this.isStarting?(e.event="new",this.isStarting=!1,this.lastResetTime=Date.now()):this.isReset&&(e.event="reset",this.isReset=!1),this.actionQueue=[],e}commit(){this.sequenceNumber=0,this.lastActionTime=0,this.actionQueue=[],this.buffer=[]}emitState(){this.onStateChange({text:this.text})}}},9845:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=i(7187),n=Math.pow(2,32),s=(e,t)=>(e%t+t)%t;class a extends r.EventEmitter{constructor(){super(),this.allowResume=!0,this.lastAck=0,this.handled=0,this.unacked=[],this.inboundStarted=!1,this.outboundStarted=!1,this.id=void 0,this.jid=void 0,this.allowResume=!0,this.started=!1,this.cacheHandler=()=>{},this._reset()}get started(){return this.outboundStarted&&this.inboundStarted}set started(e){e||(this.outboundStarted=!1,this.inboundStarted=!1)}get resumable(){return this.started&&this.allowResume}load(e){var t;this.id=e.id,this.allowResume=null===(t=e.allowResume)||void 0===t||t,this.handled=e.handled,this.lastAck=e.lastAck,this.unacked=e.unacked,this.emit("prebound",e.jid)}cache(e){this.cacheHandler=e}async bind(e){this.jid=e,await this._cache()}async enable(){this.emit("send",{allowResumption:this.allowResume,type:"enable"})}async resume(){this.emit("send",{handled:this.handled,previousSession:this.id,type:"resume"})}async enabled(e){this.id=e.id,this.allowResume=e.resume||!1,this.handled=0,this.inboundStarted=!0,await this._cache()}async resumed(e){this.id=e.previousSession,this.inboundStarted=!0,await this.process(e,!0),await this._cache()}async failed(e){await this.process(e);for(const[e,t]of this.unacked)this.emit("failed",{kind:e,stanza:t});this._reset(),await this._cache()}ack(){this.emit("send",{handled:this.handled,type:"ack"})}request(){this.emit("send",{type:"request"})}async process(e,t=!1){if(void 0===e.handled)return;const i=s(e.handled-this.lastAck,n);for(let e=0;e<i&&this.unacked.length>0;e++){const[e,t]=this.unacked.shift();this.emit("acked",{kind:e,stanza:t})}if(this.lastAck=e.handled,t){const e=this.unacked;if(this.unacked=[],e.length){this.emit("begin-resend");for(const[t,i]of e)this.emit("resend",{kind:t,stanza:i});this.emit("end-resend")}}await this._cache()}async track(e,t){const i="enable"===t.type;return"sm"!==e||!i&&"resume"!==t.type?!(!this.outboundStarted||"message"!==e&&"presence"!==e&&"iq"!==e||(this.unacked.push([e,t]),await this._cache(),0)):(i&&(this.handled=0),this.outboundStarted=!0,await this._cache(),!1)}async handle(){this.inboundStarted&&(this.handled=s(this.handled+1,n),await this._cache())}async hibernate(){if(!this.resumable)return this.shutdown();for(const[e,t]of this.unacked)this.emit("hibernated",{kind:e,stanza:t})}async shutdown(){return this.failed({type:"failed"})}async _cache(){try{await this.cacheHandler({allowResume:this.allowResume,handled:this.handled,id:this.id,jid:this.jid,lastAck:this.lastAck,unacked:this.unacked})}catch(e){console.error("Failed to cache stream state",e)}}_reset(){this.id="",this.inboundStarted=!1,this.outboundStarted=!1,this.lastAck=0,this.handled=0,this.unacked=[]}}t.default=a},3081:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createClient=t.VERSION=t.Platform=t.SASL=t.RTT=t.RSM=t.Utils=t.Jingle=t.Stanzas=t.Namespaces=t.JID=t.JXT=t.DataForms=t.Constants=t.Client=void 0;const r=i(7582),n=(0,r.__importDefault)(i(4058));t.Client=n.default;const s=(0,r.__importStar)(i(2768));t.Constants=s;const a=(0,r.__importStar)(i(3116));t.RTT=a;const o=(0,r.__importStar)(i(549));t.JID=o;const l=(0,r.__importStar)(i(7589));t.Jingle=l;const c=(0,r.__importStar)(i(9447));t.JXT=c;const u=(0,r.__importStar)(i(5803));t.SASL=u;const p=(0,r.__importStar)(i(6552));t.Namespaces=p;const d=(0,r.__importStar)(i(9672));t.Stanzas=d;const h=(0,r.__importStar)(i(2898));t.Utils=h;const f=(0,r.__importStar)(i(4142));t.Platform=f,(0,r.__exportStar)(i(9845),t);const m=(0,r.__importStar)(i(4106));t.RSM=m;const g=(0,r.__importStar)(i(6070));t.DataForms=g,t.VERSION=s.VERSION;const _=(0,r.__importDefault)(i(8614));(0,r.__exportStar)(i(8614),t),t.createClient=function(e){const t=new n.default(e);return t.use(_.default),t}},5763:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Receiver=t.Sender=void 0;const r=i(7582),n=i(7187),s=(0,r.__importStar)(i(4142)),a=i(2768),o=i(6552),l=(0,r.__importDefault)(i(8021)),c=i(7732),u=i(7264);class p extends n.EventEmitter{constructor(e={}){super(),this.config={chunkSize:16384,hash:"sha-1",...e},this.file=void 0,this.channel=void 0,this.hash=s.createHash(this.config.hash)}send(e,t){if(this.file&&this.channel)return;this.file=e,this.channel=t,this.channel.binaryType="arraybuffer";const i=new FileReader;let r=0,n=!1;const s=()=>{if(n||r>=e.size)return;n=!0;const t=e.slice(r,r+this.config.chunkSize);i.readAsArrayBuffer(t)};t.bufferedAmountLowThreshold=8*this.config.chunkSize,t.onbufferedamountlow=()=>{s()},i.addEventListener("load",(t=>{const i=t.target.result;n=!1,r+=i.byteLength,this.channel.send(i),this.hash.update(new Uint8Array(i)),this.emit("progress",r,e.size,i),r<e.size?this.channel.bufferedAmount<=this.channel.bufferedAmountLowThreshold&&s():(this.emit("progress",e.size,e.size,null),this.emit("sentFile",{algorithm:this.config.hash,name:e.name,size:e.size,value:this.hash.digest()}))})),s()}}t.Sender=p;class d extends n.EventEmitter{constructor(e={}){super(),this.config={hash:"sha-1",...e},this.receiveBuffer=[],this.received=0,this.channel=void 0,this.hash=s.createHash(this.config.hash)}receive(e,t){this.metadata=e,this.channel=t,this.channel.binaryType="arraybuffer",this.channel.onmessage=e=>{const t=e.data.byteLength;this.received+=t,this.receiveBuffer.push(e.data),e.data&&this.hash.update(new Uint8Array(e.data)),this.emit("progress",this.received,this.metadata.size,e.data),this.received===this.metadata.size?(this.metadata.actualhash=this.hash.digest("hex"),this.emit("receivedFile",new Blob(this.receiveBuffer),this.metadata),this.receiveBuffer=[]):this.received>this.metadata.size&&(console.error("received more than expected, discarding..."),this.receiveBuffer=[])}}}t.Receiver=d;class h extends l.default{constructor(e){super(e),this.sender=void 0,this.receiver=void 0,this.file=void 0}async start(e,t){if(t=t||(()=>{}),!e||"function"==typeof e)throw new Error("File object required");this.state="pending",this.role="initiator",this.file=e,this.sender=new p,this.sender.on("progress",((e,t)=>{this._log("info","Send progress "+e+"/"+t)})),this.sender.on("sentFile",(e=>{this._log("info","Sent file",e.name),this.send(a.JingleAction.SessionInfo,{info:{creator:a.JingleSessionRole.Initiator,file:{hashes:[{algorithm:e.algorithm,value:e.value}]},infoType:a.JINGLE_INFO_CHECKSUM_5,name:this.contentName}}),this.parent.emit("sentFile",this,e)})),this.channel=this.pc.createDataChannel("filetransfer",{ordered:!0}),this.channel.onopen=()=>{this.sender.send(this.file,this.channel)};try{await this.processLocal(a.JingleAction.SessionInitiate,(async()=>{const t=await this.pc.createOffer({offerToReceiveAudio:!1,offerToReceiveVideo:!1}),i=(0,c.importFromSDP)(t.sdp),r=(0,u.convertIntermediateToRequest)(i,this.role,this.transportType);this.contentName=r.contents[0].name,r.sid=this.sid,r.action=a.JingleAction.SessionInitiate,r.contents[0].application={applicationType:o.NS_JINGLE_FILE_TRANSFER_5,file:{date:e.lastModified?new Date(e.lastModified):void 0,hashesUsed:[{algorithm:"sha-1"}],name:e.name,size:e.size}},this.send("session-initiate",r),await this.pc.setLocalDescription(t)})),t()}catch(e){return this._log("error","Could not create WebRTC offer",e),this.end("failed-application",!0)}}async accept(e){this._log("info","Accepted incoming session"),this.role="responder",this.state="active",e=e||(()=>{});try{await this.processLocal(a.JingleAction.SessionAccept,(async()=>{const e=await this.pc.createAnswer(),t=(0,c.importFromSDP)(e.sdp),i=(0,u.convertIntermediateToRequest)(t,this.role,this.transportType);i.sid=this.sid,i.action="session-accept";for(const e of i.contents)e.creator="initiator";this.contentName=i.contents[0].name,this.send("session-accept",i),await this.pc.setLocalDescription(e),await this.processBufferedCandidates()})),e()}catch(e){this._log("error","Could not create WebRTC answer",e),this.end("failed-application")}}async onSessionInitiate(e,t){this._log("info","Initiating incoming session"),this.role="responder",this.state="pending",this.transportType=e.contents[0].transport.transportType;const i=(0,u.convertRequestToIntermediate)(e,this.peerRole),r=(0,c.exportToSDP)(i),n=e.contents[0].application,s=n.file.hashesUsed?n.file.hashesUsed:n.file.hashes||[];this.receiver=new d({hash:s[0]&&s[0].algorithm}),this.receiver.on("progress",((e,t)=>{this._log("info","Receive progress "+e+"/"+t)})),this.receiver.on("receivedFile",(e=>{this.receivedFile=e,this._maybeReceivedFile()})),this.receiver.metadata=n.file,this.pc.addEventListener("datachannel",(e=>{this.channel=e.channel,this.receiver.receive(this.receiver.metadata,e.channel)}));try{await this.pc.setRemoteDescription({type:"offer",sdp:r}),await this.processBufferedCandidates(),t()}catch(e){this._log("error","Could not create WebRTC answer",e),t({condition:"general-error"})}}onSessionInfo(e,t){const i=e.info;i&&i.file&&i.file.hashes&&(this.receiver.metadata.hashes=i.file.hashes,this.receiver.metadata.actualhash&&this._maybeReceivedFile(),t())}_maybeReceivedFile(){if(this.receiver.metadata.hashes&&this.receiver.metadata.hashes.length){for(const e of this.receiver.metadata.hashes||[])if(e.value&&e.value.toString("hex")===this.receiver.metadata.actualhash)return this._log("info","File hash matches"),this.parent.emit("receivedFile",this,this.receivedFile,this.receiver.metadata),void this.end("success");this._log("error","File hash does not match"),this.end("media-error")}}}t.default=h},8021:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=i(7582),n=(0,r.__importStar)(i(7539)),s=i(2768),a=i(6552),o=i(7732),l=i(7264),c=(0,r.__importDefault)(i(7072));class u extends c.default{constructor(e){super(e),this.bitrateLimit=0,this.candidateBuffer=[],this.transportType=a.NS_JINGLE_ICE_UDP_1,this.restartingIce=!1,this.usingRelay=!1,this.maxRelayBandwidth=e.maxRelayBandwidth,this.pc=this.parent.createPeerConnection(this,{...e.config,iceServers:e.iceServers}),this.pc.oniceconnectionstatechange=()=>{this.onIceStateChange()},this.pc.onicecandidate=e=>{e.candidate?this.onIceCandidate(e):this.onIceEndOfCandidates()},this.restrictRelayBandwidth()}end(e="success",t=!1){this.pc.close(),super.end(e,t)}async restartIce(){if(this.isInitiator){void 0!==this._maybeRestartingIce&&clearTimeout(this._maybeRestartingIce),this.restartingIce=!0;try{await this.processLocal("restart-ice",(async()=>{const e=await this.pc.createOffer({iceRestart:!0}),t=(0,o.importFromSDP)(e.sdp);this.send(s.JingleAction.TransportInfo,{contents:t.media.map((e=>({creator:s.JingleSessionRole.Initiator,name:e.mid,transport:(0,l.convertIntermediateToTransport)(e,this.transportType)}))),sid:this.sid}),await this.pc.setLocalDescription(e)}))}catch(e){this._log("error","Could not create WebRTC offer",e),this.end(s.JingleReasonCondition.FailedTransport,!0)}}}async setMaximumBitrate(e){this.maximumBitrate&&(e=Math.min(e,this.maximumBitrate)),this.currentBitrate=e;const t=this.pc.getSenders().find((e=>!!e.track&&"video"===e.track.kind));if(t&&t.getParameters)try{await this.processLocal("set-bitrate",(async()=>{const i=t.getParameters();i.encodings&&i.encodings.length||(i.encodings=[{}]),0===e?delete i.encodings[0].maxBitrate:i.encodings[0].maxBitrate=e,await t.setParameters(i)}))}catch(e){this._log("error","Set maximumBitrate failed",e)}}async onTransportInfo(e,t){if(e.contents&&e.contents[0]&&e.contents[0].transport.gatheringComplete){const i={sdpMid:e.contents[0].name,candidate:""};try{"stable"===this.pc.signalingState?await this.pc.addIceCandidate(i):this.candidateBuffer.push(i)}catch(e){this._log("debug","Could not add null end-of-candidate")}finally{t()}return}if(this.pc.remoteDescription){const i=this.pc.remoteDescription,r=(0,o.importFromSDP)(i.sdp),n=r.media.find((t=>t.mid===e.contents[0].name)).iceParameters.usernameFragment,a=e.contents[0].transport.usernameFragment;if(a&&n!==a){for(const[t,i]of e.contents.entries()){const e=i.transport;r.media[t].iceParameters={password:e.password,usernameFragment:e.usernameFragment},r.media[t].candidates=[]}try{if(await this.pc.setRemoteDescription({type:i.type,sdp:(0,o.exportToSDP)(r)}),await this.processBufferedCandidates(),"offer"===i.type){const e=await this.pc.createAnswer();await this.pc.setLocalDescription(e);const t=(0,o.importFromSDP)(e.sdp);this.send(s.JingleAction.TransportInfo,{contents:t.media.map((e=>({creator:s.JingleSessionRole.Initiator,name:e.mid,transport:(0,l.convertIntermediateToTransport)(e,this.transportType)}))),sid:this.sid})}else this.restartingIce=!1}catch(e){return this._log("error","Could not do remote ICE restart",e),t(e),void this.end(s.JingleReasonCondition.FailedTransport)}}}const i=(e.contents||[]).map((e=>{const t=e.name,i=(e.transport.candidates||[]).map((async e=>{const i=n.writeCandidate((0,l.convertCandidateToIntermediate)(e));if(this.pc.remoteDescription&&"stable"===this.pc.signalingState)try{await this.pc.addIceCandidate({sdpMid:t,candidate:i})}catch(e){this._log("error","Could not add ICE candidate",e)}else this.candidateBuffer.push({sdpMid:t,candidate:i})}));return Promise.all(i)}));try{await Promise.all(i),t()}catch(e){this._log("error",`Could not process transport-info: ${e}`),t(e)}}async onSessionAccept(e,t){this.state="active";const i=(0,l.convertRequestToIntermediate)(e,this.peerRole),r=(0,o.exportToSDP)(i);try{await this.pc.setRemoteDescription({type:"answer",sdp:r}),await this.processBufferedCandidates(),this.parent.emit("accepted",this,void 0),t()}catch(e){this._log("error",`Could not process WebRTC answer: ${e}`),t({condition:"general-error"})}}onSessionTerminate(e,t){this._log("info","Terminating session"),this.pc.close(),super.end(e.reason,!0),t()}onIceCandidate(e){if(!e.candidate||!e.candidate.candidate)return;const t=n.parseCandidate(e.candidate.candidate),i={contents:[{creator:s.JingleSessionRole.Initiator,name:e.candidate.sdpMid,transport:{candidates:[(0,l.convertIntermediateToCandidate)(t)],transportType:this.transportType,usernameFragment:t.usernameFragment}}]};this._log("info","Discovered new ICE candidate",i),this.send(s.JingleAction.TransportInfo,i)}onIceEndOfCandidates(){this._log("info","ICE end of candidates");const e=(0,o.importFromSDP)(this.pc.localDescription.sdp).media[0];this.send(s.JingleAction.TransportInfo,{contents:[{creator:s.JingleSessionRole.Initiator,name:e.mid,transport:{gatheringComplete:!0,transportType:this.transportType,usernameFragment:e.iceParameters.usernameFragment}}]})}onIceStateChange(){switch(this.pc.iceConnectionState){case"checking":this.connectionState="connecting";break;case"completed":case"connected":this.connectionState="connected";break;case"disconnected":if("stable"===this.pc.signalingState?this.connectionState="interrupted":this.connectionState="disconnected",this.restartingIce)return void this.end(s.JingleReasonCondition.FailedTransport);this.maybeRestartIce();break;case"failed":if("failed"===this.connectionState||this.restartingIce)return void this.end(s.JingleReasonCondition.FailedTransport);this.connectionState="failed",this.restartIce();break;case"closed":this.connectionState="disconnected",this.restartingIce?this.end(s.JingleReasonCondition.FailedTransport):this.end()}}async processBufferedCandidates(){for(const e of this.candidateBuffer)try{await this.pc.addIceCandidate(e)}catch(e){this._log("error","Could not add ICE candidate",e)}this.candidateBuffer=[]}restrictRelayBandwidth(){this.pc.addEventListener("iceconnectionstatechange",(async()=>{if("completed"!==this.pc.iceConnectionState&&"connected"!==this.pc.iceConnectionState)return;const e=await this.pc.getStats();let t;if(e.forEach((i=>{"transport"===i.type&&(t=e.get(i.selectedCandidatePairId))})),t||e.forEach((e=>{"candidate-pair"===e.type&&e.selected&&(t=e)})),!t)return;let i=!1,r="",n="";if(t.remoteCandidateId){const i=e.get(t.remoteCandidateId);i&&(n=i.candidateType)}if(t.localCandidateId){const i=e.get(t.localCandidateId);i&&(r=i.candidateType)}"relay"!==r&&"relay"!==n||(i=!0),this.usingRelay=i,this.parent.emit("iceConnectionType",this,{localCandidateType:r,relayed:i,remoteCandidateType:n}),i&&void 0!==this.maxRelayBandwidth&&(this.maximumBitrate=this.maxRelayBandwidth,this.currentBitrate?this.setMaximumBitrate(Math.min(this.currentBitrate,this.maximumBitrate)):this.setMaximumBitrate(this.maximumBitrate))}))}maybeRestartIce(){this.isInitiator&&(void 0!==this._maybeRestartingIce&&clearTimeout(this._maybeRestartingIce),this._maybeRestartingIce=setTimeout((()=>{this._maybeRestartingIce=void 0,"disconnected"===this.pc.iceConnectionState&&this.restartIce()}),2e3))}}t.default=u},6694:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=i(7582),n=i(2768),s=(0,r.__importDefault)(i(8021)),a=i(7732),o=i(7264);function l(e){const t=e.application;if(t.streams&&t.streams.length&&t.sources&&t.sources.length){const e=t.streams[0];t.sources[0].parameters.msid=`${e.id} ${e.track}`,t.sourceGroups&&t.sourceGroups.length>0&&t.sources.push({parameters:{cname:t.sources[0].parameters.cname,msid:`${e.id} ${e.track}`},ssrc:t.sourceGroups[0].sources[1]})}}class c extends s.default{constructor(e){if(super(e),this.includesAudio=!1,this.includesVideo=!1,this._ringing=!1,this.pc.addEventListener("track",(e=>{this.onAddTrack(e.track,e.streams[0])})),e.stream)for(const t of e.stream.getTracks())this.addTrack(t,e.stream)}get ringing(){return this._ringing}set ringing(e){e!==this._ringing&&(this._ringing=e)}get streams(){return"closed"!==this.pc.signalingState?this.pc.getRemoteStreams():[]}async start(e,t){this.state="pending",1===arguments.length&&"function"==typeof e&&(t=e,e={}),t=t||(()=>{}),e=e||{},this.role="initiator",this.offerOptions=e;try{await this.processLocal(n.JingleAction.SessionInitiate,(async()=>{const t=await this.pc.createOffer(e),i=(0,a.importFromSDP)(t.sdp),r=(0,o.convertIntermediateToRequest)(i,this.role,this.transportType);r.sid=this.sid,r.action=n.JingleAction.SessionInitiate;for(const e of r.contents||[])e.creator="initiator",l(e);await this.pc.setLocalDescription(t),this.send("session-initiate",r)})),t()}catch(e){this._log("error","Could not create WebRTC offer",e),this.end("failed-application",!0)}}async accept(e,t){1===arguments.length&&"function"==typeof e&&(t=e,e={}),t=t||(()=>{}),e=e||{},this._log("info","Accepted incoming session"),this.state="active",this.role="responder";try{await this.processLocal(n.JingleAction.SessionAccept,(async()=>{const t=await this.pc.createAnswer(e),i=(0,a.importFromSDP)(t.sdp),r=(0,o.convertIntermediateToRequest)(i,this.role,this.transportType);r.sid=this.sid,r.action=n.JingleAction.SessionAccept;for(const e of r.contents||[])e.creator="initiator";await this.pc.setLocalDescription(t),await this.processBufferedCandidates(),this.send("session-accept",r)})),t()}catch(e){this._log("error","Could not create WebRTC answer",e),this.end("failed-application")}}end(e="success",t=!1){for(const e of this.pc.getReceivers())this.onRemoveTrack(e.track);super.end(e,t)}ring(){return this.processLocal("ring",(async()=>{this._log("info","Ringing on incoming session"),this.ringing=!0,this.send(n.JingleAction.SessionInfo,{info:{infoType:n.JINGLE_INFO_RINGING}})}))}mute(e,t){return this.processLocal("mute",(async()=>{this._log("info","Muting",t),this.send(n.JingleAction.SessionInfo,{info:{creator:e,infoType:n.JINGLE_INFO_MUTE,name:t}})}))}unmute(e,t){return this.processLocal("unmute",(async()=>{this._log("info","Unmuting",t),this.send(n.JingleAction.SessionInfo,{info:{creator:e,infoType:n.JINGLE_INFO_UNMUTE,name:t}})}))}hold(){return this.processLocal("hold",(async()=>{this._log("info","Placing on hold"),this.send("session-info",{info:{infoType:n.JINGLE_INFO_HOLD}})}))}resume(){return this.processLocal("resume",(async()=>{this._log("info","Resuming from hold"),this.send("session-info",{info:{infoType:n.JINGLE_INFO_ACTIVE}})}))}addTrack(e,t,i){return"audio"===e.kind&&(this.includesAudio=!0),"video"===e.kind&&(this.includesVideo=!0),this.processLocal("addtrack",(async()=>{this.pc.addTrack?this.pc.addTrack(e,t):this.pc.addStream(t),i&&i()}))}async removeTrack(e,t){return this.processLocal("removetrack",(async()=>{if(this.pc.removeTrack(e),t)return t()}))}onAddTrack(e,t){this._log("info","Track added"),this.parent.emit("peerTrackAdded",this,e,t)}onRemoveTrack(e){this._log("info","Track removed"),this.parent.emit("peerTrackRemoved",this,e)}async onSessionInitiate(e,t){this._log("info","Initiating incoming session"),this.state="pending",this.role="responder",this.transportType=e.contents[0].transport.transportType;const i=(0,o.convertRequestToIntermediate)(e,this.peerRole);for(const e of i.media)"audio"===e.kind&&(this.includesAudio=!0),"video"===e.kind&&(this.includesVideo=!0),e.streams||(e.streams=[{stream:"legacy",track:e.kind}]);const r=(0,a.exportToSDP)(i);try{return await this.pc.setRemoteDescription({type:"offer",sdp:r}),await this.processBufferedCandidates(),t()}catch(e){return this._log("error","Could not create WebRTC answer",e),t({condition:"general-error"})}}onSessionTerminate(e,t){for(const e of this.pc.getReceivers())this.onRemoveTrack(e.track);super.onSessionTerminate(e,t)}onSessionInfo(e,t){const i=e.info||{infoType:""};switch(i.infoType){case n.JINGLE_INFO_RINGING:return this._log("info","Outgoing session is ringing"),this.ringing=!0,this.parent.emit("ringing",this),t();case n.JINGLE_INFO_HOLD:return this._log("info","On hold"),this.parent.emit("hold",this),t();case n.JINGLE_INFO_UNHOLD:case n.JINGLE_INFO_ACTIVE:return this._log("info","Resuming from hold"),this.parent.emit("resumed",this),t();case n.JINGLE_INFO_MUTE:return this._log("info","Muting",i),this.parent.emit("mute",this,i),t();case n.JINGLE_INFO_UNMUTE:return this._log("info","Unmuting",i),this.parent.emit("unmute",this,i),t()}return t()}}t.default=c},7072:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=i(1641),n=i(2768),s=i(2898),a={condition:n.StanzaErrorCondition.BadRequest},o={condition:n.StanzaErrorCondition.FeatureNotImplemented,jingleError:n.JingleErrorCondition.UnsupportedInfo,type:"modify"};t.default=class{constructor(e){this.parent=e.parent,this.sid=e.sid||(0,s.uuid)(),this.peerID=e.peerID,this.role=e.initiator?n.JingleSessionRole.Initiator:n.JingleSessionRole.Responder,this._sessionState="starting",this._connectionState="starting",this.pendingApplicationTypes=e.applicationTypes||[],this.pendingAction=void 0,this.processingQueue=(0,r.priorityQueue)((async(e,t)=>{if("ended"===this.state)return"local"===e.type&&e.reject&&e.reject(new Error("Session ended")),void(t&&t());if("local"===e.type){this._log("debug","Processing local action:",e.name);try{const t=await e.handler();e.resolve(t)}catch(t){e.reject(t)}return void(t&&t())}const{action:i,changes:r,cb:s}=e;return this._log("debug","Processing remote action:",i),new Promise((e=>{const a=(i,r)=>{s(i,r),t&&t(),e()};switch(i){case n.JingleAction.ContentAccept:return this.onContentAccept(r,a);case n.JingleAction.ContentAdd:return this.onContentAdd(r,a);case n.JingleAction.ContentModify:return this.onContentModify(r,a);case n.JingleAction.ContentReject:return this.onContentReject(r,a);case n.JingleAction.ContentRemove:return this.onContentRemove(r,a);case n.JingleAction.DescriptionInfo:return this.onDescriptionInfo(r,a);case n.JingleAction.SecurityInfo:return this.onSecurityInfo(r,a);case n.JingleAction.SessionAccept:return this.onSessionAccept(r,a);case n.JingleAction.SessionInfo:return this.onSessionInfo(r,a);case n.JingleAction.SessionInitiate:return this.onSessionInitiate(r,a);case n.JingleAction.SessionTerminate:return this.onSessionTerminate(r,a);case n.JingleAction.TransportAccept:return this.onTransportAccept(r,a);case n.JingleAction.TransportInfo:return this.onTransportInfo(r,a);case n.JingleAction.TransportReject:return this.onTransportReject(r,a);case n.JingleAction.TransportReplace:return this.onTransportReplace(r,a);default:this._log("error","Invalid or unsupported action: "+i),a({condition:n.StanzaErrorCondition.BadRequest})}}))}),1)}get isInitiator(){return this.role===n.JingleSessionRole.Initiator}get peerRole(){return this.isInitiator?n.JingleSessionRole.Responder:n.JingleSessionRole.Initiator}get state(){return this._sessionState}set state(e){e!==this._sessionState&&(this._log("info","Changing session state to: "+e),this._sessionState=e,this.parent&&this.parent.emit("sessionState",this,e))}get connectionState(){return this._connectionState}set connectionState(e){e!==this._connectionState&&(this._log("info","Changing connection state to: "+e),this._connectionState=e,this.parent&&this.parent.emit("connectionState",this,e))}send(e,t){(t=t||{}).sid=this.sid,t.action=e,new Set([n.JingleAction.ContentAccept,n.JingleAction.ContentAdd,n.JingleAction.ContentModify,n.JingleAction.ContentReject,n.JingleAction.ContentRemove,n.JingleAction.SessionAccept,n.JingleAction.SessionInitiate,n.JingleAction.TransportAccept,n.JingleAction.TransportReject,n.JingleAction.TransportReplace]).has(e)?this.pendingAction=e:this.pendingAction=void 0,this.parent.signal(this,{id:(0,s.uuid)(),jingle:t,to:this.peerID,type:"set"})}processLocal(e,t){return new Promise(((i,r)=>{this.processingQueue.push({handler:t,name:e,reject:r,resolve:i,type:"local"},1)}))}process(e,t,i){this.processingQueue.push({action:e,cb:i,changes:t,type:"remote"},2)}start(e,t){this._log("error","Can not start base sessions"),this.end("unsupported-applications",!0)}accept(e,t){this._log("error","Can not accept base sessions"),this.end("unsupported-applications")}cancel(){this.end("cancel")}decline(){this.end("decline")}end(e="success",t=!1){this.state="ended",this.processingQueue.kill(),"string"==typeof e&&(e={condition:e}),t||this.send("session-terminate",{reason:e}),this.parent.emit("terminated",this,e),this.parent.forgetSession(this)}_log(e,t,...i){this.parent&&(t=this.sid+": "+t,this.parent.emit("log",e,t,...i),this.parent.emit("log:"+e,t,...i))}onSessionInitiate(e,t){t()}onSessionAccept(e,t){t()}onSessionTerminate(e,t){this.end(e.reason,!0),t()}onSessionInfo(e,t){e.info?t(o):t()}onSecurityInfo(e,t){t(o)}onDescriptionInfo(e,t){t(o)}onTransportInfo(e,t){t(o)}onContentAdd(e,t){t(),this.send(n.JingleAction.ContentReject,{reason:{condition:n.JingleReasonCondition.FailedApplication,text:"content-add is not supported"}})}onContentAccept(e,t){t(a)}onContentReject(e,t){t(a)}onContentModify(e,t){t(a)}onContentRemove(e,t){t(a)}onTransportReplace(e,t){t(),this.send(n.JingleAction.TransportReject,{reason:{condition:n.JingleReasonCondition.FailedTransport,text:"transport-replace is not supported"}})}onTransportAccept(e,t){t(a)}onTransportReject(e,t){t(a)}}},7977:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=i(7582),n=i(7187),s=i(2768),a=i(6552),o=i(4142),l=i(2898),c=(0,r.__importDefault)(i(5763)),u=(0,r.__importDefault)(i(6694)),p=(0,r.__importDefault)(i(7072)),d=786432;class h extends n.EventEmitter{constructor(e={}){super(),e=e||{},this.selfID=e.selfID,this.sessions={},this.peers={},this.iceServers=e.iceServers||[],this.prepareSession=e.prepareSession||(e=>{if(this.config.hasRTCPeerConnection)return e.applicationTypes.indexOf(a.NS_JINGLE_RTP_1)>=0?new u.default(e):e.applicationTypes.indexOf(a.NS_JINGLE_FILE_TRANSFER_5)>=0?new c.default(e):void 0}),this.performTieBreak=e.performTieBreak||((e,t)=>{const i=(t.jingle.contents||[]).map((e=>{if(e.application)return e.application.applicationType}));return(e.pendingApplicationTypes||[]).filter((e=>i.includes(e))).length>0}),this.createPeerConnection=e.createPeerConnection||((e,t)=>{if(o.RTCPeerConnection)return new o.RTCPeerConnection(t)}),this.config={debug:!1,hasRTCPeerConnection:!!o.RTCPeerConnection,peerConnectionConfig:{bundlePolicy:e.bundlePolicy||"balanced",iceTransportPolicy:e.iceTransportPolicy||"all",rtcpMuxPolicy:e.rtcpMuxPolicy||"require",sdpSemantics:e.sdpSemantics},peerConnectionConstraints:{optional:[{DtlsSrtpKeyAgreement:!0},{RtpDataChannels:!1}]},...e}}addICEServer(e){if("string"==typeof e)return void this.iceServers.push({urls:e});if(!(t=e).type&&(t.urls||t.url))return void this.iceServers.push(e);var t;let i=e.host||"";i.indexOf(":")>=0&&(i=`[${i}]`);let r=`${e.type}:${i}`;e.port&&(r+=`:${e.port}`),e.transport&&(r+=`?transport=${e.transport}`),"turn"===e.type||"turns"===e.type?this.iceServers.push({credential:e.password,urls:[r],username:e.username}):"stun"!==e.type&&"stuns"!==e.type||this.iceServers.push({urls:[r]})}resetICEServers(){this.iceServers=[]}addSession(e){e.parent=this;const t=e.sid,i=e.peerID;return this.sessions[t]=e,this.peers[i]||(this.peers[i]=[]),this.peers[i].push(e),this.emit("createdSession",e),e}forgetSession(e){const t=this.peers[e.peerID]||[];t.length&&t.splice(t.indexOf(e),1),delete this.sessions[e.sid]}createMediaSession(e,t,i){const r=new u.default({config:this.config.peerConnectionConfig,constraints:this.config.peerConnectionConstraints,iceServers:this.iceServers,initiator:!0,maxRelayBandwidth:d,parent:this,peerID:e,sid:t,stream:i});return this.addSession(r),r}createFileTransferSession(e,t){const i=new c.default({config:this.config.peerConnectionConfig,constraints:this.config.peerConnectionConstraints,iceServers:this.iceServers,initiator:!0,maxRelayBandwidth:d,parent:this,peerID:e,sid:t});return this.addSession(i),i}endPeerSessions(e,t,i=!1){const r=this.peers[e]||[];delete this.peers[e];for(const e of r)e.end(t||"gone",i)}endAllSessions(e,t=!1){for(const i of Object.keys(this.peers))this.endPeerSessions(i,e,t)}process(e){const t=e.jingle?e.jingle.sid:void 0;let i=t?this.sessions[t]:void 0;const r=e.id,n=e.from;if(!n)return;if("error"===e.type){if(this._log("error","Received error response",e),i&&e.error&&"unknown-session"===e.error.jingleError)return i.end("gone",!0);const t=e.error&&"tie-break"===e.error.jingleError;return i&&"pending"===i.state&&t?i.end("alternative-session",!0):void(i&&(i.pendingAction=void 0))}if("result"===e.type)return void(i&&(i.pendingAction=void 0));const a=e.jingle.action,o=e.jingle.contents||[],c=o.map((e=>e.application?e.application.applicationType:void 0)),u=o.map((e=>e.transport?e.transport.transportType:void 0));if(a!==s.JingleAction.SessionInitiate){if(!i)return"session-terminate"===a?void this.emit("send",{id:r,to:n,type:"result"}):(this._log("error","Unknown session",t),this._sendError(n,r,{condition:"item-not-found",jingleError:"unknown-session"}));if(i.peerID!==n||"ended"===i.state)return this._log("error","Session has ended, or action has wrong sender"),this._sendError(n,r,{condition:"item-not-found",jingleError:"unknown-session"});if("session-accept"===a&&"pending"!==i.state)return this._log("error","Tried to accept session twice",t),this._sendError(n,r,{condition:"unexpected-request",jingleError:"out-of-order"});if("session-terminate"!==a&&a===i.pendingAction&&(this._log("error","Tie break during pending request"),i.isInitiator))return this._sendError(n,r,{condition:"conflict",jingleError:"tie-break"})}else if(i){if(i.peerID!==n)return this._log("error","Duplicate sid from new sender"),this._sendError(n,r,{condition:"service-unavailable"});if("pending"!==i.state)return this._log("error","Someone is doing this wrong"),this._sendError(n,r,{condition:"unexpected-request",jingleError:"out-of-order"});if(this.selfID&&this.selfID>i.peerID&&this.performTieBreak(i,e))return this._log("error","Tie break new session because of duplicate sids"),this._sendError(n,r,{condition:"conflict",jingleError:"tie-break"})}else if(this.peers[n]&&this.peers[n].length)for(let i=0,s=this.peers[n].length;i<s;i++){const s=this.peers[n][i];if(s&&"pending"===s.state&&t&&(0,l.octetCompare)(s.sid,t)>0&&this.performTieBreak(s,e))return this._log("info","Tie break session-initiate"),this._sendError(n,r,{condition:"conflict",jingleError:"tie-break"})}if("session-initiate"===a){if(!o.length)return this._sendError(n,r,{condition:"bad-request"});i=this._createIncomingSession({applicationTypes:c,config:this.config.peerConnectionConfig,constraints:this.config.peerConnectionConstraints,iceServers:this.iceServers,initiator:!1,parent:this,peerID:n,sid:t,transportTypes:u},e)}i.process(a,e.jingle,(t=>{t?(this._log("error","Could not process request",e,t),this._sendError(n,r,t)):(this.emit("send",{id:r,to:n,type:"result"}),"session-initiate"===a&&this.emit("incoming",i))}))}signal(e,t){const i=t.jingle&&t.jingle.action;e.isInitiator&&i===s.JingleAction.SessionInitiate&&this.emit("outgoing",e),this.emit("send",t)}_createIncomingSession(e,t){let i;return this.prepareSession&&(i=this.prepareSession(e,t)),i||(i=new p.default(e)),this.addSession(i),i}_sendError(e,t,i){i.type||(i.type="cancel"),this.emit("send",{error:i,id:t,to:e,type:"error"})}_log(e,t,...i){this.emit("log",e,t,...i),this.emit("log:"+e,t,...i)}}t.default=h},7589:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SessionManager=t.FileSession=t.MediaSession=t.ICESession=t.Session=t.exportToSDP=t.importFromSDP=void 0;const r=i(7582),n=(0,r.__importDefault)(i(5763));t.FileSession=n.default;const s=(0,r.__importDefault)(i(8021));t.ICESession=s.default;const a=(0,r.__importDefault)(i(6694));t.MediaSession=a.default;const o=(0,r.__importDefault)(i(7072));t.Session=o.default;const l=(0,r.__importDefault)(i(7977));t.SessionManager=l.default;var c=i(7732);Object.defineProperty(t,"importFromSDP",{enumerable:!0,get:function(){return c.importFromSDP}}),Object.defineProperty(t,"exportToSDP",{enumerable:!0,get:function(){return c.exportToSDP}})},7732:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.exportToSDP=t.importFromSDP=void 0;const r=(0,i(7582).__importStar)(i(7539));t.importFromSDP=function(e){const t=r.getMediaSections(e),i=r.getDescription(e),n={groups:[],media:[]};r.matchPrefix(i,"a=ice-lite").length>0&&(n.iceLite=!0);for(const e of r.matchPrefix(i,"a=group:")){const t=e.split(" "),i=t.shift().substr(8);n.groups.push({mids:t,semantics:i})}for(const e of t){const t=r.getKind(e),s=r.isRejected(e),a=r.parseMLine(e),o={direction:r.getDirection(e,i),kind:t,mid:r.getMid(e),protocol:a.protocol};if(s||(o.iceParameters=r.getIceParameters(e,i),o.dtlsParameters=r.getDtlsParameters(e,i),o.setup=r.matchPrefix(e,"a=setup:")[0].substr(8),n.iceLite&&(o.iceParameters.iceLite=!0)),"audio"===t||"video"===t){o.rtpParameters=r.parseRtpParameters(e),o.rtpEncodingParameters=r.parseRtpEncodingParameters(e),o.rtcpParameters=r.parseRtcpParameters(e);const t=r.parseMsid(e);o.streams=t?[t]:[]}else"application"===t&&(o.sctp=r.parseSctpDescription(e));o.candidates=r.matchPrefix(e,"a=candidate:").map(r.parseCandidate),n.media.push(o)}return n},t.exportToSDP=function(e){const t=[];t.push(r.writeSessionBoilerplate(e.sessionId,e.sessionVersion),"a=msid-semantic:WMS *\r\n"),(e.iceLite||e.media.filter((e=>e.iceParameters&&e.iceParameters.iceLite)).length>0)&&t.push("a=ice-lite\r\n");for(const i of e.groups||[])t.push(`a=group:${i.semantics} ${i.mids.join(" ")}\r\n`);for(const i of e.media||[]){const e=!(i.iceParameters&&i.dtlsParameters);if("application"===i.kind&&i.sctp)t.push(r.writeSctpDescription(i,i.sctp));else if(i.rtpParameters){let n=r.writeRtpDescription(i.kind,i.rtpParameters);e&&(n=n.replace(`m=${i.kind} 9 `,`m=${i.kind} 0 `)),t.push(n),t.push(`a=${i.direction||"sendrecv"}\r\n`);for(const e of i.streams||[])t.push(`a=msid:${e.stream} ${e.track}\r\n`);if(i.rtcpParameters&&(t.push(r.writeRtcpParameters(i.rtcpParameters)),i.rtcpParameters.cname&&i.rtpEncodingParameters&&i.rtpEncodingParameters[0].rtx)){const e=i.rtpEncodingParameters[0];t.push(`a=ssrc-group:FID ${e.ssrc} ${e.rtx.ssrc}\r\n`),t.push(`a=ssrc:${e.rtx.ssrc} cname:${i.rtcpParameters.cname}\r\n`)}}if(void 0!==i.mid&&t.push(`a=mid:${i.mid}\r\n`),i.iceParameters&&t.push(r.writeIceParameters({usernameFragment:i.iceParameters.usernameFragment,password:i.iceParameters.password})),i.dtlsParameters&&i.setup&&t.push(r.writeDtlsParameters(i.dtlsParameters,i.setup)),i.candidates&&i.candidates.length)for(const e of i.candidates)t.push(`a=${r.writeCandidate(e)}\r\n`)}return t.join("")}},7264:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.convertRequestToIntermediate=t.convertContentToIntermediate=t.convertIntermediateToRequest=t.convertIntermediateToTransport=t.convertCandidateToIntermediate=t.convertIntermediateToCandidate=t.convertIntermediateToApplication=void 0;const r=i(2768),n=i(6552);function s(e,t){const i=e.rtpParameters,s=e.rtcpParameters||{},a=e.rtpEncodingParameters||[];let o=!1;a&&a.length&&(o=!!a[0].ssrc);const l={applicationType:n.NS_JINGLE_RTP_1,codecs:[],headerExtensions:[],media:e.kind,rtcpMux:s.mux,rtcpReducedSize:s.reducedSize,sourceGroups:[],sources:[],ssrc:o?a[0].ssrc.toString():void 0,streams:[]};for(const e of i.headerExtensions||[]){const i={id:e.id,uri:e.uri};e.direction&&"sendrecv"!==e.direction&&(i.senders=(0,r.directionToSenders)(t,e.direction)),l.headerExtensions.push(i)}s.ssrc&&s.cname&&(l.sources=[{parameters:{cname:s.cname},ssrc:s.ssrc.toString()}]),o&&a[0]&&a[0].rtx&&(l.sourceGroups=[{semantics:"FID",sources:[a[0].ssrc.toString(),a[0].rtx.ssrc.toString()]}]);for(const t of e.streams||[])l.streams.push({id:t.stream,track:t.track});for(const e of i.codecs||[]){const t={channels:e.channels,clockRate:e.clockRate,id:e.payloadType.toString(),name:e.name,parameters:e.parameters,rtcpFeedback:e.rtcpFeedback};e.maxptime&&(t.maxptime=e.maxptime),e.parameters&&e.parameters.ptime&&(t.ptime=parseInt(e.parameters.ptime,10)),l.codecs.push(t)}return l}function a(e){let t;return t="rtp"===e.component?1:"rtcp"===e.component?2:e.component,{component:t,foundation:e.foundation,generation:void 0,id:void 0,ip:e.ip,network:void 0,port:e.port,priority:e.priority,protocol:e.protocol,relatedAddress:e.relatedAddress,relatedPort:e.relatedPort,tcpType:e.tcpType,type:e.type}}function o(e){return{address:e.ip,component:1===e.component?"rtp":2===e.component?"rtcp":e.component,foundation:e.foundation,ip:e.ip,port:e.port,priority:e.priority,protocol:e.protocol,relatedAddress:e.relatedAddress,relatedPort:e.relatedPort,tcpType:e.tcpType,type:e.type}}function l(e,t){const i=e.iceParameters,r=e.dtlsParameters,n={candidates:[],transportType:t};i&&(n.usernameFragment=i.usernameFragment,n.password=i.password,i.iceLite&&(n.iceLite=!0)),r&&(n.fingerprints=r.fingerprints.map((t=>({algorithm:t.algorithm,setup:e.setup,value:t.value})))),e.sctp&&(n.sctp=e.sctp);for(const t of e.candidates||[])n.candidates.push(a(t));return n}function c(e,t){const i=e.application||{},s=e.transport,a=i&&i.applicationType===n.NS_JINGLE_RTP_1,l={direction:(0,r.sendersToDirection)(t,e.senders),kind:i.media||"application",mid:e.name,protocol:a?"UDP/TLS/RTP/SAVPF":"UDP/DTLS/SCTP"};if(a){if(l.rtcpParameters={compound:!i.rtcpReducedSize,mux:i.rtcpMux,reducedSize:i.rtcpReducedSize},i.sources&&i.sources.length){const e=i.sources[0];l.rtcpParameters.ssrc=parseInt(e.ssrc,10),e.parameters&&(l.rtcpParameters.cname=e.parameters.cname)}if(l.rtpParameters={codecs:[],fecMechanisms:[],headerExtensions:[],rtcp:[]},i.streams){l.streams=[];for(const e of i.streams)l.streams.push({stream:e.id,track:e.track})}if(i.ssrc&&(l.rtpEncodingParameters=[{ssrc:parseInt(i.ssrc,10)}],i.sourceGroups&&i.sourceGroups.length)){const e=i.sourceGroups[0];l.rtpEncodingParameters[0].rtx={ssrc:parseInt(e.sources[1],10)}}let e=!1,n=!1;for(const t of i.codecs||[]){const i=t.parameters||{},r=[];for(const e of t.rtcpFeedback||[])r.push({parameter:e.parameter,type:e.type});if("red"===t.name||"ulpfec"===t.name){e=e||"red"===t.name,n=n||"ulpfec"===t.name;const i=t.name.toUpperCase();l.rtpParameters.fecMechanisms.includes(i)||l.rtpParameters.fecMechanisms.push(i)}l.rtpParameters.codecs.push({channels:t.channels,clockRate:t.clockRate,name:t.name,numChannels:t.channels,parameters:i,payloadType:parseInt(t.id,10),rtcpFeedback:r})}for(const e of i.headerExtensions||[])l.rtpParameters.headerExtensions.push({direction:(0,r.sendersToDirection)(t,e.senders||"both"),id:e.id,uri:e.uri,attributes:void 0})}if(s){if(s.usernameFragment&&s.password&&(l.iceParameters={password:s.password,usernameFragment:s.usernameFragment},s.iceLite&&(l.iceParameters.iceLite=!0)),s.fingerprints&&s.fingerprints.length){l.dtlsParameters={fingerprints:[],role:"auto"};for(const e of s.fingerprints)l.dtlsParameters.fingerprints.push({algorithm:e.algorithm,value:e.value});s.sctp&&(l.sctp=s.sctp),l.setup=s.fingerprints[0].setup}l.candidates=(s.candidates||[]).map(o)}return l}t.convertIntermediateToApplication=s,t.convertIntermediateToCandidate=a,t.convertCandidateToIntermediate=o,t.convertIntermediateToTransport=l,t.convertIntermediateToRequest=function(e,t,i){return{contents:e.media.map((e=>({application:"audio"===e.kind||"video"===e.kind?s(e,t):{applicationType:"datachannel",protocol:e.protocol},creator:r.JingleSessionRole.Initiator,name:e.mid,senders:(0,r.directionToSenders)(t,e.direction),transport:l(e,i)}))),groups:e.groups?e.groups.map((e=>({contents:e.mids,semantics:e.semantics}))):[]}},t.convertContentToIntermediate=c,t.convertRequestToIntermediate=function(e,t){const i={groups:[],media:[]};for(const t of e.groups||[])i.groups.push({mids:t.contents,semantics:t.semantics});for(const r of e.contents||[])i.media.push(c(r,t));return i}},5747:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.basicLanguageResolver=t.escapeXMLText=t.unescapeXML=t.escapeXML=void 0;const r=(0,i(7582).__importDefault)(i(7102)),n={'"':"&quot;","&":"&amp;","'":"&apos;","<":"&lt;",">":"&gt;"},s={"&amp;":"&","&apos;":"'","&gt;":">","&lt;":"<","&quot;":'"'},a=/&([a-zA-Z0-9]+|#[0-9]+|#x[0-9a-fA-F]+);/g,o=/&|<|>|"|'/g,l=/&|<|>/g;function c(e){return n[e]}t.escapeXML=function(e){return e.replace(o,c)},t.unescapeXML=function(e){return e.replace(a,(e=>function(e){if(s[e])return s[e];const t=e.startsWith("&#x"),i=parseInt(e.substring(t?3:2,e.length-1),t?16:10);if(9===i||10===i||13===i||32<=i&&i<=55295||57344<=i&&i<=65533||65536<=i&&i<=1114111)return String.fromCodePoint(i);throw r.default.restrictedXML("Prohibited entity: "+e)}(e)))},t.escapeXMLText=function(e){return e.replace(l,c)},t.basicLanguageResolver=function(e,t=[],i=""){const r=new Set(e.map((e=>e.toLowerCase())));for(let e of t.map((e=>e.toLowerCase())))if("*"!==e)for(;e.length>0;){if(r.has(e))return e;e=e.substring(0,e.lastIndexOf("-")).toLowerCase(),e.lastIndexOf("-")===e.length-2&&(e=e.substring(0,e.lastIndexOf("-")))}return i}},6556:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=i(5747);class n{constructor(e,t={},i=[]){this.name=e,this.attributes=t,this.children=[],this.optionalNamespaces={};for(const e of i)if("string"!=typeof e){const t=new n(e.name,e.attributes,e.children);t.parent=this,this.children.push(t)}else this.children.push(e)}getName(){return this.name.indexOf(":")>=0?this.name.substr(this.name.indexOf(":")+1):this.name}getNamespace(){if(this.name.indexOf(":")>=0){const e=this.name.substr(0,this.name.indexOf(":"));return this.findNamespaceForPrefix(e)}return this.findNamespaceForPrefix()}getNamespaceContext(){let e={};this.parent&&(e=this.parent.getNamespaceContext());for(const[t,i]of Object.entries(this.attributes))if(t.startsWith("xmlns:")){const r=t.substr(6);e[i]=r}return e}getDefaultNamespace(){return this.attributes.xmlns?this.attributes.xmlns:this.parent?this.parent.getDefaultNamespace():""}getNamespaceRoot(e){if(this.parent){const t=this.parent.getNamespaceRoot(e);if(t)return t}for(const[t,i]of Object.entries(this.attributes))if(t.startsWith("xmlns:")&&i===e)return this;if(this.optionalNamespaces[e])return this}getAttribute(e,t){if(!t)return this.attributes[e];const i=this.getNamespaceContext();return i[t]?this.attributes[[i[t],e].join(":")]:void 0}getChild(e,t){return this.getChildren(e,t)[0]}getChildren(e,t){const i=[];for(const r of this.children)"string"==typeof r||r.getName()!==e||t&&r.getNamespace()!==t||i.push(r);return i}getText(){let e="";for(const t of this.children)"string"==typeof t&&(e+=t);return e}appendChild(e){return this.children.push(e),"string"!=typeof e&&(e.parent=this),e}setAttribute(e,t,i=!1){this.attributes[e]=t||void 0,""===t&&i&&(this.attributes[e]=t)}addOptionalNamespace(e,t){this.optionalNamespaces[t]=e}useNamespace(e,t){return this.optionalNamespaces[t]&&(e=this.optionalNamespaces[t]),this.setAttribute(`xmlns:${e}`,t),e}toJSON(){const e=this.children.map((e=>"string"==typeof e?e:e?e.toJSON():void 0)).filter((e=>!!e)),t={};for(const[e,i]of Object.entries(this.attributes))null!=i&&(t[e]=i);return{attributes:t,children:e,name:this.name}}toString(){let e=this.openTag(!0);if(this.children.length){for(const t of this.children)"string"==typeof t?e+=(0,r.escapeXMLText)(t):t&&(e+=t.toString());e+=this.closeTag()}return e}openTag(e=!1){let t="";t+=`<${this.name}`;for(const[e,i]of Object.entries(this.attributes))void 0!==i&&(t+=` ${e}="${(0,r.escapeXML)(i.toString())}"`);return e&&0===this.children.length?t+="/>":t+=">",t}closeTag(){return`</${this.name}>`}findNamespaceForPrefix(e){if(e){const t="xmlns:"+e;if(this.attributes[t])return this.attributes[t];if(this.parent)return this.parent.findNamespaceForPrefix(e)}else{if(this.attributes.xmlns)return this.attributes.xmlns;if(this.parent)return this.parent.findNamespaceForPrefix()}return""}}t.default=n},7102:(e,t)=>{var i;Object.defineProperty(t,"__esModule",{value:!0}),t.JXTErrorCondition=void 0,function(e){e.NotWellFormed="not-well-formed",e.RestrictedXML="restricted-xml",e.AlreadyClosed="already-closed",e.UnknownRoot="unknown-stream-root"}(i=t.JXTErrorCondition||(t.JXTErrorCondition={}));class r extends Error{constructor(e){super(e.text),this.isJXTError=!0,this.condition=e.condition,this.text=e.text}static notWellFormed(e){return new r({condition:i.NotWellFormed,text:e})}static restrictedXML(e){return new r({condition:i.RestrictedXML,text:e})}static alreadyClosed(e){return new r({condition:i.AlreadyClosed,text:e})}static unknownRoot(e){return new r({condition:i.UnknownRoot,text:e})}}t.default=r},1030:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.pubsubItemContentAliases=t.extendStanzaError=t.extendStreamFeatures=t.extendIQ=t.extendPresence=t.extendMessage=t.addAlias=t.childJID=t.childJIDAttribute=t.JIDAttribute=void 0;const r=i(6552),n=i(3276);t.JIDAttribute=n.attribute,t.childJIDAttribute=n.childAttribute,t.childJID=n.childText,t.addAlias=function(e,t,i){return{aliases:Array.isArray(i)?i:[i],element:t,fields:{},namespace:e}},t.extendMessage=function(e){return{element:"message",fields:e,namespace:r.NS_CLIENT}},t.extendPresence=function(e){return{element:"presence",fields:e,namespace:r.NS_CLIENT}},t.extendIQ=function(e){return{element:"iq",fields:e,namespace:r.NS_CLIENT}},t.extendStreamFeatures=function(e){return{element:"features",fields:e,namespace:r.NS_STREAM}},t.extendStanzaError=function(e){return{element:"error",fields:e,namespace:r.NS_STANZAS,path:"stanzaError"}},t.pubsubItemContentAliases=function(){return[{path:"pubsubcontent",contextField:"itemType"},{path:"pubsubitem.content",contextField:"itemType"},{path:"pubsubeventitem.content",contextField:"itemType"},{path:"iq.pubsub.publish.items",contextField:"itemType"}]}},4374:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.parse=void 0;const r=i(7582),n=i(7187),s=i(5747),a=(0,r.__importDefault)(i(6556)),o=(0,r.__importDefault)(i(7102));function l(e){return 97<=e&&e<=122||65<=e&&e<=90||58===e||95===e}function c(e){return 192<=e&&e<=214||216<=e&&e<=246||248<=e&&e<=767||880<=e&&e<=893||895<=e&&e<=8191||8204<=e&&e<=8205||8304<=e&&e<=8591||11264<=e&&e<=12271||12289<=e&&e<=55295||65008<=e&&e<=65533||65536<=e&&e<=983039}function u(e){return l(e)||c(e)}function p(e){return l(e)||45===e||46===e||48<=e&&e<=57||183===e||768<=e&&e<=879||8255<=e&&e<=8256||c(e)}function d(e){return 32===e||10===e||13===e||9===e}class h extends n.EventEmitter{constructor(e={}){super(),this.allowComments=!0,this.attributes={},this.state=34,this.tagName="",this.haveDeclaration=!1,this.recordBuffer=[],void 0!==e.allowComments&&(this.allowComments=e.allowComments)}write(e){for(const t of e){const e=t.codePointAt(0);switch(this.state){case 34:if(60===e){let e;try{e=(0,s.unescapeXML)(this.endRecord())}catch(e){return void this.emit("error",e)}e&&this.emit("text",e),this.transition(31);continue}this.record(t);continue;case 31:if(47===e){this.transition(7);continue}if(33===e){this.transition(24);continue}if(63===e){if(this.haveDeclaration)return this.restrictedXML();this.transition(25);continue}if(u(e)){this.transition(30),this.startRecord(t);continue}return this.notWellFormed();case 30:if(p(e)){this.record(t);continue}if(d(e)){this.startTag(),this.transition(32);continue}if(47===e){this.startTag(),this.transition(29);continue}if(62===e){this.startTag(),this.transition(34),this.emit("startElement",this.tagName,this.attributes);continue}return this.notWellFormed();case 29:if(62===e){this.emit("startElement",this.tagName,this.attributes),this.emit("endElement",this.tagName),this.transition(34);continue}return this.notWellFormed();case 33:if(d(e)){this.transition(32);continue}if(47===e){this.transition(29);continue}if(62===e){this.emit("startElement",this.tagName,this.attributes),this.transition(34);continue}return this.notWellFormed();case 32:if(d(e))continue;if(u(e)){this.startRecord(t),this.transition(0);continue}if(47===e){this.transition(29);continue}if(62===e){this.emit("startElement",this.tagName,this.attributes),this.transition(34);continue}return this.notWellFormed();case 7:if(u(e)){this.startRecord(t),this.transition(6);continue}return this.notWellFormed();case 6:if(p(e)){this.record(t);continue}if(d(e)){this.transition(8);continue}if(62===e){const e=this.endRecord();this.emit("endElement",e,this.attributes),this.transition(34);continue}return this.notWellFormed();case 8:if(d(e))continue;if(62===e){const e=this.endRecord();this.emit("endElement",e,this.attributes),this.transition(34);continue}return this.notWellFormed();case 0:if(p(e)){this.record(t);continue}if(61===e){this.addAttribute(),this.transition(4);continue}if(d(e)){this.addAttribute(),this.transition(3);continue}return this.notWellFormed();case 3:if(61===e){this.transition(4);continue}if(d(e))continue;return this.notWellFormed();case 4:if(34===e){this.startRecord(),this.transition(1);continue}if(39===e){this.startRecord(),this.transition(2);continue}if(d(e))continue;return this.notWellFormed();case 1:case 2:if(34===e&&1===this.state||39===e&&2===this.state){const e=this.endRecord();this.attributes[this.attributeName]=(0,s.unescapeXML)(e),this.transition(33);continue}if(60===e)return this.notWellFormed();this.record(t);continue;case 24:if(45===e){if(!this.allowComments)return this.restrictedXML();this.transition(23);continue}if(91===e){this.transition(21);continue}return this.notWellFormed();case 23:if(45===e){this.transition(14);continue}return this.notWellFormed();case 14:45===e&&this.transition(12);continue;case 12:45===e?this.transition(11):this.transition(14);continue;case 11:62===e?this.transition(34):this.transition(14);continue;case 25:if(88===e||120===e){this.transition(28);continue}return this.notWellFormed();case 28:if(77===e||109===e){this.transition(27);continue}return this.notWellFormed();case 27:if(76===e||108===e){this.transition(26);continue}return this.notWellFormed();case 26:if(d(e)){this.haveDeclaration=!0,this.transition(15);continue}return this.notWellFormed();case 13:if(62===e){this.transition(34);continue}return this.notWellFormed();case 15:63===e&&this.transition(13);continue;case 21:this.wait(e,67,20);continue;case 20:this.wait(e,68,19);continue;case 19:this.wait(e,65,18);continue;case 18:this.wait(e,84,17);continue;case 17:this.wait(e,65,16);continue;case 16:this.wait(e,91,5);continue;case 5:if(93===e){this.transition(10);continue}this.record(t);continue;case 10:93===e?this.transition(9):(this.record(String.fromCodePoint(93)),this.record(t),this.transition(5));continue;case 9:if(62===e){const e=this.endRecord();e&&this.emit("text",e),this.transition(34)}else this.record(String.fromCodePoint(93)),this.record(String.fromCodePoint(93)),this.record(t),this.transition(5);continue}}}end(e){e&&this.write(e),this.write=()=>{}}record(e){this.recordBuffer.push(e)}startRecord(e){this.recordBuffer=[],e&&this.recordBuffer.push(e)}endRecord(){const e=this.recordBuffer;return this.recordBuffer=[],e.join("")}startTag(){this.tagName=this.endRecord(),this.attributes={}}addAttribute(){const e=this.endRecord();if(void 0!==this.attributes[e])return this.notWellFormed();this.attributeName=e,this.attributes[e]=""}wait(e,t,i){if(e!==t)return this.notWellFormed();this.transition(i)}transition(e){this.state=e,34===e&&this.startRecord()}notWellFormed(e){this.emit("error",o.default.notWellFormed(e))}restrictedXML(e){this.emit("error",o.default.restrictedXML(e))}}t.parse=function(e,t={}){const i=new h(t);let r,n,s=null;if(i.on("text",(e=>{n&&n.children.push(e)})),i.on("startElement",((e,t)=>{const i=new a.default(e,t);r||(r=i),n=n?n.appendChild(i):i})),i.on("endElement",(e=>{n?e===n.name?n.parent&&(n=n.parent):i.emit("error",o.default.notWellFormed("b")):i.emit("error",o.default.notWellFormed("a"))})),i.on("error",(e=>{s=e})),i.write(e),i.end(),s)throw s;return r},t.default=h},604:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=i(7582),n=i(5747),s=(0,r.__importDefault)(i(4057)),a=(0,r.__importDefault)(i(5937));t.default=class{constructor(){this.translators=new Map,this.root=new a.default,this.setLanguageResolver(n.basicLanguageResolver)}setLanguageResolver(e){this.languageResolver=e}import(e,t={registry:this}){if(this.hasTranslator(e.getNamespace(),e.getName()))return t.acceptLanguages||(t.acceptLanguages=[]),t.acceptLanguages=t.acceptLanguages.map((e=>e.toLowerCase())),t.lang&&(t.lang=t.lang.toLowerCase()),t.resolveLanguage||(t.resolveLanguage=this.languageResolver),t.path=this.getImportKey(e),t.sanitizers||(t.sanitizers={xhtmlim:s.default}),this.getOrCreateTranslator(e.getNamespace(),e.getName()).import(e,{...t,registry:this})}export(e,t,i={registry:this}){i.acceptLanguages||(i.acceptLanguages=[]),i.acceptLanguages=i.acceptLanguages.map((e=>e.toLowerCase())),i.lang&&(i.lang=i.lang.toLowerCase()),i.sanitizers||(i.sanitizers={xhtmlim:s.default}),i.path=e;const r=e.split(".").filter((e=>""!==e));let n=this.root;for(const e of r){const t=n.getChild(e);if(!t)return;n=t}return n.export(t,{...i,registry:this})}getImportKey(e,t=""){const i=t?this.walkToTranslator(t.split(".")):this.root;if(i)return i.getImportKey(e)}define(e){if(Array.isArray(e)){for(const t of e)"object"==typeof t?this.define(t):t(this);return}if("object"!=typeof e)return void e(this);const t=e;t.aliases=t.aliases||[],t.path&&!t.aliases.includes(t.path)&&t.aliases.push(t.path);const i=t.aliases.map((e=>"string"==typeof e?{path:e}:e)).sort(((e,t)=>{const i=e.path.split(".").length;return t.path.split(".").length-i}));let r;if(this.hasTranslator(t.namespace,t.element)&&(r=this.getOrCreateTranslator(t.namespace,t.element)),!r){let e;for(const t of i){const i=this.walkToTranslator(t.path.split("."));if(i&&!i.placeholder){r=i;break}i&&(e=i)}e&&!r&&(r=e,r.placeholder=!1)}r||(r=this.getOrCreateTranslator(t.namespace,t.element)),this.indexTranslator(t.namespace,t.element,r);const n=t.fields||{},s=new Map,a=new Map,o=new Map,l=new Map;t.typeField&&(r.typeField=t.typeField),t.defaultType&&(r.defaultType=t.defaultType),t.versionField&&(r.versionField=t.versionField),t.defaultVersion&&(r.defaultVersion=t.defaultVersion),t.languageField&&(r.languageField=t.languageField);for(const[e,t]of Object.entries(n))s.set(e,t.importer),o.set(e,t.importOrder||t.order||0),a.set(e,t.exporter),l.set(e,t.exportOrder||t.order||0);if(t.childrenExportOrder)for(const[e,i]of Object.entries(t.childrenExportOrder))l.set(e,i||0);const c=new Map;for(const[e,i]of Object.entries(t.optionalNamespaces||{}))c.set(e,i);r.updateDefinition({contexts:new Map,element:t.element,exporterOrdering:l,exporters:a,importerOrdering:o,importers:s,namespace:t.namespace,optionalNamespaces:c,type:t.type,version:t.version,typeOrder:t.typeOrder});for(const e of i)this.alias(t.namespace,t.element,e.path,e.multiple,e.selector,e.contextField,t.type,e.impliedType);for(const e of i){const t=this.walkToTranslator(e.path.split("."));t&&t!==r&&t.replaceWith(r)}}alias(e,t,i,r=!1,n,s,a,o=!1){const l=this.getOrCreateTranslator(e,t);l.placeholder=!1;const c=i.split(".").filter((e=>""!==e)),u=c.pop(),p=this.walkToTranslator(c,!0),d=`{${e}}${t}`;a&&(s||o)&&l.addContext(i,n,s,d,a,o),p.addChild(u,l,r,n,d)}walkToTranslator(e,t=!1){let i=this.root;for(const r of e){let e=i.getChild(r);if(!e){if(!t)return;e=new a.default,e.placeholder=!0,i.addChild(r,e)}i=e}return i}hasTranslator(e,t){return this.translators.has(`{${e}}${t}`)}getOrCreateTranslator(e,t){let i=this.translators.get(`{${e}}${t}`);return i||(i=new a.default,this.indexTranslator(e,t,i)),i}indexTranslator(e,t,i){this.translators.set(`{${e}}${t}`,i)}}},4901:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=i(7582),n=i(4142),s=(0,r.__importDefault)(i(6556)),a=(0,r.__importDefault)(i(7102)),o=(0,r.__importDefault)(i(4374));class l extends n.Transform{constructor(e){super({objectMode:!0}),this.closedStream=!1,this.wrappedStream=!1,this.registry=e.registry,this.acceptLanguages=e.acceptLanguages||[],e.wrappedStream&&(this.wrappedStream=!0,this.rootImportKey=e.rootKey),this.parser=new o.default({allowComments:e.allowComments}),this.parser.on("error",(e=>{this.destroy(e)})),this.parser.on("startElement",((e,t)=>{if(this.destroyed)return;if(this.closedStream)return this.destroy(a.default.alreadyClosed());const i=new s.default(e,t),r=this.registry.getImportKey(i);if(this.wrappedStream&&!this.rootElement){if(this.rootImportKey&&r!==this.rootImportKey)return this.destroy(a.default.unknownRoot());const e=this.registry.import(i,{acceptLanguages:this.acceptLanguages,lang:this.lang});return e?(this.rootElement=i,void this.push({event:"stream-start",kind:r,stanza:e,xml:i})):this.destroy(a.default.notWellFormed())}this.currentElement?this.currentElement=this.currentElement.appendChild(i):this.currentElement=i})),this.parser.on("endElement",(e=>{if(!this.destroyed){if(this.wrappedStream&&!this.currentElement)return this.rootElement&&e===this.rootElement.name?(this.closedStream=!0,this.push({event:"stream-end",kind:this.rootImportKey,stanza:{},xml:this.rootElement}),this.end()):(this.closedStream=!0,this.destroy(a.default.notWellFormed()));if(!this.currentElement||e!==this.currentElement.name)return this.closedStream=!0,this.destroy(a.default.notWellFormed());if(this.currentElement.parent)this.currentElement=this.currentElement.parent;else{this.wrappedStream&&(this.currentElement.parent=this.rootElement);const e=this.registry.getImportKey(this.currentElement),t=this.registry.import(this.currentElement,{acceptLanguages:this.acceptLanguages,lang:this.lang});t&&this.push({kind:e,stanza:t,xml:this.currentElement}),this.currentElement=void 0}}})),this.parser.on("text",(e=>{this.currentElement&&this.currentElement.children.push(e)}))}_transform(e,t,i){this.parser.write(e.toString()),i()}}t.default=l},5937:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=i(3276);t.default=class{constructor(){this.parents=new Set,this.placeholder=!1,this.typeField="",this.versionField="",this.defaultType="",this.defaultVersion="",this.languageField="lang",this.typeValues=new Map,this.typeOrders=new Map,this.importers=new Map,this.exporters=new Map,this.children=new Map,this.childrenIndex=new Map,this.implicitChildren=new Set,this.contexts=new Map}addChild(e,t,i=!1,r,n){const s={multiple:i||!1,name:e,selector:r,translator:t},a=this.children.get(e);if(!a){s.translator.parents.add(this),this.children.set(e,s);for(const[i]of t.importers)this.implicitChildren.has(i)||this.childrenIndex.set(i,e);return void(n&&this.implicitChildren.add(n))}const o=a.translator;a.multiple=i,r&&a.selector&&r!==a.selector&&(a.selector=void 0);for(const[i,r]of t.importers){const[n,s]=(o.typeValues.get(i)||"").split("__v__");o.updateDefinition({contexts:t.contexts,element:r.element,exporterOrdering:new Map,exporters:new Map,importerOrdering:r.fieldOrders,importers:r.fields,namespace:r.namespace,optionalNamespaces:new Map,type:n,version:s}),this.implicitChildren.has(i)||this.childrenIndex.set(i,e)}for(const[e,i]of t.exporters){const[r,n]=e.split("__v__");o.updateDefinition({contexts:t.contexts,element:i.element,exporterOrdering:i.fieldOrders,exporters:i.fields,importerOrdering:new Map,importers:new Map,namespace:i.namespace,optionalNamespaces:i.optionalNamespaces,type:r,version:n})}}addContext(e,t,i,r,n,s){t&&(e=`${e}[${t}]`);let a=this.contexts.get(e);a||(a={typeField:"",versionField:"",typeValues:new Map}),s&&(a.impliedType=n),a.typeField=i||"",a.typeValues.set(r,n),this.contexts.set(e,a)}getChild(e){const t=this.children.get(e);if(t)return t.translator}getImportKey(e){return this.childrenIndex.get(`{${e.getNamespace()}}${e.getName()}`)}updateDefinition(e){const t=`{${e.namespace}}${e.element}`,i=e.type||this.defaultType,r=e.version||this.defaultVersion,n=r?`${i}__v__${r}`:i,s=this.importers.get(t)||{element:e.element,fieldOrders:new Map,fields:new Map,namespace:e.namespace};for(const[t,i]of e.importers)s.fields.set(t,i);for(const[t,i]of e.importerOrdering)s.fieldOrders.set(t,i);this.importers.set(t,s);const a=this.exporters.get(n)||{element:e.element,fieldOrders:new Map,fields:new Map,namespace:e.namespace,optionalNamespaces:e.optionalNamespaces};for(const[t,i]of e.exporters)a.fields.set(t,i);for(const[t,i]of e.exporterOrdering)a.fieldOrders.set(t,i);for(const[t,i]of e.optionalNamespaces)a.optionalNamespaces.set(t,i);this.exporters.set(n,a);for(const[t,i]of e.contexts){const e=this.contexts.get(t)||{impliedType:void 0,typeField:i.typeField,versionField:i.versionField,typeValues:new Map};e.typeField||(e.typeField=i.typeField),e.versionField||(e.versionField=i.versionField),e.impliedType||(e.impliedType=i.impliedType);for(const[t,r]of i.typeValues)e.typeValues.set(t,r);this.contexts.set(t,e)}if(e.type)this.typeValues.set(t,n),e.typeOrder&&e.type&&this.typeOrders.set(e.type,e.typeOrder);else if(this.typeField&&!e.type){for(const[,t]of this.importers){for(const[i,r]of e.importers)t.fields.set(i,r);for(const[i,r]of e.importerOrdering)t.fieldOrders.set(i,r)}for(const[,t]of this.exporters){for(const[i,r]of e.exporters)t.fields.set(i,r);for(const[i,r]of e.exporterOrdering)t.fieldOrders.set(i,r)}}}replaceWith(e){for(const[t,i]of this.children)e.children.set(t,i);for(const[t,i]of this.childrenIndex)e.childrenIndex.set(t,i);for(const[t,i]of this.contexts)e.contexts.set(t,i);for(const t of this.implicitChildren)e.implicitChildren.add(t);for(const t of this.parents)for(const i of t.children.values())i.translator===this&&(i.translator=e);this.parents=new Set}import(e,t){const i=`{${e.getNamespace()}}${e.getName()}`,r={},n=this.importers.get(i);if(!n)return;const s=this.typeValues.get(i)||"",[a,o]=s.split("__v__"),l=t.path||"";let c;if(t.pathSelector&&(c=this.contexts.get(`${l}[${t.pathSelector}]`)),c||(c=this.contexts.get(l)),c){if(!c.impliedType){const e=c.typeValues.get(i)||"";e&&(r[c.typeField]=e)}}else this.typeField&&a&&a!==this.defaultType&&(r[this.typeField]=a);this.versionField&&o&&o!==this.defaultVersion&&(r[this.versionField]=o);const u={...t,data:r,importer:n,lang:(e.getAttribute("xml:lang")||t.lang||"").toLowerCase(),pathSelector:a,translator:this},p=[...n.fieldOrders.entries()].sort(((e,t)=>e[1]>t[1]?-1:e[1]<t[1]?1:0)),d=p.filter((e=>e[1]>=0)),h=p.filter((e=>e[1]<0));for(const[i]of d){const s=n.fields.get(i);u.path=`${t.path}.${i}`;const a=s(e,u);null!=a&&(r[i]=a)}for(const i of e.children){if("string"==typeof i)continue;const e=`{${i.getNamespace()}}${i.getName()}`,n=this.childrenIndex.get(e);if(!n)continue;u.path=`${t.path}.${n}`;const{translator:s,multiple:o,selector:l}=this.children.get(n);if(!l||l===a){const e=s.import(i,u);void 0!==e&&(o?(r[n]||(r[n]=[]),r[n].push(e)):r[n]?r[n]=s.resolveCollision(r[n],e):r[n]=e)}}for(const[i]of h){const s=n.fields.get(i);u.path=`${t.path}.${i}`;const a=s(e,u);null!=a&&(r[i]=a)}return r}export(e,t){if(!e)return;let i=this.defaultType,n=this.defaultVersion;const s=t.path||"";let a;t.pathSelector&&(a=this.contexts.get(`${s}[${t.pathSelector}]`)),a||(a=this.contexts.get(s)),a?i=a.impliedType||e[a.typeField]||this.defaultType:this.typeField&&(i=e[this.typeField]||this.defaultType),this.versionField&&(n=e[this.versionField]||this.defaultVersion);const o=n?`${i}__v__${n}`:i,l=this.exporters.get(o);if(!l)return;const c=(0,r.createElement)(l.namespace,l.element,t.namespace,t.element);t.element&&(c.parent=t.element);for(const[e,t]of l.optionalNamespaces)c.addOptionalNamespace(e,t);const u={...t,data:e,element:c,exporter:l,lang:(e[this.languageField]||t.lang||"").toLowerCase(),namespace:c.getDefaultNamespace(),pathSelector:i,translator:this},p=l.fields.get(this.languageField);p&&p(c,e[this.languageField],t);const d=Object.keys(e);d.sort(((e,t)=>(l.fieldOrders.get(e)||1e5)-(l.fieldOrders.get(t)||1e5)));for(const r of d){if(r===this.languageField)continue;const n=e[r],s=l.fields.get(r);if(s){s(c,n,u);continue}const a=this.children.get(r);if(!a)continue;u.path=`${t.path?t.path+".":""}${r}`;const{translator:o,multiple:p,selector:d}=a;if(!d||d===i){let e;e=p?null!=n?n:[]:[n];for(const t of e){const e=o.export(t,u);e&&c.appendChild(e)}}}return c}resolveCollision(e,t){return(this.typeOrders.get(e[this.typeField]||this.defaultType)||0)<=(this.typeOrders.get(t[this.typeField]||this.defaultType)||0)?e:t}}},3276:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.childAlternateLanguageRawElement=t.childLanguageRawElement=t.childRawElement=t.staticValue=t.splicePath=t.multipleChildEnum=t.multipleChildAlternateLanguageText=t.childAlternateLanguageText=t.multipleChildIntegerAttribute=t.multipleChildAttribute=t.multipleChildText=t.childDoubleEnum=t.childEnum=t.deepMultipleChildText=t.deepChildBoolean=t.deepChildInteger=t.deepChildText=t.childBoolean=t.childTimezoneOffset=t.childJSON=t.childFloat=t.childInteger=t.childDate=t.childTextBuffer=t.childText=t.childLanguageAttribute=t.languageAttribute=t.textBuffer=t.textJSON=t.text=t.childDateAttribute=t.childFloatAttribute=t.childIntegerAttribute=t.childBooleanAttribute=t.childAttribute=t.namespacedDateAttribute=t.namespacedFloatAttribute=t.namespacedIntegerAttribute=t.namespacedBooleanAttribute=t.namespacedAttribute=t.dateAttribute=t.floatAttribute=t.integerAttribute=t.booleanAttribute=t.attribute=t.findOrCreate=t.findAll=t.getTargetLang=t.getLang=t.createElement=void 0,t.parameterMap=void 0;const r=i(7582),n=i(4142),s=(0,r.__importDefault)(i(6556)),a=i(4374);function o(e,t,i,r){if(r){e=e||r.getNamespace();const i=r.getNamespaceRoot(e);i&&(t=`${i.useNamespace("",e)}:${t}`)}const n=new s.default(t);return t.indexOf(":")<0&&(!i||e!==i)&&n.setAttribute("xmlns",e),n}function l(e,t){return(e.getAttribute("xml:lang")||t||"").toLowerCase()}function c(e,t){const i=[];for(const r of e)i.push(l(r,t.lang));let r;return r=t.resolveLanguage?t.resolveLanguage(i,t.acceptLanguages||[],t.lang):t.lang,r||""}function u(e,t,i,r){const n=e.getChildren(i,t),s=l(e);return n.length?r?n.filter((e=>{if(l(e,s)===r)return!0})):n:[]}function p(e,t,i,r){t=t||e.getNamespace();const n=u(e,t,i,r);if(n.length)return n[0];const s=o(t,i,e.getDefaultNamespace(),e),a=l(e,r);return r&&a!==r&&s.setAttribute("xml:lang",r),e.appendChild(s),s}function d(e){return{importer(t){const i=t.getAttribute(e.name,e.namespace);return i?e.parseValue(i):e.dynamicDefault?e.dynamicDefault(i):e.staticDefault},exporter(t,i){if(void 0===i||i===e.staticDefault)return;const r=e.writeValue(i);if(r||e.emitEmpty)if(e.namespace&&e.prefix){let i;const n=t.getNamespaceRoot(e.namespace);if(n)i=n.useNamespace(e.prefix,e.namespace);else{const r=t.getNamespaceContext();r[e.namespace]||(i=t.useNamespace(e.prefix,e.namespace),r[e.namespace]=i)}t.setAttribute(`${i}:${e.name}`,r,e.emitEmpty)}else t.setAttribute(e.name,r,e.emitEmpty)}}}function h(e,t){return(i,r=void 0,n={})=>(n={staticDefault:r,...n},d({name:i,...e,...t?t(n):n}))}function f(e,t){return(i,r,n,s=void 0,a={})=>(a={staticDefault:s,...a},d({name:n,namespace:r,prefix:i,...e,...t?t(a):a}))}function m(e){const t=e.converter||d({...e,namespace:e.attributeNamespace});return{importer(i,r){const n=i.getChild(e.element,e.namespace||i.getNamespace());return n?t.importer(n,r):e.dynamicDefault?e.dynamicDefault():e.staticDefault},exporter(i,r,n){if(void 0!==r&&r!==e.staticDefault){const s=p(i,e.namespace||i.getNamespace(),e.element);t.exporter(s,r,n)}}}}function g(e,t){return(i,r,n,s=void 0,a={})=>(a={staticDefault:s,...a},m({element:r,name:n,namespace:i,...e,...t?t(a):a}))}function _(e){return{importer(t){const i=t.getText();return i?e.parseValue(i):e.dynamicDefault?e.dynamicDefault(i):e.staticDefault},exporter(t,i){if(!i&&e.emitEmpty)return void t.children.push("");if(void 0===i||i===e.staticDefault)return;const r=e.writeValue(i);r&&t.children.push(r)}}}function b(e){const t=_(e);return{importer(i,r){const n=u(i,e.namespace||i.getNamespace(),e.element),s=c(n,r);if(!n.length)return e.dynamicDefault?e.dynamicDefault():e.staticDefault;if(e.matchLanguage)for(const e of n)if(l(e,r.lang)===s)return t.importer(e,r);return t.importer(n[0],r)},exporter(i,r,n){if(r||!e.emitEmpty){if(void 0!==r&&r!==e.staticDefault){const s=p(i,e.namespace||i.getNamespace(),e.element,e.matchLanguage?n.lang:void 0);t.exporter(s,r,n)}}else p(i,e.namespace||i.getNamespace(),e.element,e.matchLanguage?n.lang:void 0)}}}t.createElement=o,t.getLang=l,t.getTargetLang=c,t.findAll=u,t.findOrCreate=p;const y={parseValue:e=>e,writeValue:e=>e},S={parseValue:e=>parseInt(e,10),writeValue:e=>e.toString()},v={parseValue:e=>parseFloat(e),writeValue:e=>e.toString()},N={parseValue:e=>"true"===e||"1"===e||"false"!==e&&"0"!==e&&void 0,writeValue:e=>e?"1":"0"},T={parseValue:e=>new Date(e),writeValue:e=>"string"==typeof e?e:e.toISOString()},A={parseValue:e=>JSON.parse(e),writeValue:e=>JSON.stringify(e)},E=(e="utf8")=>({parseValue:t=>("base64"===e&&"="===t&&(t=""),n.Buffer.from(t.trim(),e)),writeValue:t=>{let i;return i="string"==typeof t?n.Buffer.from(t).toString(e):t?t.toString(e):"","base64"===e&&(i=i||"="),i}}),w={parseValue:e=>{let t=-1;"-"===e.charAt(0)&&(t=1,e=e.slice(1));const i=e.split(":");return(60*parseInt(i[0],10)+parseInt(i[1],10))*t},writeValue:e=>{if("string"==typeof e)return e;{let t="-";e<0&&(e=-e,t="+");const i=e/60,r=e%60;return t+=(i<10?"0":"")+i+":"+(r<10?"0":"")+r,t}}};function I(){return{importer:(e,t)=>l(e,t.lang),exporter(e,t,i){t&&t.toLowerCase()!==i.lang?e.setAttribute("xml:lang",t):e.setAttribute("xml:lang",void 0)}}}t.attribute=h(y,(e=>({dynamicDefault:e.emitEmpty?t=>""===t?"":e.staticDefault:void 0,...e}))),t.booleanAttribute=h(N),t.integerAttribute=h(S),t.floatAttribute=h(v),t.dateAttribute=h(T),t.namespacedAttribute=f(y),t.namespacedBooleanAttribute=f(N),t.namespacedIntegerAttribute=f(S),t.namespacedFloatAttribute=f(v),t.namespacedDateAttribute=f(T),t.childAttribute=g(y),t.childBooleanAttribute=g(N),t.childIntegerAttribute=g(S),t.childFloatAttribute=g(v),t.childDateAttribute=g(T),t.text=e=>_({staticDefault:e,...y}),t.textJSON=()=>_({...A}),t.textBuffer=(e="utf8")=>_({...E(e)}),t.languageAttribute=I,t.childLanguageAttribute=(e,t)=>m({converter:I(),element:t,name:"xml:lang",namespace:e,...y}),t.childText=(e,t,i,r=!1)=>b({element:t,emitEmpty:r,matchLanguage:!0,namespace:e,staticDefault:i,...y}),t.childTextBuffer=(e,t,i="utf8")=>b({element:t,matchLanguage:!0,namespace:e,...E(i)}),t.childDate=(e,t)=>b({element:t,namespace:e,...T}),t.childInteger=(e,t,i)=>b({element:t,namespace:e,staticDefault:i,...S}),t.childFloat=(e,t,i)=>b({element:t,namespace:e,staticDefault:i,...v}),t.childJSON=(e,t)=>b({element:t,namespace:e,...A}),t.childTimezoneOffset=function(e,t){return b({element:t,namespace:e,staticDefault:0,...w})},t.childBoolean=function(e,t){return{importer(i){if(i.getChild(t,e||i.getNamespace()))return!0},exporter(i,r){r&&p(i,e||i.getNamespace(),t)}}};const x=(e,t,i)=>{if(!i)return;let r=t;for(const t of e)r=p(r,t.namespace||r.getNamespace(),t.element);r.children.push(i.toString())};t.deepChildText=function(e,t){return{importer(i){let r=i;for(const i of e)if(r=r.getChild(i.element,i.namespace||r.getNamespace()),!r)return t;return r.getText()||t},exporter(t,i){x(e,t,i)}}},t.deepChildInteger=function(e,t){return{importer(i){let r=i;for(const t of e)if(r=r.getChild(t.element,t.namespace||r.getNamespace()),!r)return;const n=r.getText();return n?parseInt(n,10):t||void 0},exporter(t,i){x(e,t,i)}}},t.deepChildBoolean=function(e){return{importer(t){let i=t;for(const t of e)if(i=i.getChild(t.element,t.namespace||i.getNamespace()),!i)return!1;return!0},exporter(t,i){if(!i)return;let r=t;for(const t of e)r=p(r,t.namespace||r.getNamespace(),t.element)}}},t.deepMultipleChildText=function(e){const t=e.pop();return{importer(i,r){let n=i;for(const t of e)if(n=n.getChild(t.element,t.namespace||n.getNamespace()),!n)return[];const s=[],a=u(n,t.namespace||n.getNamespace(),t.element),o=c(a,r);for(const e of a)l(e,r.lang)===o&&s.push(e.getText());return s},exporter(i,r,n){if(!r.length)return;let s=i;for(const t of e)s=p(s,t.namespace||s.getNamespace(),t.element);const{namespace:a,element:l}=t;for(const e of r){const t=o(a||s.getNamespace(),l,n.namespace,s);t.children.push(e),s.appendChild(t)}}}},t.childEnum=function(e,t,i){const r=new Map,n=new Map;for(const e of t)"string"==typeof e?(r.set(e,e),n.set(e,e)):(r.set(e[1],e[0]),n.set(e[0],e[1]));return{importer(t){for(const i of t.children)if("string"!=typeof i&&i.getNamespace()===(e||t.getNamespace())&&r.has(i.getName()))return r.get(i.getName());return i},exporter(t,i){n.has(i)&&p(t,e,n.get(i))}}},t.childDoubleEnum=function(e,t,i,r){const n=new Set(t),s=new Set(i);return{importer(t){for(const i of t.children)if("string"!=typeof i&&i.getNamespace()===(e||t.getNamespace())&&n.has(i.getName())){for(const r of i.children)if("string"!=typeof r&&r.getNamespace()===(e||t.getNamespace())&&s.has(r.getName()))return[i.getName(),r.getName()];return[i.getName()]}return r},exporter(t,i){const r=p(t,e,i[0]);i[1]&&p(r,e,i[1])}}},t.multipleChildText=function(e,t){return{importer(i,r){const n=[],s=u(i,e||i.getNamespace(),t),a=c(s,r);for(const e of s)l(e,r.lang)===a&&n.push(e.getText());return n},exporter(i,r,n){for(const s of r){const r=o(e||i.getNamespace(),t,n.namespace,i);r.children.push(s),i.appendChild(r)}}}},t.multipleChildAttribute=function(e,t,i){return{importer(r){const n=[],s=r.getChildren(t,e||r.getNamespace());for(const e of s){const t=e.getAttribute(i);void 0!==t&&n.push(t)}return n},exporter(r,n,s){for(const a of n){const n=o(e||r.getNamespace(),t,s.namespace,r);n.setAttribute(i,a),r.appendChild(n)}}}},t.multipleChildIntegerAttribute=function(e,t,i){return{importer(r){const n=[],s=r.getChildren(t,e||r.getNamespace());for(const e of s){const t=e.getAttribute(i);void 0!==t&&n.push(parseInt(t,10))}return n},exporter(r,n,s){for(const a of n){const n=o(e||r.getNamespace(),t,s.namespace,r);n.setAttribute(i,a.toString()),r.appendChild(n)}}}},t.childAlternateLanguageText=function(e,t){return{importer(i,r){const n=[],s=u(i,e||i.getNamespace(),t),a=new Set;for(const e of s){const t=e.getText();if(t){const i=l(e,r.lang);if(a.has(i))continue;n.push({lang:i,value:t}),a.add(i)}}return a.size>0?n:void 0},exporter(i,r,n){for(const s of r){const r=s.value;if(r){const a=o(e||i.getNamespace(),t,n.namespace,i);s.lang!==n.lang&&a.setAttribute("xml:lang",s.lang),a.children.push(r),i.appendChild(a)}}}}},t.multipleChildAlternateLanguageText=function(e,t){return{importer(i,r){const n=[],s=new Map;let a=!1;const o=u(i,e||i.getNamespace(),t);for(const e of o){const t=e.getText();if(t){const i=l(e,r.lang);let o=s.get(i);o||(o=[],s.set(i,o),n.push({lang:i,value:o})),o.push(t),a=!0}}return a?n:void 0},exporter(i,r,n){for(const s of r)for(const r of s.value){const a=o(e||i.getNamespace(),t,n.namespace,i);s.lang!==n.lang&&a.setAttribute("xml:lang",s.lang),a.children.push(r),i.appendChild(a)}}}},t.multipleChildEnum=function(e,t){const i=new Map,r=new Map;for(const e of t)"string"==typeof e?(i.set(e,e),r.set(e,e)):(i.set(e[1],e[0]),r.set(e[0],e[1]));return{importer(t){const r=[];for(const n of t.children)"string"!=typeof n&&n.getNamespace()===(e||t.getNamespace())&&i.has(n.getName())&&r.push(i.get(n.getName()));return r},exporter(t,i){for(const n of i)p(t,e,r.get(n))}}},t.splicePath=function(e,t,i,r=!1){return{importer(n,s){const a=n.getChild(t,e||n.getNamespace());if(!a)return;const o=[];for(const e of a.children)if("string"!=typeof e&&s.registry.getImportKey(e)===i){const t=s.registry.import(e);t&&o.push(t)}return r?o:o[0]},exporter(r,n,s){let a=[];a=Array.isArray(n)?n:[n];const o=[];for(const t of a){const n=s.registry.export(i,t,{...s,namespace:e||r.getNamespace()||void 0});n&&o.push(n)}if(o.length){const i=p(r,e||r.getNamespace(),t);for(const e of o)i.appendChild(e)}}}},t.staticValue=function(e){return{exporter:()=>{},importer:()=>e}},t.childRawElement=function(e,t,i){return{importer(r,n){if(i&&(!n.sanitizers||!n.sanitizers[i]))return;const s=r.getChild(t,e||r.getNamespace());return s?i?n.sanitizers[i](s.toJSON()):s.toJSON():void 0},exporter(r,n,o){if("string"==typeof n&&(n=(0,a.parse)(`<${t} xmlns="${e||r.getNamespace()}">${n}</${t}>`).toJSON()),i){if(!o.sanitizers||!o.sanitizers[i])return;n=o.sanitizers[i](n)}n&&r.appendChild(new s.default(n.name,n.attributes,n.children))}}},t.childLanguageRawElement=function(e,t,i){return{importer(r,n){if(i&&(!n.sanitizers||!n.sanitizers[i]))return;const s=u(r,e||r.getNamespace(),t),a=c(s,n);for(const e of s)if(l(e,n.lang)===a)return i?n.sanitizers[i](e.toJSON()):e.toJSON();return s[0]?i?n.sanitizers[i](s[0].toJSON()):s[0].toJSON():void 0},exporter(r,n,o){if("string"==typeof n&&(n=(0,a.parse)(`<${t} xmlns="${e||r.getNamespace()}">${n}</${t}>`).toJSON()),n&&i){if(!o.sanitizers||!o.sanitizers[i])return;n=o.sanitizers[i](n)}if(!n)return;const l=p(r,e||r.getNamespace(),t,o.lang);for(const e of n.children)"string"==typeof e?l.appendChild(e):e&&l.appendChild(new s.default(e.name,e.attributes,e.children))}}},t.childAlternateLanguageRawElement=function(e,t,i){return{importer(r,n){if(i&&(!n.sanitizers||!n.sanitizers[i]))return;const s=[],a=new Set,o=u(r,e||r.getNamespace(),t);for(const e of o){let t=e.toJSON();if(i&&(t=n.sanitizers[i](t)),t){const i=l(e,n.lang);if(a.has(i))continue;s.push({lang:i,value:t}),a.add(i)}}return a.size>0?s:void 0},exporter(r,n,l){for(const c of n){let n=c.value;if("string"==typeof n&&(n=(0,a.parse)(`<${t} xmlns="${e||r.getNamespace()}">${n}</${t}>`).toJSON()),n&&i){if(!l.sanitizers||!l.sanitizers[i])continue;n=l.sanitizers[i](n)}if(n){const i=o(e||r.getNamespace(),t,l.namespace,r);r.appendChild(i),c.lang!==l.lang&&i.setAttribute("xml:lang",c.lang);for(const e of n.children)"string"==typeof e?i.appendChild(e):i.appendChild(new s.default(e.name,e.attributes,e.children))}}}}},t.parameterMap=function(e,i,r,n){return{importer(s,a){const o={},l=u(s,e,i),c=(0,t.attribute)(r).importer,p=(0,t.attribute)(n).importer;for(const e of l)o[c(e,a)]=p(e,a);return o},exporter(s,a,l){const c=(0,t.attribute)(r).exporter,u=(0,t.attribute)(n).exporter,p=e||s.getNamespace();for(const[e,t]of Object.entries(a)){const r=o(p,i,l.namespace,s);c(r,e,l),a[e]&&u(r,t,l),s.appendChild(r)}}}}},9447:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.define=t.XMLElement=t.Translator=t.Registry=t.StreamParser=t.parse=t.Parser=void 0;const r=i(7582),n=(0,r.__importDefault)(i(6556));t.XMLElement=n.default;const s=(0,r.__importDefault)(i(604));t.Registry=s.default;const a=(0,r.__importDefault)(i(5937));t.Translator=a.default,(0,r.__exportStar)(i(5747),t),(0,r.__exportStar)(i(3276),t),(0,r.__exportStar)(i(1030),t);var o=i(4374);Object.defineProperty(t,"Parser",{enumerable:!0,get:function(){return(0,r.__importDefault)(o).default}}),Object.defineProperty(t,"parse",{enumerable:!0,get:function(){return o.parse}});var l=i(4901);Object.defineProperty(t,"StreamParser",{enumerable:!0,get:function(){return(0,r.__importDefault)(l).default}}),t.define=function(e){return t=>{t.define(e)}}},4057:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});const i=new Set(["a","blockquote","br","cite","em","img","li","ol","p","span","strong","ul"]),r=new Set(["style"]),n=new Map([["a",new Set(["href","style"])],["body",new Set(["style","xml:lang"])],["blockquote",r],["br",r],["cite",r],["em",r],["img",new Set(["alt","height","src","style","width"])],["li",r],["ol",r],["p",r],["span",r],["strong",r],["ul",r]]),s=new Map([["font-style",/normal|italic|oblique|inherit/i],["font-weight",/normal|bold|bolder|lighter|inherit|\d\d\d/i],["text-decoration",/none|underline|overline|line-through|blink|inherit/i]]),a=e=>!!e.match(/^(https?|xmpp|cid|mailto|ftps?|im|ircs?|sips?|tel|geo|bitcoin|magnet):/i)&&e,o=e=>!!e.match(/^[0-9]*$/)&&e,l={alt:e=>e,height:o,href:a,src:a,style:e=>{const t=`;${e}`.replace(/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,"").replace(/\/\*.*/,"").replace(/\\([a-fA-F0-9]{1,6})\s?/,((e,t)=>String.fromCharCode(parseInt(t,16)))).match(/;\s*([a-z-]+)\s*:\s*([^;]*[^\s;])\s*/g),i=[];if(!t)return!1;for(const e of t){const t=e.match(/^;\s*([a-z-]+)\s*:\s*([^;]*[^\s])\s*$/);if(!t)continue;const r=s.get(t[1]);if(r){const e=t[2].match(r);e&&i.push(`${t[1]}:${e[0]}`)}}return!!i.length&&i.join("")},width:o};function c(e){if("string"==typeof e)return e;if(!i.has(e.name)){if("script"===e.name)return;return function(e){let t=[];for(const i of e.children)if("string"==typeof i)t.push(i);else{const e=c(i);e&&(Array.isArray(e)?t=t.concat(e):t.push(e))}return t}(e)}const t=e.children.map(c).filter((e=>void 0!==e)),r={};for(const[t,i]of Object.entries(e.attributes)){const s=n.get(e.name);if(!s||!s.has(t))continue;if(!i)continue;const a=l[t](i);a&&(r[t]=a)}return{attributes:r,children:t,name:e.name}}t.default=function(e){if("string"==typeof e)return;let t=[];for(const i of e.children){if(!i)continue;if("string"==typeof i){t.push(i);continue}const e=c(i);Array.isArray(e)?t=t.concat(e):e&&t.push(e)}const i={};return"body"===e.name?(void 0!==e.attributes.xmlns&&(i.xmlns=e.attributes.xmlns),e.attributes.style&&(i.style=e.attributes.style),void 0!==e.attributes["xml:lang"]&&(i["xml:lang"]=e.attributes["xml:lang"]),{attributes:i,children:t,name:"body"}):void 0}},5803:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SCRAM=t.DIGEST=t.OAUTH=t.PLAIN=t.EXTERNAL=t.ANONYMOUS=t.Hi=t.HMAC=t.H=t.XOR=t.createClientNonce=t.Factory=t.SimpleMech=void 0;const r=i(4142),n=i(8123);class s{constructor(e){this.authenticated=!1,this.mutuallyAuthenticated=!1,this.name=e}getCacheableCredentials(){return null}processChallenge(e){}processSuccess(e){this.authenticated=!0}finalize(){const e={authenticated:this.authenticated,mutuallyAuthenticated:this.mutuallyAuthenticated};return this.errorData&&(e.errorData=this.errorData),e}}function a(e=32){return(0,r.randomBytes)(e).toString("hex")}function o(e,t){const i=[];for(let r=0;r<e.length;r++)i.push(e[r]^t[r]);return r.Buffer.from(i)}function l(e,t){return(0,r.createHash)(t).update(e).digest()}function c(e,t,i){return(0,r.createHmac)(i,e).update(t).digest()}function u(e,t,i,n){let s=c(e,r.Buffer.concat([t,r.Buffer.from("00000001","hex")]),n),a=s;for(let t=0;t<i-1;t++)s=c(e,s,n),a=o(a,s);return a}function p(e){const t={},i=e.toString().split(/,(?=(?:[^"]|"[^"]*")*$)/);for(let e=0,r=i.length;e<r;e++){const r=/(\w+)=["]?([^"]+)["]?$/.exec(i[e]);r&&(t[r[1]]=r[2])}return t}function d(e){const t=[];for(const i of e)","===i?t.push("=2C"):"="===i?t.push("=3D"):t.push(i);return t.join("")}t.SimpleMech=s,t.Factory=class{constructor(){this.mechanisms=[]}register(e,t,i){this.mechanisms.push({constructor:t,name:e.toUpperCase(),priority:i}),this.mechanisms.sort(((e,t)=>t.priority-e.priority))}disable(e){const t=e.toUpperCase();this.mechanisms=this.mechanisms.filter((e=>e.name!==t))}createMechanism(e){const t=e.map((e=>e.toUpperCase()));for(const e of this.mechanisms)for(const i of t)if(i===e.name)return new e.constructor(e.name);return null}},t.createClientNonce=a,t.XOR=o,t.H=l,t.HMAC=c,t.Hi=u,t.ANONYMOUS=class extends s{getExpectedCredentials(){return{optional:["trace"],required:[]}}createResponse(e){return r.Buffer.from(e.trace||"")}},t.EXTERNAL=class extends s{getExpectedCredentials(){return{optional:["authzid"],required:[]}}createResponse(e){return r.Buffer.from(e.authzid||"")}},t.PLAIN=class extends s{getExpectedCredentials(){return{optional:["authzid"],required:["username","password"]}}createResponse(e){return r.Buffer.from((e.authzid||"")+"\0"+e.username+"\0"+(e.password||e.token))}},t.OAUTH=class extends s{constructor(e){super(e),this.failed=!1,this.name=e}getExpectedCredentials(){return{optional:["authzid"],required:["token"]}}createResponse(e){if(this.failed)return r.Buffer.from("");const t=`n,${d((0,n.saslprep)(e.authzid))},`,i=`auth=Bearer ${e.token}`;return r.Buffer.from(t+""+i+"","utf8")}processChallenge(e){this.failed=!0,this.errorData=JSON.parse(e.toString("utf8"))}},t.DIGEST=class extends s{constructor(e){super(e),this.providesMutualAuthentication=!1,this.state="INITIAL",this.name=e}processChallenge(e){this.state="CHALLENGE";const t=p(e);this.authenticated=!!t.rspauth,this.realm=t.realm,this.nonce=t.nonce,this.charset=t.charset}getExpectedCredentials(){return{optional:["authzid","clientNonce","realm"],required:["host","password","serviceName","serviceType","username"]}}createResponse(e){if("INITIAL"===this.state||this.authenticated)return null;let t=e.serviceType+"/"+e.host;e.serviceName&&e.host!==e.serviceName&&(t+="/"+e.serviceName);const i=e.realm||this.realm||"",n=e.clientNonce||a(16),s="00000001",o="auth";let l="";l+='username="'+e.username+'"',i&&(l+=',realm="'+i+'"'),l+=',nonce="'+this.nonce+'"',l+=',cnonce="'+n+'"',l+=",nc="+s,l+=",qop="+o,l+=',digest-uri="'+t+'"';const c=(0,r.createHash)("md5").update(e.username).update(":").update(i).update(":").update(e.password).digest(),u=(0,r.createHash)("md5").update(c).update(":").update(this.nonce).update(":").update(n);e.authzid&&u.update(":").update(e.authzid);const p=u.digest("hex"),d=(0,r.createHash)("md5").update("AUTHENTICATE:").update(t).digest("hex");return l+=",response="+(0,r.createHash)("md5").update(p).update(":").update(this.nonce).update(":").update(s).update(":").update(n).update(":").update(o).update(":").update(d).digest("hex"),"utf-8"===this.charset&&(l+=",charset=utf-8"),e.authzid&&(l+=',authzid="'+e.authzid+'"'),r.Buffer.from(l)}},t.SCRAM=class{constructor(e){this.providesMutualAuthentication=!0,this.name=e,this.state="INITIAL",this.useChannelBinding=this.name.toLowerCase().endsWith("-plus"),this.algorithm=this.name.toLowerCase().split("scram-")[1].split("-plus")[0]}getExpectedCredentials(){const e=["username","password"];return this.useChannelBinding&&e.push("tlsUnique"),{optional:["authzid","clientNonce"],required:e}}getCacheableCredentials(){return this.cache}createResponse(e){return"INITIAL"===this.state?this.initialResponse(e):this.challengeResponse(e)}processChallenge(e){const t=p(e);this.salt=r.Buffer.from(t.s||"","base64"),this.iterationCount=parseInt(t.i,10),this.nonce=t.r,this.verifier=t.v,this.error=t.e,this.challenge=e}processSuccess(e){this.processChallenge(e)}finalize(){return this.verifier?this.serverSignature.toString("base64")!==this.verifier?{authenticated:!1,error:"Mutual authentication failed",mutuallyAuthenticated:!1}:{authenticated:!0,mutuallyAuthenticated:!0}:{authenticated:!1,error:this.error,mutuallyAuthenticated:!1}}initialResponse(e){const t=d((0,n.saslprep)(e.authzid)),i=d((0,n.saslprep)(e.username));this.clientNonce=e.clientNonce||a();let s="n";e.tlsUnique&&(s=this.useChannelBinding?"p=tls-unique":"y"),this.gs2Header=r.Buffer.from(t?`${s},a=${t},`:`${s},,`),this.clientFirstMessageBare=r.Buffer.from(`n=${i},r=${this.clientNonce}`);const o=r.Buffer.concat([this.gs2Header,this.clientFirstMessageBare]);return this.state="CHALLENGE",o}challengeResponse(e){const t=r.Buffer.from("Client Key"),i=r.Buffer.from("Server Key"),s=r.Buffer.concat([this.gs2Header,e.tlsUnique||r.Buffer.from("")]).toString("base64"),a=r.Buffer.from(`c=${s},r=${this.nonce}`);let p,d,h;const f=e.salt&&0===r.Buffer.compare(e.salt,this.salt);f&&e.clientKey&&e.serverKey?(d=r.Buffer.from(e.clientKey),h=r.Buffer.from(e.serverKey)):f&&e.saltedPassword?(p=r.Buffer.from(e.saltedPassword),d=c(p,t,this.algorithm),h=c(p,i,this.algorithm)):(p=u(r.Buffer.from((0,n.saslprep)(e.password)),this.salt,this.iterationCount,this.algorithm),d=c(p,t,this.algorithm),h=c(p,i,this.algorithm));const m=l(d,this.algorithm),g=r.Buffer.from(","),_=r.Buffer.concat([this.clientFirstMessageBare,g,this.challenge,g,a]),b=o(d,c(m,_,this.algorithm)).toString("base64");this.serverSignature=c(h,_,this.algorithm);const y=r.Buffer.concat([a,r.Buffer.from(`,p=${b}`)]);return this.state="FINAL",this.cache={clientKey:d,salt:this.salt,saltedPassword:p,serverKey:h},y}}},9365:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TABLE_DATA=void 0,t.TABLE_DATA={"A.1":{r:"hk:if|le:lf|nf:nv|qg:qv|rg:rj|rm:rp|rr:rt|rv:s3|vn:vv|17m:17n|17q:17v|18g:19g|1an:1ao|1cb:1cg|1e5:1ef|1fb:1ff|1fl:1gb|1gd:1gq|1gs:1gu|1hr:1hv|1im:1iv|1ne:1nf|1pd:1pf|1qb:1rv|1ti:280|29q:29r|2ae:2af|2al:2an|2bh:2c0|2cd:2ce|2ch:2ci|2dj:2dl|2dq:2dr|2e5:2e6|2e9:2ea|2ee:2em|2eo:2er|2f4:2f5|2fr:2g1|2g3:2g4|2gb:2ge|2gh:2gi|2hq:2hr|2i3:2i6|2i9:2ia|2ie:2io|2iv:2j5|2jl:2k0|2lq:2lr|2me:2mf|2mh:2mv|2n1:2n5|2ng:2o0|2od:2oe|2oh:2oi|2pk:2pl|2pq:2pr|2q4:2q6|2q9:2qa|2qe:2ql|2qo:2qr|2r2:2r5|2rh:2s1|2sb:2sd|2sm:2so|2t0:2t2|2t5:2t7|2tb:2td|2tq:2tt|2u3:2u5|2ue:2um|2uo:2v6|2vj:300|31q:31t|32e:32k|32n:32v|332:335|33g:341|35q:35t|36e:36k|36n:36t|372:375|37g:381|39q:39t|3a4:3a5|3ae:3am|3ao:3av|3b2:3b5|3bg:3c1|3cn:3cp|3du:3dv|3e7:3e9|3eb:3ee|3f0:3fh|3fl:3g0|3hr:3hu|3is:3k0|3k5:3k6|3kb:3kc|3ke:3kj|3l8:3l9|3lu:3lv|3me:3mf|3mq:3mr|3mu:3nv|3rb:3rg|3sc:3sf|3ud:3ue|3ug:3vv|41j:41l|41q:41v|42q:44v|466:46f|47p:47q|47s:47v|4aq:4au|4d3:4d7|4fq:4fv|4ie:4if|4iu:4iv|4ke:4kf|4lm:4ln|4m6:4m7|4om:4on|4qr:4r0|4rt:4sv|4vl:500|5jn:5jv|5kt:5kv|5nh:5nv|5ol:5ov|5pn:5pv|5qk:5qv|5rk:5rv|5ut:5uv|5va:5vv|60q:60v|63o:63v|65a:7fv|7ks:7kv|7nq:7nv|7om:7on|7ou:7ov|7q6:7q7|7qe:7qf|7ru:7rv|7uk:7ul|7vg:7vh|82j:82m|82o:82u|834:839|83i:83j|84f:84v|85i:86f|87b:87v|89r:89s|8ac:8ai|8c4:8cf|8uf:8vv|917:91v|92b:92v|9gk:9gl|9ju:9jv|9ka:9o0|9oa:9ob|9qj:9ql|9qv:9r0|9sl:9sn|9tv:9uf|9vc:9vf|ao0:bjv|bnk:bnv|bum:bvf|bvs:bvv|c4n:c4o|c80:c84|c9d:c9g|cdo:cff|cgt:cgv|ci4:cig|cjs:cju|cmc:cmf|crn:crq|cuu:cuv|jdm:jfv|17t6:17vv|194d:194f|1967:1avv|1lt4:1lvv|1uhe:1uhf|1ujb:1unv|1uo7:1uoi|1uoo:1uos|1uti:1uui|1va0:1vaf|1vcg:1vch|1ve8:1vef|1vft:1vfv|1vgg:1vgv|1vh4:1vhf|1vi7:1vi8|1vjc:1vjf|1vnt:1vnu|1vtv:1vu1|1vu8:1vu9|1vug:1vuh|1vuo:1vup|1vut:1vuv|1vvf:1vvo|2000:20nv|20p4:20pf|20qb:20vv|2116:2117|212e:3jvv|3k7m:3k7v|3k97:3k99|3keu:3kvv|3l50:3l51|3l53:3l54|3l57:3l58|3l8b:3l8c|3la7:3la9|3ll4:3ll7|3lua:3lud|3m00:3vvt|59mn:5tvv|5ugu:5vvt|6000:7vvt|8000:9vvt|a000:bvvt|c000:dvvt|e000:fvvt|g000:hvvt|i000:jvvt|k000:lvvt|m000:nvvt|o000:pvvt|q000:rvvt|s002:s00v|s040:tvvt",s:"9p8|9qc|9qe|9qn|9tg|147|bkq|3l2l|3l4t|3l5d|3l5q|3l5s|3l61|3l64|3l86|3l8l|3l8t|3l9q|3l9v|3la5|3lah|16f|c20|ccf|cnv|cvv|1b0|1c8|1d2|1dq|1h0|1nv|1oe|284|2c4|2d9|2dh|2dt|2eu|2h9|2hh|2hk|2hn|2ht|2it|2k4|2kc|2ke|2ki|2l9|2lh|2lk|2m6|2ma|2o4|2p9|2ph|2qu|2s4|2sh|2sr|2st|2tm|2u9|304|30d|30h|319|31k|325|329|344|34d|34h|359|35k|365|369|36v|384|38d|38h|399|3a9|3c4|3di|3ds|3el|3en|3k3|3k9|3ko|3l0|3l4|3l6|3lc|3lq|3m5|3m7|3q8|3so|3tt|412|418|41b|4g7|4i7|4i9|4in|4ip|4k7|4k9|4lf|4lh|4lv|4m1|4mf|4mn|4nf|4of|4oh|4ov|4q7|h1|5od|5rd|5rh|60f|1upn|1upt|1upv|1uq2|1uq5|1vij|1vj7|1vjl|1vo0|1vv7|20ov|7qo|7qq|7qs|7qu|7tl|7u5|7us|7vl|7vv|sb|sd|s000|t2|97v|uf|9go|9o5"},"B.1":{r:"60b:60d|80b:80d|1vg0:1vgf",s:"5d|606|1vnv|830|qf"},"B.2":{m:"5l:ts|6v:3j;3j|9g:39;o7|a9:ls;3e|bv:3j|fg:3a;oc|q5:tp|rq:10;tp|sg:tp;o8;o1|tg:u5;o8;o1|u2:u3|ug:ti|uh:to|ui:u5|uj:ud|uk:ub|ul:u6|um:u0|vg:tq|vh:u1|vi:u3|vl:tl|1c7:1b5;1c2|7km:38;ph|7kn:3k;o8|7ko:3n;oa|7kp:3p;oa|7kq:31;lu|7kr:7j1|7qg:u5;oj|7qi:u5;oj;o0|7qk:u5;oj;o1|7qm:u5;oj;q2|7s0:7o0;tp|7s1:7o1;tp|7s2:7o2;tp|7s3:7o3;tp|7s4:7o4;tp|7s5:7o5;tp|7s6:7o6;tp|7s7:7o7;tp|7s8:7o0;tp|7s9:7o1;tp|7sa:7o2;tp|7sb:7o3;tp|7sc:7o4;tp|7sd:7o5;tp|7se:7o6;tp|7sf:7o7;tp|7sg:7p0;tp|7sh:7p1;tp|7si:7p2;tp|7sj:7p3;tp|7sk:7p4;tp|7sl:7p5;tp|7sm:7p6;tp|7sn:7p7;tp|7so:7p0;tp|7sp:7p1;tp|7sq:7p2;tp|7sr:7p3;tp|7ss:7p4;tp|7st:7p5;tp|7su:7p6;tp|7sv:7p7;tp|7t0:7r0;tp|7t1:7r1;tp|7t2:7r2;tp|7t3:7r3;tp|7t4:7r4;tp|7t5:7r5;tp|7t6:7r6;tp|7t7:7r7;tp|7t8:7r0;tp|7t9:7r1;tp|7ta:7r2;tp|7tb:7r3;tp|7tc:7r4;tp|7td:7r5;tp|7te:7r6;tp|7tf:7r7;tp|7ti:7rg;tp|7tj:th;tp|7tk:tc;tp|7tm:th;q2|7tn:th;q2;tp|7ts:th;tp|7tu:tp|7u2:7rk;tp|7u3:tn;tp|7u4:te;tp|7u6:tn;q2|7u7:tn;q2;tp|7uc:tn;tp|7ui:tp;o8;o0|7uj:tp;o8;o1|7um:tp;q2|7un:tp;o8;q2|7v2:u5;o8;o0|7v3:u5;o8;o1|7v4:u1;oj|7v6:u5;q2|7v7:u5;o8;q2|7vi:7rs;tp|7vj:u9;tp|7vk:ue;tp|7vm:u9;q2|7vn:u9;q2;tp|7vs:u9;tp|858:3i;3j|882:33|883:5g;33|887:ir|889:5g;36|88b:38|88c:38|88d:38|88g:39|88h:39|88i:3c|88l:3e|88m:3e;3f|88p:3g|88q:3h|88r:3i|88s:3i|88t:3i|890:3j;3d|891:3k;35;3c|892:3k;3d|894:3q|898:3q|89c:32|89d:33|89g:35|89h:36|89j:3d|89u:tj|89v:u0|8a5:34|crh:38;3g;31|crj:31;3l|crl:3f;3m|cs0:3g;31|cs1:3e;31|cs2:ts;31|cs3:3d;31|cs4:3b;31|cs5:3b;32|cs6:3d;32|cs7:37;32|csa:3g;36|csb:3e;36|csc:ts;36|csg:38;3q|csh:3b;38;3q|csi:3d;38;3q|csj:37;38;3q|csk:3k;38;3q|ct9:3g;31|cta:3b;3g;31|ctb:3d;3g;31|ctc:37;3g;31|ctk:3g;3m|ctl:3e;3m|ctm:ts;3m|ctn:3d;3m|cto:3b;3m|ctp:3d;3m|ctq:3g;3n|ctr:3e;3n|cts:ts;3n|ctt:3d;3n|ctu:3b;3n|ctv:3d;3n|cu0:3b;u9|cu1:3d;u9|cu3:32;3h|cu6:33;8gl;3b;37|cu7:33;3f;1e|cu8:34;32|cu9:37;3p|cub:38;3g|cud:3b;3b|cue:3b;3d|cun:3g;38|cup:3g;3g;3d|cuq:3g;3i|cus:3j;3m|cut:3n;32|1uo0:36;36|1uo1:36;39|1uo2:36;3c|1uo3:36;36;39|1uo4:36;36;3c|1uo5:3j;3k|1uo6:3j;3k|1uoj:1bk;1bm|1uok:1bk;1b5|1uol:1bk;1bb|1uom:1bu;1bm|1uon:1bk;1bd|3l00:31|3l01:32|3l02:33|3l03:34|3l04:35|3l05:36|3l06:37|3l07:38|3l08:39|3l09:3a|3l0a:3b|3l0b:3c|3l0c:3d|3l0d:3e|3l0e:3f|3l0f:3g|3l0g:3h|3l0h:3i|3l0i:3j|3l0j:3k|3l0k:3l|3l0l:3m|3l0m:3n|3l0n:3o|3l0o:3p|3l0p:3q|3l1k:31|3l1l:32|3l1m:33|3l1n:34|3l1o:35|3l1p:36|3l1q:37|3l1r:38|3l1s:39|3l1t:3a|3l1u:3b|3l1v:3c|3l20:3d|3l21:3e|3l22:3f|3l23:3g|3l24:3h|3l25:3i|3l26:3j|3l27:3k|3l28:3l|3l29:3m|3l2a:3n|3l2b:3o|3l2c:3p|3l2d:3q|3l38:31|3l39:32|3l3a:33|3l3b:34|3l3c:35|3l3d:36|3l3e:37|3l3f:38|3l3g:39|3l3h:3a|3l3i:3b|3l3j:3c|3l3k:3d|3l3l:3e|3l3m:3f|3l3n:3g|3l3o:3h|3l3p:3i|3l3q:3j|3l3r:3k|3l3s:3l|3l3t:3m|3l3u:3n|3l3v:3o|3l40:3p|3l41:3q|3l4s:31|3l4u:33|3l4v:34|3l52:37|3l55:3a|3l56:3b|3l59:3e|3l5a:3f|3l5b:3g|3l5c:3h|3l5e:3j|3l5f:3k|3l5g:3l|3l5h:3m|3l5i:3n|3l5j:3o|3l5k:3p|3l5l:3q|3l6g:31|3l6h:32|3l6i:33|3l6j:34|3l6k:35|3l6l:36|3l6m:37|3l6n:38|3l6o:39|3l6p:3a|3l6q:3b|3l6r:3c|3l6s:3d|3l6t:3e|3l6u:3f|3l6v:3g|3l70:3h|3l71:3i|3l72:3j|3l73:3k|3l74:3l|3l75:3m|3l76:3n|3l77:3o|3l78:3p|3l79:3q|3l84:31|3l85:32|3l87:34|3l88:35|3l89:36|3l8a:37|3l8d:3a|3l8e:3b|3l8f:3c|3l8g:3d|3l8h:3e|3l8i:3f|3l8j:3g|3l8k:3h|3l8m:3j|3l8n:3k|3l8o:3l|3l8p:3m|3l8q:3n|3l8r:3o|3l8s:3p|3l9o:31|3l9p:32|3l9r:34|3l9s:35|3l9t:36|3l9u:37|3la0:39|3la1:3a|3la2:3b|3la3:3c|3la4:3d|3la6:3f|3laa:3j|3lab:3k|3lac:3l|3lad:3m|3lae:3n|3laf:3o|3lag:3p|3lbc:31|3lbd:32|3lbe:33|3lbf:34|3lbg:35|3lbh:36|3lbi:37|3lbj:38|3lbk:39|3lbl:3a|3lbm:3b|3lbn:3c|3lbo:3d|3lbp:3e|3lbq:3f|3lbr:3g|3lbs:3h|3lbt:3i|3lbu:3j|3lbv:3k|3lc0:3l|3lc1:3m|3lc2:3n|3lc3:3o|3lc4:3p|3lc5:3q|3ld0:31|3ld1:32|3ld2:33|3ld3:34|3ld4:35|3ld5:36|3ld6:37|3ld7:38|3ld8:39|3ld9:3a|3lda:3b|3ldb:3c|3ldc:3d|3ldd:3e|3lde:3f|3ldf:3g|3ldg:3h|3ldh:3i|3ldi:3j|3ldj:3k|3ldk:3l|3ldl:3m|3ldm:3n|3ldn:3o|3ldo:3p|3ldp:3q|3lek:31|3lel:32|3lem:33|3len:34|3leo:35|3lep:36|3leq:37|3ler:38|3les:39|3let:3a|3leu:3b|3lev:3c|3lf0:3d|3lf1:3e|3lf2:3f|3lf3:3g|3lf4:3h|3lf5:3i|3lf6:3j|3lf7:3k|3lf8:3l|3lf9:3m|3lfa:3n|3lfb:3o|3lfc:3p|3lfd:3q|3lg8:31|3lg9:32|3lga:33|3lgb:34|3lgc:35|3lgd:36|3lge:37|3lgf:38|3lgg:39|3lgh:3a|3lgi:3b|3lgj:3c|3lgk:3d|3lgl:3e|3lgm:3f|3lgn:3g|3lgo:3h|3lgp:3i|3lgq:3j|3lgr:3k|3lgs:3l|3lgt:3m|3lgu:3n|3lgv:3o|3lh0:3p|3lh1:3q|3lhs:31|3lht:32|3lhu:33|3lhv:34|3li0:35|3li1:36|3li2:37|3li3:38|3li4:39|3li5:3a|3li6:3b|3li7:3c|3li8:3d|3li9:3e|3lia:3f|3lib:3g|3lic:3h|3lid:3i|3lie:3j|3lif:3k|3lig:3l|3lih:3m|3lii:3n|3lij:3o|3lik:3p|3lil:3q|3ljg:31|3ljh:32|3lji:33|3ljj:34|3ljk:35|3ljl:36|3ljm:37|3ljn:38|3ljo:39|3ljp:3a|3ljq:3b|3ljr:3c|3ljs:3d|3ljt:3e|3lju:3f|3ljv:3g|3lk0:3h|3lk1:3i|3lk2:3j|3lk3:3k|3lk4:3l|3lk5:3m|3lk6:3n|3lk7:3o|3lk8:3p|3lk9:3q|3ll8:th|3ll9:ti|3lla:tj|3llb:tk|3llc:tl|3lld:tm|3lle:tn|3llf:to|3llg:tp|3llh:tq|3lli:tr|3llj:ts|3llk:tt|3lll:tu|3llm:tv|3lln:u0|3llo:u1|3llp:to|3llq:u3|3llr:u4|3lls:u5|3llt:u6|3llu:u7|3llv:u8|3lm0:u9|3lmj:u3|3ln2:th|3ln3:ti|3ln4:tj|3ln5:tk|3ln6:tl|3ln7:tm|3ln8:tn|3ln9:to|3lna:tp|3lnb:tq|3lnc:tr|3lnd:ts|3lne:tt|3lnf:tu|3lng:tv|3lnh:u0|3lni:u1|3lnj:to|3lnk:u3|3lnl:u4|3lnm:u5|3lnn:u6|3lno:u7|3lnp:u8|3lnq:u9|3lod:u3|3los:th|3lot:ti|3lou:tj|3lov:tk|3lp0:tl|3lp1:tm|3lp2:tn|3lp3:to|3lp4:tp|3lp5:tq|3lp6:tr|3lp7:ts|3lp8:tt|3lp9:tu|3lpa:tv|3lpb:u0|3lpc:u1|3lpd:to|3lpe:u3|3lpf:u4|3lpg:u5|3lph:u6|3lpi:u7|3lpj:u8|3lpk:u9|3lq7:u3|3lqm:th|3lqn:ti|3lqo:tj|3lqp:tk|3lqq:tl|3lqr:tm|3lqs:tn|3lqt:to|3lqu:tp|3lqv:tq|3lr0:tr|3lr1:ts|3lr2:tt|3lr3:tu|3lr4:tv|3lr5:u0|3lr6:u1|3lr7:to|3lr8:u3|3lr9:u4|3lra:u5|3lrb:u6|3lrc:u7|3lrd:u8|3lre:u9|3ls1:u3|3lsg:th|3lsh:ti|3lsi:tj|3lsj:tk|3lsk:tl|3lsl:tm|3lsm:tn|3lsn:to|3lso:tp|3lsp:tq|3lsq:tr|3lsr:ts|3lss:tt|3lst:tu|3lsu:tv|3lsv:u0|3lt0:u1|3lt1:to|3lt2:u3|3lt3:u4|3lt4:u5|3lt5:u6|3lt6:u7|3lt7:u8|3lt8:u9|3ltr:u3",r:"23:2c|2i:2k|2m:2q|60:6m|6o:6u|bo:bp|c1:c2|c6:c7|c9:cb|ce:ch|cj:ck|cm:co|cs:ct|cv:d0|d6:d7|de:df|dh:dj|dn:do|e4:e5|e7:e8|ea:eb|fh:fi|fm:fo|s8:sa|se:sf|sh:t1|t3:tb|100:11f|19h:1am|7o8:7of|7oo:7ot|7p8:7pf|7po:7pv|7q8:7qd|7r8:7rf|7to:7tr|7u8:7ub|7uo:7ur|7v8:7vc|7vo:7vr|89a:89b|8b0:8bf|95m:96f|1vp1:1vpq|2100:2115",s:"v8|va|vc|ve|vk|130|132|134|136|138|13a|13c|13e|13g|13i|13k|13m|13o|13q|13s|13u|140|14a|14c|14e|14g|14i|14k|14m|14o|14q|14s|14u|150|152|154|156|158|15a|15c|15e|15g|15i|15k|15m|15o|15q|15s|15u|161|163|165|167|169|16b|16d|16g|16i|16k|16m|16o|16q|16s|16u|170|172|174|176|178|17a|17c|17e|17g|17i|17k|17o|180|182|184|186|188|18a|18c|18e|80|82|84|86|88|8a|8c|8e|8g|8i|8k|8m|8o|8q|8s|8u|90|92|94|96|98|9a|9c|9e|9i|9k|9m|9p|9r|9t|9v|a1|a3|a5|a7|aa|ac|ae|ag|ai|ak|am|ao|aq|as|au|b0|b2|b4|b6|b8|ba|bc|be|bg|bi|bk|bm|br|bt|c4|d2|d4|d9|dc|dl|ds|ed|ef|eh|ej|el|en|ep|er|eu|f0|f2|f4|f6|f8|fa|fc|fe|fk|fq|fs|fu|g0|g2|g4|g6|g8|ga|gc|ge|gg|gi|gk|gm|go|gq|gs|gu|h0|h2|h4|h6|h8|ha|hc|he|hg|hi|21|22|7g0|7g2|7g4|7g6|7g8|7ga|7gc|7ge|7gg|7gi|2d|7gk|7gm|7go|7gq|7gs|7gu|7h0|7h2|7h4|7h6|7h8|7ha|7hc|7he|7hg|7hi|7hk|7hm|7ho|7hq|7hs|7hu|7i0|7i2|7i4|7i6|7i8|7ia|7ic|7ie|7ig|7ii|7ik|7im|7io|7iq|7is|7iu|7j0|7j2|7j4|7j6|7j8|7ja|7jc|7je|7jg|7ji|7jk|7jm|2e|7jo|7jq|7js|7ju|7k0|7k2|7k4|7k6|7k8|7ka|7kc|7ke|7kg|7ki|7kk|7l0|7l2|7l4|7l6|7l8|7la|7lc|7le|7lg|7li|7lk|7lm|7lo|7lq|7ls|7lu|7m0|7m2|7m4|7m6|7m8|7ma|7mc|7me|7mg|7mi|7mk|7mm|7mo|7mq|2f|7ms|7mu|7n0|7n2|7n4|7n6|7n8|7na|7nc|7ne|7ng|7ni|7nk|7nm|7no|2g|7qp|7qr|7qt|7qv|2h|896|2l|s6|sc|uo|uq|us|uu|v0|v2|v4|v6"},"B.3":{m:"5l:ts|6v:3j;3j|9g:39;o7|a9:ls;3e|bv:3j|fg:3a;oc|q5:tp|sg:tp;o8;o1|tg:u5;o8;o1|u2:u3|ug:ti|uh:to|ul:u6|um:u0|vg:tq|vh:u1|vi:u3|vl:tl|1c7:1b5;1c2|7km:38;ph|7kn:3k;o8|7ko:3n;oa|7kp:3p;oa|7kq:31;lu|7kr:7j1|7qg:u5;oj|7qi:u5;oj;o0|7qk:u5;oj;o1|7qm:u5;oj;q2|7s0:7o0;tp|7s1:7o1;tp|7s2:7o2;tp|7s3:7o3;tp|7s4:7o4;tp|7s5:7o5;tp|7s6:7o6;tp|7s7:7o7;tp|7s8:7o0;tp|7s9:7o1;tp|7sa:7o2;tp|7sb:7o3;tp|7sc:7o4;tp|7sd:7o5;tp|7se:7o6;tp|7sf:7o7;tp|7sg:7p0;tp|7sh:7p1;tp|7si:7p2;tp|7sj:7p3;tp|7sk:7p4;tp|7sl:7p5;tp|7sm:7p6;tp|7sn:7p7;tp|7so:7p0;tp|7sp:7p1;tp|7sq:7p2;tp|7sr:7p3;tp|7ss:7p4;tp|7st:7p5;tp|7su:7p6;tp|7sv:7p7;tp|7t0:7r0;tp|7t1:7r1;tp|7t2:7r2;tp|7t3:7r3;tp|7t4:7r4;tp|7t5:7r5;tp|7t6:7r6;tp|7t7:7r7;tp|7t8:7r0;tp|7t9:7r1;tp|7ta:7r2;tp|7tb:7r3;tp|7tc:7r4;tp|7td:7r5;tp|7te:7r6;tp|7tf:7r7;tp|7ti:7rg;tp|7tj:th;tp|7tk:tc;tp|7tm:th;q2|7tn:th;q2;tp|7ts:th;tp|7tu:tp|7u2:7rk;tp|7u3:tn;tp|7u4:te;tp|7u6:tn;q2|7u7:tn;q2;tp|7uc:tn;tp|7ui:tp;o8;o0|7uj:tp;o8;o1|7um:tp;q2|7un:tp;o8;q2|7v2:u5;o8;o0|7v3:u5;o8;o1|7v4:u1;oj|7v6:u5;q2|7v7:u5;o8;q2|7vi:7rs;tp|7vj:u9;tp|7vk:ue;tp|7vm:u9;q2|7vn:u9;q2;tp|7vs:u9;tp|1uo0:36;36|1uo1:36;39|1uo2:36;3c|1uo3:36;36;39|1uo4:36;36;3c|1uo5:3j;3k|1uo6:3j;3k|1uoj:1bk;1bm|1uok:1bk;1b5|1uol:1bk;1bb|1uom:1bu;1bm|1uon:1bk;1bd",r:"23:2c|2i:2k|2m:2q|60:6m|6o:6u|bo:bp|c1:c2|c6:c7|c9:cb|ce:ch|cj:ck|cm:co|cs:ct|cv:d0|d6:d7|de:df|dh:dj|dn:do|e4:e5|e7:e8|ea:eb|fh:fi|fm:fo|s8:sa|se:sf|sh:t1|t3:tb|100:11f|19h:1am|7o8:7of|7oo:7ot|7p8:7pf|7po:7pv|7q8:7qd|7r8:7rf|7to:7tr|7u8:7ub|7uo:7ur|7v8:7vc|7vo:7vr|89a:89b|8b0:8bf|95m:96f|1vp1:1vpq|2100:2115",s:"v8|va|vc|ve|vk|130|132|134|136|138|13a|13c|13e|13g|13i|13k|13m|13o|13q|13s|13u|140|14a|14c|14e|14g|14i|14k|14m|14o|14q|14s|14u|150|152|154|156|158|15a|15c|15e|15g|15i|15k|15m|15o|15q|15s|15u|161|163|165|167|169|16b|16d|16g|16i|16k|16m|16o|16q|16s|16u|170|172|174|176|178|17a|17c|17e|17g|17i|17k|17o|180|182|184|186|188|18a|18c|18e|80|82|84|86|88|8a|8c|8e|8g|8i|8k|8m|8o|8q|8s|8u|90|92|94|96|98|9a|9c|9e|9i|9k|9m|9p|9r|9t|9v|a1|a3|a5|a7|aa|ac|ae|ag|ai|ak|am|ao|aq|as|au|b0|b2|b4|b6|b8|ba|bc|be|bg|bi|bk|bm|br|bt|c4|d2|d4|d9|dc|dl|ds|ed|ef|eh|ej|el|en|ep|er|eu|f0|f2|f4|f6|f8|fa|fc|fe|fk|fq|fs|fu|g0|g2|g4|g6|g8|ga|gc|ge|gg|gi|gk|gm|go|gq|gs|gu|h0|h2|h4|h6|h8|ha|hc|he|hg|hi|21|22|7g0|7g2|7g4|7g6|7g8|7ga|7gc|7ge|7gg|7gi|2d|7gk|7gm|7go|7gq|7gs|7gu|7h0|7h2|7h4|7h6|7h8|7ha|7hc|7he|7hg|7hi|7hk|7hm|7ho|7hq|7hs|7hu|7i0|7i2|7i4|7i6|7i8|7ia|7ic|7ie|7ig|7ii|7ik|7im|7io|7iq|7is|7iu|7j0|7j2|7j4|7j6|7j8|7ja|7jc|7je|7jg|7ji|7jk|7jm|2e|7jo|7jq|7js|7ju|7k0|7k2|7k4|7k6|7k8|7ka|7kc|7ke|7kg|7ki|7kk|7l0|7l2|7l4|7l6|7l8|7la|7lc|7le|7lg|7li|7lk|7lm|7lo|7lq|7ls|7lu|7m0|7m2|7m4|7m6|7m8|7ma|7mc|7me|7mg|7mi|7mk|7mm|7mo|7mq|2f|7ms|7mu|7n0|7n2|7n4|7n6|7n8|7na|7nc|7ne|7ng|7ni|7nk|7nm|7no|2g|7qp|7qr|7qt|7qv|2h|896|2l|s6|sc|uo|uq|us|uu|v0|v2|v4|v6"},"C.1.1":{s:"10"},"C.1.2":{r:"800:80b",s:"c00|50|5k0|81f|82v"},"C.2.1":{r:"0:v",s:"3v"},"C.2.2":{r:"40:4v|80c:80d|818:819|830:833|83a:83f|1vvp:1vvs|3kbj:3kbq",s:"1mt|1of|60e|1vnv"},"C.3":{r:"1o00:1u7v|u000:vvvt|10000:11vvt"},"C.4":{r:"1veg:1vff|1vvu:1vvv|3vvu:3vvv|5vvu:5vvv|7vvu:7vvv|9vvu:9vvv|bvvu:bvvv|dvvu:dvvv|fvvu:fvvv|hvvu:hvvv|jvvu:jvvv|lvvu:lvvv|nvvu:nvvv|pvvu:pvvv|rvvu:rvvv|tvvu:tvvv|vvvu:vvvv|11vvu:11vvv"},"C.5":{r:"1m00:1nvv"},"C.6":{r:"1vvp:1vvt"},"C.7":{r:"bvg:bvr"},"C.8":{r:"q0:q1|80e:80f|81a:81e|83a:83f"},"C.9":{r:"s010:s03v",s:"s001"},"D.1":{r:"1eg:1fa|1fg:1fk|1h1:1hq|1i0:1ia|1jd:1jf|1jh:1ml|1n5:1n6|1nq:1nu|1o0:1od|1oi:1pc|1s0:1t5|1uov:1up8|1upa:1upm|1upo:1ups|1uq0:1uq1|1uq3:1uq4|1uq6:1uth|1uuj:1v9t|1vag:1vcf|1vci:1ve7|1vfg:1vfs|1vjg:1vjk|1vjm:1vns",s:"1du|1e0|1e3|1gr|1gv|1mt|1og|1th|1uot|1upu|80f"},"D.2":{r:"21:2q|31:3q|60:6m|6o:7m|7o:h0|h2:hj|ig:ld|lg:lo|lr:m1|mg:mh|n0:n4|s8:sa|se:t1|t3:ue|ug:vl|100:142|14a:16e|16g:17l|17o:17p|180:18f|19h:1am|1ap:1av|1b1:1c7|285:29p|29t:2a0|2a9:2ac|2ao:2b1|2b4:2bg|2c2:2c3|2c5:2cc|2cf:2cg|2cj:2d8|2da:2dg|2dm:2dp|2du:2e0|2e7:2e8|2eb:2ec|2es:2et|2ev:2f1|2f6:2fh|2fk:2fq|2g5:2ga|2gf:2gg|2gj:2h8|2ha:2hg|2hi:2hj|2hl:2hm|2ho:2hp|2hu:2i0|2ip:2is|2j6:2jf|2ji:2jk|2k5:2kb|2kf:2kh|2kj:2l8|2la:2lg|2li:2lj|2ll:2lp|2lt:2m0|2mb:2mc|2n6:2nf|2o2:2o3|2o5:2oc|2of:2og|2oj:2p8|2pa:2pg|2pi:2pj|2pm:2pp|2pt:2pu|2q7:2q8|2qb:2qc|2qs:2qt|2qv:2r1|2r6:2rg|2s5:2sa|2se:2sg|2si:2sl|2sp:2sq|2su:2sv|2t3:2t4|2t8:2ta|2te:2tl|2tn:2tp|2tu:2tv|2u1:2u2|2u6:2u8|2ua:2uc|2v7:2vi|301:303|305:30c|30e:30g|30i:318|31a:31j|31l:31p|321:324|330:331|336:33f|342:343|345:34c|34e:34g|34i:358|35a:35j|35l:35p|360:364|367:368|36a:36b|36l:36m|370:371|376:37f|382:383|385:38c|38e:38g|38i:398|39a:39p|39u:3a0|3a6:3a8|3aa:3ac|3b0:3b1|3b6:3bf|3c2:3c3|3c5:3cm|3cq:3dh|3dj:3dr|3e0:3e6|3ef:3eh|3eo:3ev|3fi:3fk|3g1:3hg|3hi:3hj|3i0:3i6|3if:3ir|3k1:3k2|3k7:3k8|3kk:3kn|3kp:3kv|3l1:3l3|3la:3lb|3ld:3lg|3li:3lj|3m0:3m4|3mg:3mp|3ms:3mt|3o0:3on|3oq:3pk|3pu:3q7|3q9:3ra|3s8:3sb|3tu:3u5|3u7:3uc|400:411|413:417|419:41a|420:42n|450:465|46g:47o|480:4ap|4av:4d2|4d8:4fp|4g0:4g6|4g8:4i6|4ia:4id|4ig:4im|4iq:4it|4j0:4k6|4ka:4kd|4kg:4le|4li:4ll|4lo:4lu|4m2:4m5|4m8:4me|4mg:4mm|4mo:4ne|4ng:4oe|4oi:4ol|4oo:4ou|4p0:4q6|4q8:4qq|4r1:4rs|4t0:4vk|501:5jm|5k1:5kq|5l0:5ng|5o0:5oc|5oe:5oh|5p0:5ph|5pl:5pm|5q0:5qh|5r0:5rc|5re:5rg|5s0:5tm|5tu:5u5|5u7:5u8|5uk:5uq|5v0:5v9|60g:60p|610:63n|640:658|7g0:7kr|7l0:7np|7o0:7ol|7oo:7ot|7p0:7q5|7q8:7qd|7qg:7qn|7qv:7rt|7s0:7tk|7tm:7ts|7u2:7u4|7u6:7uc|7ug:7uj|7um:7ur|7v0:7vc|7vi:7vk|7vm:7vs|88a:88j|88p:88t|89a:89d|89f:89h|89j:89p|89t:89v|8a5:8a9|8b0:8c3|8pm:8rq|94s:979|c05:c07|c11:c19|c1h:c1l|c1o:c1s|c21:c4m|c4t:c4v|c51:c7q|c7s:c7v|c85:c9c|c9h:cce|ccg:cdn|cfg:cgs|ch0:ci3|cj0:cjr|cjv:clg|cm0:cmb|cmg:cnu|co0:crm|crr:cut|cv0:cvu|d00:jdl|jg0:17t5|1800:194c|1b00:1lt3|1m00:1uhd|1uhg:1uja|1uo0:1uo6|1uoj:1uon|1vp1:1vpq|1vq1:1vqq|1vr6:1vtu|1vu2:1vu7|1vua:1vuf|1vui:1vun|1vuq:1vus|20o0:20ou|20p0:20p3|20pg:20qa|2100:2115|2118:212d|3k00:3k7l|3k80:3k96|3k9a:3kb6|3kba:3kbi|3kc3:3kc4|3kcc:3kd9|3kde:3ket|3l00:3l2k|3l2m:3l4s|3l4u:3l4v|3l55:3l56|3l59:3l5c|3l5e:3l5p|3l5t:3l60|3l62:3l63|3l65:3l85|3l87:3l8a|3l8d:3l8k|3l8m:3l8s|3l8u:3l9p|3l9r:3l9u|3la0:3la4|3laa:3lag|3lai:3ll3|3ll8:3lu9|4000:59mm|5u00:5ugt|u000:vvvt|10000:11vvt",s:"3l52|3l5r|3la6|1c9|5a|5l|5q|283|2ag|2di|2en|2iu|2k3|2kd|2m9|2mg|2n0|2q0|2qn|2s3|2ss|2un|35u|36u|3an|3dt|3k4|3ka|3kd|3l5|3l7|3lt|3m6|3pm|3po|3rv|3s5|3uf|41c|41h|41o|47r|4i8|4io|4k8|4lg|4m0|4og|5us|ne|7qp|7qr|7qt|7tu|80e|83h|83v|882|887|88l|894|896|898|rq|s6|sc|8sl"}}},8123:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.saslprep=t.resourceprep=t.nodeprep=t.NodePrepProhibited=t.nameprep=t.prepare=t.D2=t.D1=t.C9=t.C8=t.C7=t.C6=t.C5=t.C4=t.C3=t.C22=t.C21=t.C12=t.C11=t.B3=t.B2=t.B1=t.A1=t.Table=void 0;const r=(0,i(7582).__importDefault)(i(3689)),n=i(9365);class s{constructor(e,t){this.singles=new Set,this.ranges=[],this.mappings=new Map;const i=n.TABLE_DATA[e];this.name=e,i?(i.s&&(this.singles=new Set(i.s.split("|").map((e=>parseInt(e,32))))),i.r&&(this.ranges=i.r.split("|").map((e=>{const[t,i]=e.split(":");return[parseInt(t,32),parseInt(i,32)]}))),i.m&&(this.mappings=new Map(i.m.split("|").map((e=>{const[t,i]=e.split(":"),r=i.split(";").map((e=>parseInt(e,32)));return[parseInt(t,32),r]}))))):t&&(this.singles=new Set(t))}contains(e){if(this.singles.has(e))return!0;let t=0,i=this.ranges.length-1;for(;t<=i;){const r=Math.floor((t+i)/2),n=this.ranges[r];if(e<n[0])i=r-1;else{if(!(e>n[1]))return!0;t=r+1}}return!1}hasMapping(e){return this.mappings.has(e)||this.contains(e)}map(e){return this.contains(e)&&!this.mappings.has(e)?String.fromCodePoint(e).toLowerCase().codePointAt(0):this.mappings.get(e)||null}}function a(e,i,n=""){const s=r.default.ucs2.decode(n);let a=[];for(const t of s){if(!i&&e.unassigned.contains(t))throw new Error("Unassigned code point: x"+t.toString(16));let r=!1;for(const i of e.mappings){if(!i.hasMapping(t))continue;r=!0;const e=i.map(t);e&&(Array.isArray(e)?a=a.concat(e):a.push(e))}r||a.push(t)}let o=a;if(e.normalize){const e=r.default.ucs2.encode(a).normalize("NFKC");o=r.default.ucs2.decode(e)}let l=!1,c=!1;for(const r of o){for(const t of e.prohibited)if(t.contains(r))throw new Error("Prohibited code point: x"+r.toString(16));if(!i&&e.unassigned.contains(r))throw new Error("Prohibited code point: x"+r.toString(16));e.bidirectional&&(l=l||t.D1.contains(r),c=c||t.D2.contains(r))}if(e.bidirectional){if(l&&c)throw new Error("String contained both LCat and RandALCat code points");if(l&&(!t.D1.contains(o[0])||!t.D1.contains(o[o.length-1])))throw new Error("String containing RandALCat code points must start and end with RandALCat code points")}return r.default.ucs2.encode(o)}t.Table=s,t.A1=new s("A.1"),t.B1=new s("B.1"),t.B2=new s("B.2"),t.B3=new s("B.3"),t.C11=new s("C.1.1"),t.C12=new s("C.1.2"),t.C21=new s("C.2.1"),t.C22=new s("C.2.2"),t.C3=new s("C.3"),t.C4=new s("C.4"),t.C5=new s("C.5"),t.C6=new s("C.6"),t.C7=new s("C.7"),t.C8=new s("C.8"),t.C9=new s("C.9"),t.D1=new s("D.1"),t.D2=new s("D.2"),t.B1.map=()=>null,t.C11.contains=e=>32===e,t.C12.map=e=>t.C12.contains(e)?32:null,t.prepare=a;const o={bidirectional:!0,mappings:[t.B1,t.B2],normalize:!0,prohibited:[t.C12,t.C22,t.C3,t.C4,t.C5,t.C6,t.C7,t.C8,t.C9],unassigned:t.A1};t.nameprep=function(e,t=!0){return a(o,t,e)},t.NodePrepProhibited=new s("NodePrepProhibited",[34,38,39,47,58,60,62,64]);const l={bidirectional:!0,mappings:[t.B1,t.B2],normalize:!0,prohibited:[t.C11,t.C12,t.C21,t.C22,t.C3,t.C4,t.C5,t.C6,t.C7,t.C8,t.C9,t.NodePrepProhibited],unassigned:t.A1};t.nodeprep=function(e,t=!0){return a(l,t,e)};const c={bidirectional:!0,mappings:[t.B1],normalize:!0,prohibited:[t.C12,t.C21,t.C22,t.C3,t.C4,t.C5,t.C6,t.C7,t.C8,t.C9],unassigned:t.A1};t.resourceprep=function(e,t=!0){return a(c,t,e)};const u={bidirectional:!0,mappings:[t.C12,t.B1],normalize:!0,prohibited:[t.C12,t.C21,t.C22,t.C3,t.C4,t.C5,t.C6,t.C7,t.C8,t.C9],unassigned:t.A1};t.saslprep=function(e,t=!1){return a(u,t,e)}},2575:(e,t)=>{t.byteLength=function(e){var t=o(e),i=t[0],r=t[1];return 3*(i+r)/4-r},t.toByteArray=function(e){var t,i,s=o(e),a=s[0],l=s[1],c=new n(function(e,t,i){return 3*(t+i)/4-i}(0,a,l)),u=0,p=l>0?a-4:a;for(i=0;i<p;i+=4)t=r[e.charCodeAt(i)]<<18|r[e.charCodeAt(i+1)]<<12|r[e.charCodeAt(i+2)]<<6|r[e.charCodeAt(i+3)],c[u++]=t>>16&255,c[u++]=t>>8&255,c[u++]=255&t;return 2===l&&(t=r[e.charCodeAt(i)]<<2|r[e.charCodeAt(i+1)]>>4,c[u++]=255&t),1===l&&(t=r[e.charCodeAt(i)]<<10|r[e.charCodeAt(i+1)]<<4|r[e.charCodeAt(i+2)]>>2,c[u++]=t>>8&255,c[u++]=255&t),c},t.fromByteArray=function(e){for(var t,r=e.length,n=r%3,s=[],a=16383,o=0,c=r-n;o<c;o+=a)s.push(l(e,o,o+a>c?c:o+a));return 1===n?(t=e[r-1],s.push(i[t>>2]+i[t<<4&63]+"==")):2===n&&(t=(e[r-2]<<8)+e[r-1],s.push(i[t>>10]+i[t>>4&63]+i[t<<2&63]+"=")),s.join("")};for(var i=[],r=[],n="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0;a<64;++a)i[a]=s[a],r[s.charCodeAt(a)]=a;function o(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var i=e.indexOf("=");return-1===i&&(i=t),[i,i===t?0:4-i%4]}function l(e,t,r){for(var n,s,a=[],o=t;o<r;o+=3)n=(e[o]<<16&16711680)+(e[o+1]<<8&65280)+(255&e[o+2]),a.push(i[(s=n)>>18&63]+i[s>>12&63]+i[s>>6&63]+i[63&s]);return a.join("")}r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63},2560:(e,t)=>{t.read=function(e,t,i,r,n){var s,a,o=8*n-r-1,l=(1<<o)-1,c=l>>1,u=-7,p=i?n-1:0,d=i?-1:1,h=e[t+p];for(p+=d,s=h&(1<<-u)-1,h>>=-u,u+=o;u>0;s=256*s+e[t+p],p+=d,u-=8);for(a=s&(1<<-u)-1,s>>=-u,u+=r;u>0;a=256*a+e[t+p],p+=d,u-=8);if(0===s)s=1-c;else{if(s===l)return a?NaN:1/0*(h?-1:1);a+=Math.pow(2,r),s-=c}return(h?-1:1)*a*Math.pow(2,s-r)},t.write=function(e,t,i,r,n,s){var a,o,l,c=8*s-n-1,u=(1<<c)-1,p=u>>1,d=23===n?Math.pow(2,-24)-Math.pow(2,-77):0,h=r?0:s-1,f=r?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(o=isNaN(t)?1:0,a=u):(a=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-a))<1&&(a--,l*=2),(t+=a+p>=1?d/l:d*Math.pow(2,1-p))*l>=2&&(a++,l/=2),a+p>=u?(o=0,a=u):a+p>=1?(o=(t*l-1)*Math.pow(2,n),a+=p):(o=t*Math.pow(2,p-1)*Math.pow(2,n),a=0));n>=8;e[i+h]=255&o,h+=f,o/=256,n-=8);for(a=a<<n|o,c+=n;c>0;e[i+h]=255&a,h+=f,a/=256,c-=8);e[i+h-f]|=128*m}},2646:(e,t,i)=>{const r=i(2575),n=i(2560),s="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=l,t.SlowBuffer=function(e){return+e!=e&&(e=0),l.alloc(+e)},t.INSPECT_MAX_BYTES=50;const a=2147483647;function o(e){if(e>a)throw new RangeError('The value "'+e+'" is invalid for option "size"');const t=new Uint8Array(e);return Object.setPrototypeOf(t,l.prototype),t}function l(e,t,i){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return p(e)}return c(e,t,i)}function c(e,t,i){if("string"==typeof e)return function(e,t){if("string"==typeof t&&""!==t||(t="utf8"),!l.isEncoding(t))throw new TypeError("Unknown encoding: "+t);const i=0|m(e,t);let r=o(i);const n=r.write(e,t);return n!==i&&(r=r.slice(0,n)),r}(e,t);if(ArrayBuffer.isView(e))return function(e){if(Q(e,Uint8Array)){const t=new Uint8Array(e);return h(t.buffer,t.byteOffset,t.byteLength)}return d(e)}(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(Q(e,ArrayBuffer)||e&&Q(e.buffer,ArrayBuffer))return h(e,t,i);if("undefined"!=typeof SharedArrayBuffer&&(Q(e,SharedArrayBuffer)||e&&Q(e.buffer,SharedArrayBuffer)))return h(e,t,i);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');const r=e.valueOf&&e.valueOf();if(null!=r&&r!==e)return l.from(r,t,i);const n=function(e){if(l.isBuffer(e)){const t=0|f(e.length),i=o(t);return 0===i.length||e.copy(i,0,0,t),i}return void 0!==e.length?"number"!=typeof e.length||K(e.length)?o(0):d(e):"Buffer"===e.type&&Array.isArray(e.data)?d(e.data):void 0}(e);if(n)return n;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return l.from(e[Symbol.toPrimitive]("string"),t,i);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function u(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function p(e){return u(e),o(e<0?0:0|f(e))}function d(e){const t=e.length<0?0:0|f(e.length),i=o(t);for(let r=0;r<t;r+=1)i[r]=255&e[r];return i}function h(e,t,i){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(i||0))throw new RangeError('"length" is outside of buffer bounds');let r;return r=void 0===t&&void 0===i?new Uint8Array(e):void 0===i?new Uint8Array(e,t):new Uint8Array(e,t,i),Object.setPrototypeOf(r,l.prototype),r}function f(e){if(e>=a)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a.toString(16)+" bytes");return 0|e}function m(e,t){if(l.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||Q(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);const i=e.length,r=arguments.length>2&&!0===arguments[2];if(!r&&0===i)return 0;let n=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return i;case"utf8":case"utf-8":return V(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*i;case"hex":return i>>>1;case"base64":return $(e).length;default:if(n)return r?-1:V(e).length;t=(""+t).toLowerCase(),n=!0}}function g(e,t,i){let r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===i||i>this.length)&&(i=this.length),i<=0)return"";if((i>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return O(this,t,i);case"utf8":case"utf-8":return w(this,t,i);case"ascii":return x(this,t,i);case"latin1":case"binary":return C(this,t,i);case"base64":return E(this,t,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return R(this,t,i);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function _(e,t,i){const r=e[t];e[t]=e[i],e[i]=r}function b(e,t,i,r,n){if(0===e.length)return-1;if("string"==typeof i?(r=i,i=0):i>2147483647?i=2147483647:i<-2147483648&&(i=-2147483648),K(i=+i)&&(i=n?0:e.length-1),i<0&&(i=e.length+i),i>=e.length){if(n)return-1;i=e.length-1}else if(i<0){if(!n)return-1;i=0}if("string"==typeof t&&(t=l.from(t,r)),l.isBuffer(t))return 0===t.length?-1:y(e,t,i,r,n);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?n?Uint8Array.prototype.indexOf.call(e,t,i):Uint8Array.prototype.lastIndexOf.call(e,t,i):y(e,[t],i,r,n);throw new TypeError("val must be string, number or Buffer")}function y(e,t,i,r,n){let s,a=1,o=e.length,l=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;a=2,o/=2,l/=2,i/=2}function c(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(n){let r=-1;for(s=i;s<o;s++)if(c(e,s)===c(t,-1===r?0:s-r)){if(-1===r&&(r=s),s-r+1===l)return r*a}else-1!==r&&(s-=s-r),r=-1}else for(i+l>o&&(i=o-l),s=i;s>=0;s--){let i=!0;for(let r=0;r<l;r++)if(c(e,s+r)!==c(t,r)){i=!1;break}if(i)return s}return-1}function S(e,t,i,r){i=Number(i)||0;const n=e.length-i;r?(r=Number(r))>n&&(r=n):r=n;const s=t.length;let a;for(r>s/2&&(r=s/2),a=0;a<r;++a){const r=parseInt(t.substr(2*a,2),16);if(K(r))return a;e[i+a]=r}return a}function v(e,t,i,r){return W(V(t,e.length-i),e,i,r)}function N(e,t,i,r){return W(function(e){const t=[];for(let i=0;i<e.length;++i)t.push(255&e.charCodeAt(i));return t}(t),e,i,r)}function T(e,t,i,r){return W($(t),e,i,r)}function A(e,t,i,r){return W(function(e,t){let i,r,n;const s=[];for(let a=0;a<e.length&&!((t-=2)<0);++a)i=e.charCodeAt(a),r=i>>8,n=i%256,s.push(n),s.push(r);return s}(t,e.length-i),e,i,r)}function E(e,t,i){return 0===t&&i===e.length?r.fromByteArray(e):r.fromByteArray(e.slice(t,i))}function w(e,t,i){i=Math.min(e.length,i);const r=[];let n=t;for(;n<i;){const t=e[n];let s=null,a=t>239?4:t>223?3:t>191?2:1;if(n+a<=i){let i,r,o,l;switch(a){case 1:t<128&&(s=t);break;case 2:i=e[n+1],128==(192&i)&&(l=(31&t)<<6|63&i,l>127&&(s=l));break;case 3:i=e[n+1],r=e[n+2],128==(192&i)&&128==(192&r)&&(l=(15&t)<<12|(63&i)<<6|63&r,l>2047&&(l<55296||l>57343)&&(s=l));break;case 4:i=e[n+1],r=e[n+2],o=e[n+3],128==(192&i)&&128==(192&r)&&128==(192&o)&&(l=(15&t)<<18|(63&i)<<12|(63&r)<<6|63&o,l>65535&&l<1114112&&(s=l))}}null===s?(s=65533,a=1):s>65535&&(s-=65536,r.push(s>>>10&1023|55296),s=56320|1023&s),r.push(s),n+=a}return function(e){const t=e.length;if(t<=I)return String.fromCharCode.apply(String,e);let i="",r=0;for(;r<t;)i+=String.fromCharCode.apply(String,e.slice(r,r+=I));return i}(r)}t.kMaxLength=a,l.TYPED_ARRAY_SUPPORT=function(){try{const e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),l.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(l.prototype,"parent",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.buffer}}),Object.defineProperty(l.prototype,"offset",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.byteOffset}}),l.poolSize=8192,l.from=function(e,t,i){return c(e,t,i)},Object.setPrototypeOf(l.prototype,Uint8Array.prototype),Object.setPrototypeOf(l,Uint8Array),l.alloc=function(e,t,i){return function(e,t,i){return u(e),e<=0?o(e):void 0!==t?"string"==typeof i?o(e).fill(t,i):o(e).fill(t):o(e)}(e,t,i)},l.allocUnsafe=function(e){return p(e)},l.allocUnsafeSlow=function(e){return p(e)},l.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==l.prototype},l.compare=function(e,t){if(Q(e,Uint8Array)&&(e=l.from(e,e.offset,e.byteLength)),Q(t,Uint8Array)&&(t=l.from(t,t.offset,t.byteLength)),!l.isBuffer(e)||!l.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let i=e.length,r=t.length;for(let n=0,s=Math.min(i,r);n<s;++n)if(e[n]!==t[n]){i=e[n],r=t[n];break}return i<r?-1:r<i?1:0},l.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return l.alloc(0);let i;if(void 0===t)for(t=0,i=0;i<e.length;++i)t+=e[i].length;const r=l.allocUnsafe(t);let n=0;for(i=0;i<e.length;++i){let t=e[i];if(Q(t,Uint8Array))n+t.length>r.length?(l.isBuffer(t)||(t=l.from(t)),t.copy(r,n)):Uint8Array.prototype.set.call(r,t,n);else{if(!l.isBuffer(t))throw new TypeError('"list" argument must be an Array of Buffers');t.copy(r,n)}n+=t.length}return r},l.byteLength=m,l.prototype._isBuffer=!0,l.prototype.swap16=function(){const e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)_(this,t,t+1);return this},l.prototype.swap32=function(){const e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)_(this,t,t+3),_(this,t+1,t+2);return this},l.prototype.swap64=function(){const e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)_(this,t,t+7),_(this,t+1,t+6),_(this,t+2,t+5),_(this,t+3,t+4);return this},l.prototype.toString=function(){const e=this.length;return 0===e?"":0===arguments.length?w(this,0,e):g.apply(this,arguments)},l.prototype.toLocaleString=l.prototype.toString,l.prototype.equals=function(e){if(!l.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===l.compare(this,e)},l.prototype.inspect=function(){let e="";const i=t.INSPECT_MAX_BYTES;return e=this.toString("hex",0,i).replace(/(.{2})/g,"$1 ").trim(),this.length>i&&(e+=" ... "),"<Buffer "+e+">"},s&&(l.prototype[s]=l.prototype.inspect),l.prototype.compare=function(e,t,i,r,n){if(Q(e,Uint8Array)&&(e=l.from(e,e.offset,e.byteLength)),!l.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===i&&(i=e?e.length:0),void 0===r&&(r=0),void 0===n&&(n=this.length),t<0||i>e.length||r<0||n>this.length)throw new RangeError("out of range index");if(r>=n&&t>=i)return 0;if(r>=n)return-1;if(t>=i)return 1;if(this===e)return 0;let s=(n>>>=0)-(r>>>=0),a=(i>>>=0)-(t>>>=0);const o=Math.min(s,a),c=this.slice(r,n),u=e.slice(t,i);for(let e=0;e<o;++e)if(c[e]!==u[e]){s=c[e],a=u[e];break}return s<a?-1:a<s?1:0},l.prototype.includes=function(e,t,i){return-1!==this.indexOf(e,t,i)},l.prototype.indexOf=function(e,t,i){return b(this,e,t,i,!0)},l.prototype.lastIndexOf=function(e,t,i){return b(this,e,t,i,!1)},l.prototype.write=function(e,t,i,r){if(void 0===t)r="utf8",i=this.length,t=0;else if(void 0===i&&"string"==typeof t)r=t,i=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(i)?(i>>>=0,void 0===r&&(r="utf8")):(r=i,i=void 0)}const n=this.length-t;if((void 0===i||i>n)&&(i=n),e.length>0&&(i<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");let s=!1;for(;;)switch(r){case"hex":return S(this,e,t,i);case"utf8":case"utf-8":return v(this,e,t,i);case"ascii":case"latin1":case"binary":return N(this,e,t,i);case"base64":return T(this,e,t,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return A(this,e,t,i);default:if(s)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),s=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const I=4096;function x(e,t,i){let r="";i=Math.min(e.length,i);for(let n=t;n<i;++n)r+=String.fromCharCode(127&e[n]);return r}function C(e,t,i){let r="";i=Math.min(e.length,i);for(let n=t;n<i;++n)r+=String.fromCharCode(e[n]);return r}function O(e,t,i){const r=e.length;(!t||t<0)&&(t=0),(!i||i<0||i>r)&&(i=r);let n="";for(let r=t;r<i;++r)n+=X[e[r]];return n}function R(e,t,i){const r=e.slice(t,i);let n="";for(let e=0;e<r.length-1;e+=2)n+=String.fromCharCode(r[e]+256*r[e+1]);return n}function P(e,t,i){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>i)throw new RangeError("Trying to access beyond buffer length")}function j(e,t,i,r,n,s){if(!l.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>n||t<s)throw new RangeError('"value" argument is out of bounds');if(i+r>e.length)throw new RangeError("Index out of range")}function k(e,t,i,r,n){J(t,r,n,e,i,7);let s=Number(t&BigInt(4294967295));e[i++]=s,s>>=8,e[i++]=s,s>>=8,e[i++]=s,s>>=8,e[i++]=s;let a=Number(t>>BigInt(32)&BigInt(4294967295));return e[i++]=a,a>>=8,e[i++]=a,a>>=8,e[i++]=a,a>>=8,e[i++]=a,i}function M(e,t,i,r,n){J(t,r,n,e,i,7);let s=Number(t&BigInt(4294967295));e[i+7]=s,s>>=8,e[i+6]=s,s>>=8,e[i+5]=s,s>>=8,e[i+4]=s;let a=Number(t>>BigInt(32)&BigInt(4294967295));return e[i+3]=a,a>>=8,e[i+2]=a,a>>=8,e[i+1]=a,a>>=8,e[i]=a,i+8}function L(e,t,i,r,n,s){if(i+r>e.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("Index out of range")}function D(e,t,i,r,s){return t=+t,i>>>=0,s||L(e,0,i,4),n.write(e,t,i,r,23,4),i+4}function F(e,t,i,r,s){return t=+t,i>>>=0,s||L(e,0,i,8),n.write(e,t,i,r,52,8),i+8}l.prototype.slice=function(e,t){const i=this.length;(e=~~e)<0?(e+=i)<0&&(e=0):e>i&&(e=i),(t=void 0===t?i:~~t)<0?(t+=i)<0&&(t=0):t>i&&(t=i),t<e&&(t=e);const r=this.subarray(e,t);return Object.setPrototypeOf(r,l.prototype),r},l.prototype.readUintLE=l.prototype.readUIntLE=function(e,t,i){e>>>=0,t>>>=0,i||P(e,t,this.length);let r=this[e],n=1,s=0;for(;++s<t&&(n*=256);)r+=this[e+s]*n;return r},l.prototype.readUintBE=l.prototype.readUIntBE=function(e,t,i){e>>>=0,t>>>=0,i||P(e,t,this.length);let r=this[e+--t],n=1;for(;t>0&&(n*=256);)r+=this[e+--t]*n;return r},l.prototype.readUint8=l.prototype.readUInt8=function(e,t){return e>>>=0,t||P(e,1,this.length),this[e]},l.prototype.readUint16LE=l.prototype.readUInt16LE=function(e,t){return e>>>=0,t||P(e,2,this.length),this[e]|this[e+1]<<8},l.prototype.readUint16BE=l.prototype.readUInt16BE=function(e,t){return e>>>=0,t||P(e,2,this.length),this[e]<<8|this[e+1]},l.prototype.readUint32LE=l.prototype.readUInt32LE=function(e,t){return e>>>=0,t||P(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},l.prototype.readUint32BE=l.prototype.readUInt32BE=function(e,t){return e>>>=0,t||P(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},l.prototype.readBigUInt64LE=Y((function(e){G(e>>>=0,"offset");const t=this[e],i=this[e+7];void 0!==t&&void 0!==i||z(e,this.length-8);const r=t+256*this[++e]+65536*this[++e]+this[++e]*2**24,n=this[++e]+256*this[++e]+65536*this[++e]+i*2**24;return BigInt(r)+(BigInt(n)<<BigInt(32))})),l.prototype.readBigUInt64BE=Y((function(e){G(e>>>=0,"offset");const t=this[e],i=this[e+7];void 0!==t&&void 0!==i||z(e,this.length-8);const r=t*2**24+65536*this[++e]+256*this[++e]+this[++e],n=this[++e]*2**24+65536*this[++e]+256*this[++e]+i;return(BigInt(r)<<BigInt(32))+BigInt(n)})),l.prototype.readIntLE=function(e,t,i){e>>>=0,t>>>=0,i||P(e,t,this.length);let r=this[e],n=1,s=0;for(;++s<t&&(n*=256);)r+=this[e+s]*n;return n*=128,r>=n&&(r-=Math.pow(2,8*t)),r},l.prototype.readIntBE=function(e,t,i){e>>>=0,t>>>=0,i||P(e,t,this.length);let r=t,n=1,s=this[e+--r];for(;r>0&&(n*=256);)s+=this[e+--r]*n;return n*=128,s>=n&&(s-=Math.pow(2,8*t)),s},l.prototype.readInt8=function(e,t){return e>>>=0,t||P(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},l.prototype.readInt16LE=function(e,t){e>>>=0,t||P(e,2,this.length);const i=this[e]|this[e+1]<<8;return 32768&i?4294901760|i:i},l.prototype.readInt16BE=function(e,t){e>>>=0,t||P(e,2,this.length);const i=this[e+1]|this[e]<<8;return 32768&i?4294901760|i:i},l.prototype.readInt32LE=function(e,t){return e>>>=0,t||P(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},l.prototype.readInt32BE=function(e,t){return e>>>=0,t||P(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},l.prototype.readBigInt64LE=Y((function(e){G(e>>>=0,"offset");const t=this[e],i=this[e+7];void 0!==t&&void 0!==i||z(e,this.length-8);const r=this[e+4]+256*this[e+5]+65536*this[e+6]+(i<<24);return(BigInt(r)<<BigInt(32))+BigInt(t+256*this[++e]+65536*this[++e]+this[++e]*2**24)})),l.prototype.readBigInt64BE=Y((function(e){G(e>>>=0,"offset");const t=this[e],i=this[e+7];void 0!==t&&void 0!==i||z(e,this.length-8);const r=(t<<24)+65536*this[++e]+256*this[++e]+this[++e];return(BigInt(r)<<BigInt(32))+BigInt(this[++e]*2**24+65536*this[++e]+256*this[++e]+i)})),l.prototype.readFloatLE=function(e,t){return e>>>=0,t||P(e,4,this.length),n.read(this,e,!0,23,4)},l.prototype.readFloatBE=function(e,t){return e>>>=0,t||P(e,4,this.length),n.read(this,e,!1,23,4)},l.prototype.readDoubleLE=function(e,t){return e>>>=0,t||P(e,8,this.length),n.read(this,e,!0,52,8)},l.prototype.readDoubleBE=function(e,t){return e>>>=0,t||P(e,8,this.length),n.read(this,e,!1,52,8)},l.prototype.writeUintLE=l.prototype.writeUIntLE=function(e,t,i,r){e=+e,t>>>=0,i>>>=0,r||j(this,e,t,i,Math.pow(2,8*i)-1,0);let n=1,s=0;for(this[t]=255&e;++s<i&&(n*=256);)this[t+s]=e/n&255;return t+i},l.prototype.writeUintBE=l.prototype.writeUIntBE=function(e,t,i,r){e=+e,t>>>=0,i>>>=0,r||j(this,e,t,i,Math.pow(2,8*i)-1,0);let n=i-1,s=1;for(this[t+n]=255&e;--n>=0&&(s*=256);)this[t+n]=e/s&255;return t+i},l.prototype.writeUint8=l.prototype.writeUInt8=function(e,t,i){return e=+e,t>>>=0,i||j(this,e,t,1,255,0),this[t]=255&e,t+1},l.prototype.writeUint16LE=l.prototype.writeUInt16LE=function(e,t,i){return e=+e,t>>>=0,i||j(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},l.prototype.writeUint16BE=l.prototype.writeUInt16BE=function(e,t,i){return e=+e,t>>>=0,i||j(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},l.prototype.writeUint32LE=l.prototype.writeUInt32LE=function(e,t,i){return e=+e,t>>>=0,i||j(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},l.prototype.writeUint32BE=l.prototype.writeUInt32BE=function(e,t,i){return e=+e,t>>>=0,i||j(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},l.prototype.writeBigUInt64LE=Y((function(e,t=0){return k(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))})),l.prototype.writeBigUInt64BE=Y((function(e,t=0){return M(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))})),l.prototype.writeIntLE=function(e,t,i,r){if(e=+e,t>>>=0,!r){const r=Math.pow(2,8*i-1);j(this,e,t,i,r-1,-r)}let n=0,s=1,a=0;for(this[t]=255&e;++n<i&&(s*=256);)e<0&&0===a&&0!==this[t+n-1]&&(a=1),this[t+n]=(e/s>>0)-a&255;return t+i},l.prototype.writeIntBE=function(e,t,i,r){if(e=+e,t>>>=0,!r){const r=Math.pow(2,8*i-1);j(this,e,t,i,r-1,-r)}let n=i-1,s=1,a=0;for(this[t+n]=255&e;--n>=0&&(s*=256);)e<0&&0===a&&0!==this[t+n+1]&&(a=1),this[t+n]=(e/s>>0)-a&255;return t+i},l.prototype.writeInt8=function(e,t,i){return e=+e,t>>>=0,i||j(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},l.prototype.writeInt16LE=function(e,t,i){return e=+e,t>>>=0,i||j(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},l.prototype.writeInt16BE=function(e,t,i){return e=+e,t>>>=0,i||j(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},l.prototype.writeInt32LE=function(e,t,i){return e=+e,t>>>=0,i||j(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},l.prototype.writeInt32BE=function(e,t,i){return e=+e,t>>>=0,i||j(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},l.prototype.writeBigInt64LE=Y((function(e,t=0){return k(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),l.prototype.writeBigInt64BE=Y((function(e,t=0){return M(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),l.prototype.writeFloatLE=function(e,t,i){return D(this,e,t,!0,i)},l.prototype.writeFloatBE=function(e,t,i){return D(this,e,t,!1,i)},l.prototype.writeDoubleLE=function(e,t,i){return F(this,e,t,!0,i)},l.prototype.writeDoubleBE=function(e,t,i){return F(this,e,t,!1,i)},l.prototype.copy=function(e,t,i,r){if(!l.isBuffer(e))throw new TypeError("argument should be a Buffer");if(i||(i=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<i&&(r=i),r===i)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(i<0||i>=this.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-i&&(r=e.length-t+i);const n=r-i;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,i,r):Uint8Array.prototype.set.call(e,this.subarray(i,r),t),n},l.prototype.fill=function(e,t,i,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,i=this.length):"string"==typeof i&&(r=i,i=this.length),void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!l.isEncoding(r))throw new TypeError("Unknown encoding: "+r);if(1===e.length){const t=e.charCodeAt(0);("utf8"===r&&t<128||"latin1"===r)&&(e=t)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<i)throw new RangeError("Out of range index");if(i<=t)return this;let n;if(t>>>=0,i=void 0===i?this.length:i>>>0,e||(e=0),"number"==typeof e)for(n=t;n<i;++n)this[n]=e;else{const s=l.isBuffer(e)?e:l.from(e,r),a=s.length;if(0===a)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(n=0;n<i-t;++n)this[n+t]=s[n%a]}return this};const B={};function q(e,t,i){B[e]=class extends i{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${e}]`,this.stack,delete this.name}get code(){return e}set code(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}toString(){return`${this.name} [${e}]: ${this.message}`}}}function U(e){let t="",i=e.length;const r="-"===e[0]?1:0;for(;i>=r+4;i-=3)t=`_${e.slice(i-3,i)}${t}`;return`${e.slice(0,i)}${t}`}function J(e,t,i,r,n,s){if(e>i||e<t){const r="bigint"==typeof t?"n":"";let n;throw n=s>3?0===t||t===BigInt(0)?`>= 0${r} and < 2${r} ** ${8*(s+1)}${r}`:`>= -(2${r} ** ${8*(s+1)-1}${r}) and < 2 ** ${8*(s+1)-1}${r}`:`>= ${t}${r} and <= ${i}${r}`,new B.ERR_OUT_OF_RANGE("value",n,e)}!function(e,t,i){G(t,"offset"),void 0!==e[t]&&void 0!==e[t+i]||z(t,e.length-(i+1))}(r,n,s)}function G(e,t){if("number"!=typeof e)throw new B.ERR_INVALID_ARG_TYPE(t,"number",e)}function z(e,t,i){if(Math.floor(e)!==e)throw G(e,i),new B.ERR_OUT_OF_RANGE(i||"offset","an integer",e);if(t<0)throw new B.ERR_BUFFER_OUT_OF_BOUNDS;throw new B.ERR_OUT_OF_RANGE(i||"offset",`>= ${i?1:0} and <= ${t}`,e)}q("ERR_BUFFER_OUT_OF_BOUNDS",(function(e){return e?`${e} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"}),RangeError),q("ERR_INVALID_ARG_TYPE",(function(e,t){return`The "${e}" argument must be of type number. Received type ${typeof t}`}),TypeError),q("ERR_OUT_OF_RANGE",(function(e,t,i){let r=`The value of "${e}" is out of range.`,n=i;return Number.isInteger(i)&&Math.abs(i)>2**32?n=U(String(i)):"bigint"==typeof i&&(n=String(i),(i>BigInt(2)**BigInt(32)||i<-(BigInt(2)**BigInt(32)))&&(n=U(n)),n+="n"),r+=` It must be ${t}. Received ${n}`,r}),RangeError);const H=/[^+/0-9A-Za-z-_]/g;function V(e,t){let i;t=t||1/0;const r=e.length;let n=null;const s=[];for(let a=0;a<r;++a){if(i=e.charCodeAt(a),i>55295&&i<57344){if(!n){if(i>56319){(t-=3)>-1&&s.push(239,191,189);continue}if(a+1===r){(t-=3)>-1&&s.push(239,191,189);continue}n=i;continue}if(i<56320){(t-=3)>-1&&s.push(239,191,189),n=i;continue}i=65536+(n-55296<<10|i-56320)}else n&&(t-=3)>-1&&s.push(239,191,189);if(n=null,i<128){if((t-=1)<0)break;s.push(i)}else if(i<2048){if((t-=2)<0)break;s.push(i>>6|192,63&i|128)}else if(i<65536){if((t-=3)<0)break;s.push(i>>12|224,i>>6&63|128,63&i|128)}else{if(!(i<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;s.push(i>>18|240,i>>12&63|128,i>>6&63|128,63&i|128)}}return s}function $(e){return r.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(H,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function W(e,t,i,r){let n;for(n=0;n<r&&!(n+i>=t.length||n>=e.length);++n)t[n+i]=e[n];return n}function Q(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function K(e){return e!=e}const X=function(){const e="0123456789abcdef",t=new Array(256);for(let i=0;i<16;++i){const r=16*i;for(let n=0;n<16;++n)t[r+n]=e[i]+e[n]}return t}();function Y(e){return"undefined"==typeof BigInt?Z:e}function Z(){throw new Error("BigInt not supported")}},9621:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=i(2646),n=i(1099);class s extends n.Transform{constructor(e,t,i="be"){super(),this._block=r.Buffer.alloc(e),this._finalSize=t,this._blockSize=e,this._bigEndian="be"===i,this._len=0}_transform(e,t,i){let r=null;try{this.update(e,t)}catch(e){r=e}i(r)}_flush(e){let t=null;try{this.push(this.digest())}catch(e){t=e}e(t)}update(e,t){"string"==typeof e&&(t=t||"utf8",e=r.Buffer.from(e,t));const i=this._block,n=this._blockSize,s=e.length;let a=this._len;for(let t=0;t<s;){const r=a%n,o=Math.min(s-t,n-r);for(let n=0;n<o;n++)i[r+n]=e[t+n];a+=o,t+=o,a%n==0&&this._update(i)}return this._len+=s,this}digest(e){const t=this._len%this._blockSize;this._block[t]=128,this._block.fill(0,t+1),t>=this._finalSize&&(this._update(this._block),this._block.fill(0));const i=8*this._len;if(i<=4294967295)this._bigEndian?(this._block.writeUInt32BE(0,this._blockSize-8),this._block.writeUInt32BE(i,this._blockSize-4)):(this._block.writeUInt32LE(i,this._blockSize-8),this._block.writeUInt32LE(0,this._blockSize-4));else{const e=(4294967295&i)>>>0,t=(i-e)/4294967296;this._bigEndian?(this._block.writeUInt32BE(t,this._blockSize-8),this._block.writeUInt32BE(e,this._blockSize-4)):(this._block.writeUInt32LE(e,this._blockSize-8),this._block.writeUInt32LE(t,this._blockSize-4))}this._update(this._block);const r=this._hash();return e?r.toString(e):r}_update(e){throw new Error("_update must be implemented by subclass")}_hash(){throw new Error("_update must be implemented by subclass")}}t.default=s},843:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=i(7582),n=i(2646),s=i(1099),a=(0,r.__importDefault)(i(2081)),o=n.Buffer.alloc(128);class l extends s.Transform{constructor(e,t){super(),"string"==typeof t&&(t=n.Buffer.from(t));const i="sha512"===e?128:64;this._alg=e,t.length>i?t=(0,a.default)(e).update(t).digest():t.length<i&&(t=n.Buffer.concat([t,o],i)),this._ipad=n.Buffer.alloc(i),this._opad=n.Buffer.alloc(i);for(let e=0;e<i;e++)this._ipad[e]=54^t[e],this._opad[e]=92^t[e];this._hash=(0,a.default)(e).update(this._ipad)}_transform(e,t,i){let r;try{this.update(e,t)}catch(e){r=e}finally{i(r)}}_flush(e){let t;try{this.push(this._final())}catch(e){t=e}e(t)}_final(){const e=this._hash.digest();return(0,a.default)(this._alg).update(this._opad).update(e).digest()}update(e,t){return this._hash.update(e,t),this}digest(e){const t=this._final()||n.Buffer.alloc(0);return e?t.toString(e):t}}t.default=l},1680:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=i(7582),n=i(2646),s=(0,r.__importDefault)(i(9621));function a(e,t){return e<<t|e>>>32-t}function o(e,t,i,r,n,s,o){return a(e+(t&i|~t&r)+n+s|0,o)+t|0}function l(e,t,i,r,n,s,o){return a(e+(t&r|i&~r)+n+s|0,o)+t|0}function c(e,t,i,r,n,s,o){return a(e+(t^i^r)+n+s|0,o)+t|0}function u(e,t,i,r,n,s,o){return a(e+(i^(t|~r))+n+s|0,o)+t|0}class p extends s.default{constructor(){super(64,56,"le"),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._m=new Array(16)}_update(e){const t=this._m;for(let i=0;i<16;++i)t[i]=e.readInt32LE(4*i);let i=this._a,r=this._b,n=this._c,s=this._d;i=o(i,r,n,s,t[0],3614090360,7),s=o(s,i,r,n,t[1],3905402710,12),n=o(n,s,i,r,t[2],606105819,17),r=o(r,n,s,i,t[3],3250441966,22),i=o(i,r,n,s,t[4],4118548399,7),s=o(s,i,r,n,t[5],1200080426,12),n=o(n,s,i,r,t[6],2821735955,17),r=o(r,n,s,i,t[7],4249261313,22),i=o(i,r,n,s,t[8],1770035416,7),s=o(s,i,r,n,t[9],2336552879,12),n=o(n,s,i,r,t[10],4294925233,17),r=o(r,n,s,i,t[11],2304563134,22),i=o(i,r,n,s,t[12],1804603682,7),s=o(s,i,r,n,t[13],4254626195,12),n=o(n,s,i,r,t[14],2792965006,17),r=o(r,n,s,i,t[15],1236535329,22),i=l(i,r,n,s,t[1],4129170786,5),s=l(s,i,r,n,t[6],3225465664,9),n=l(n,s,i,r,t[11],643717713,14),r=l(r,n,s,i,t[0],3921069994,20),i=l(i,r,n,s,t[5],3593408605,5),s=l(s,i,r,n,t[10],38016083,9),n=l(n,s,i,r,t[15],3634488961,14),r=l(r,n,s,i,t[4],3889429448,20),i=l(i,r,n,s,t[9],568446438,5),s=l(s,i,r,n,t[14],3275163606,9),n=l(n,s,i,r,t[3],4107603335,14),r=l(r,n,s,i,t[8],1163531501,20),i=l(i,r,n,s,t[13],2850285829,5),s=l(s,i,r,n,t[2],4243563512,9),n=l(n,s,i,r,t[7],1735328473,14),r=l(r,n,s,i,t[12],2368359562,20),i=c(i,r,n,s,t[5],4294588738,4),s=c(s,i,r,n,t[8],2272392833,11),n=c(n,s,i,r,t[11],1839030562,16),r=c(r,n,s,i,t[14],4259657740,23),i=c(i,r,n,s,t[1],2763975236,4),s=c(s,i,r,n,t[4],1272893353,11),n=c(n,s,i,r,t[7],4139469664,16),r=c(r,n,s,i,t[10],3200236656,23),i=c(i,r,n,s,t[13],681279174,4),s=c(s,i,r,n,t[0],3936430074,11),n=c(n,s,i,r,t[3],3572445317,16),r=c(r,n,s,i,t[6],76029189,23),i=c(i,r,n,s,t[9],3654602809,4),s=c(s,i,r,n,t[12],3873151461,11),n=c(n,s,i,r,t[15],530742520,16),r=c(r,n,s,i,t[2],3299628645,23),i=u(i,r,n,s,t[0],4096336452,6),s=u(s,i,r,n,t[7],1126891415,10),n=u(n,s,i,r,t[14],2878612391,15),r=u(r,n,s,i,t[5],4237533241,21),i=u(i,r,n,s,t[12],1700485571,6),s=u(s,i,r,n,t[3],2399980690,10),n=u(n,s,i,r,t[10],4293915773,15),r=u(r,n,s,i,t[1],2240044497,21),i=u(i,r,n,s,t[8],1873313359,6),s=u(s,i,r,n,t[15],4264355552,10),n=u(n,s,i,r,t[6],2734768916,15),r=u(r,n,s,i,t[13],1309151649,21),i=u(i,r,n,s,t[4],4149444226,6),s=u(s,i,r,n,t[11],3174756917,10),n=u(n,s,i,r,t[2],718787259,15),r=u(r,n,s,i,t[9],3951481745,21),this._a=this._a+i|0,this._b=this._b+r|0,this._c=this._c+n|0,this._d=this._d+s|0}_hash(){const e=n.Buffer.allocUnsafe(16);return e.writeInt32LE(this._a,0),e.writeInt32LE(this._b,4),e.writeInt32LE(this._c,8),e.writeInt32LE(this._d,12),e}}t.default=p},5301:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=i(7582),n=i(2646),s=(0,r.__importDefault)(i(9621)),a=[1518500249,1859775393,-1894007588,-899497514];function o(e){return e<<5|e>>>27}function l(e){return e<<30|e>>>2}function c(e,t,i,r){return 0===e?t&i|~t&r:2===e?t&i|t&r|i&r:t^i^r}class u extends s.default{constructor(){super(64,56),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this._w=new Array(80)}_update(e){const t=this._w;let i,r=0|this._a,n=0|this._b,s=0|this._c,u=0|this._d,p=0|this._e;for(i=0;i<16;++i)t[i]=e.readInt32BE(4*i);for(;i<80;++i)t[i]=(d=t[i-3]^t[i-8]^t[i-14]^t[i-16])<<1|d>>>31;var d;for(let e=0;e<80;++e){const i=~~(e/20),d=o(r)+c(i,n,s,u)+p+t[e]+a[i]|0;p=u,u=s,s=l(n),n=r,r=d}this._a=r+this._a|0,this._b=n+this._b|0,this._c=s+this._c|0,this._d=u+this._d|0,this._e=p+this._e|0}_hash(){const e=n.Buffer.allocUnsafe(20);return e.writeInt32BE(0|this._a,0),e.writeInt32BE(0|this._b,4),e.writeInt32BE(0|this._c,8),e.writeInt32BE(0|this._d,12),e.writeInt32BE(0|this._e,16),e}}t.default=u},1597:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=i(7582),n=i(2646),s=(0,r.__importDefault)(i(9621)),a=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function o(e,t,i){return i^e&(t^i)}function l(e,t,i){return e&t|i&(e|t)}function c(e){return(e>>>2|e<<30)^(e>>>13|e<<19)^(e>>>22|e<<10)}function u(e){return(e>>>6|e<<26)^(e>>>11|e<<21)^(e>>>25|e<<7)}function p(e){return(e>>>7|e<<25)^(e>>>18|e<<14)^e>>>3}class d extends s.default{constructor(){super(64,56),this._a=1779033703,this._b=3144134277,this._c=1013904242,this._d=2773480762,this._e=1359893119,this._f=2600822924,this._g=528734635,this._h=1541459225,this._w=new Array(64)}_update(e){const t=this._w;let i,r=0|this._a,n=0|this._b,s=0|this._c,d=0|this._d,h=0|this._e,f=0|this._f,m=0|this._g,g=0|this._h;for(i=0;i<16;++i)t[i]=e.readInt32BE(4*i);for(;i<64;++i)t[i]=0|(((_=t[i-2])>>>17|_<<15)^(_>>>19|_<<13)^_>>>10)+t[i-7]+p(t[i-15])+t[i-16];var _;for(let e=0;e<64;++e){const i=g+u(h)+o(h,f,m)+a[e]+t[e]|0,p=c(r)+l(r,n,s)|0;g=m,m=f,f=h,h=d+i|0,d=s,s=n,n=r,r=i+p|0}this._a=r+this._a|0,this._b=n+this._b|0,this._c=s+this._c|0,this._d=d+this._d|0,this._e=h+this._e|0,this._f=f+this._f|0,this._g=m+this._g|0,this._h=g+this._h|0}_hash(){const e=n.Buffer.allocUnsafe(32);return e.writeInt32BE(this._a,0),e.writeInt32BE(this._b,4),e.writeInt32BE(this._c,8),e.writeInt32BE(this._d,12),e.writeInt32BE(this._e,16),e.writeInt32BE(this._f,20),e.writeInt32BE(this._g,24),e.writeInt32BE(this._h,28),e}}t.default=d},4037:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=i(7582),n=i(2646),s=(0,r.__importDefault)(i(9621)),a=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function o(e,t,i){return i^e&(t^i)}function l(e,t,i){return e&t|i&(e|t)}function c(e,t){return(e>>>28|t<<4)^(t>>>2|e<<30)^(t>>>7|e<<25)}function u(e,t){return(e>>>14|t<<18)^(e>>>18|t<<14)^(t>>>9|e<<23)}function p(e,t){return(e>>>1|t<<31)^(e>>>8|t<<24)^e>>>7}function d(e,t){return(e>>>1|t<<31)^(e>>>8|t<<24)^(e>>>7|t<<25)}function h(e,t){return(e>>>19|t<<13)^(t>>>29|e<<3)^e>>>6}function f(e,t){return(e>>>19|t<<13)^(t>>>29|e<<3)^(e>>>6|t<<26)}function m(e,t){return e>>>0<t>>>0?1:0}class g extends s.default{constructor(){super(128,112),this._ah=1779033703,this._bh=3144134277,this._ch=1013904242,this._dh=2773480762,this._eh=1359893119,this._fh=2600822924,this._gh=528734635,this._hh=1541459225,this._al=4089235720,this._bl=2227873595,this._cl=4271175723,this._dl=1595750129,this._el=2917565137,this._fl=725511199,this._gl=4215389547,this._hl=327033209,this._w=new Array(160)}_update(e){const t=this._w;let i,r,n=0|this._ah,s=0|this._bh,g=0|this._ch,_=0|this._dh,b=0|this._eh,y=0|this._fh,S=0|this._gh,v=0|this._hh,N=0|this._al,T=0|this._bl,A=0|this._cl,E=0|this._dl,w=0|this._el,I=0|this._fl,x=0|this._gl,C=0|this._hl,O=0;for(O=0;O<32;O+=2)t[O]=e.readInt32BE(4*O),t[O+1]=e.readInt32BE(4*O+4);for(;O<160;O+=2){let e=t[O-30],n=t[O-30+1];const s=p(e,n),a=d(n,e);e=t[O-4],n=t[O-4+1];const o=h(e,n),l=f(n,e),c=t[O-14],u=t[O-14+1],g=t[O-32],_=t[O-32+1];r=a+u|0,i=s+c+m(r,a)|0,r=r+l|0,i=i+o+m(r,l)|0,r=r+_|0,i=i+g+m(r,_)|0,t[O]=i,t[O+1]=r}for(let e=0;e<160;e+=2){i=t[e],r=t[e+1];const p=l(n,s,g),d=l(N,T,A),h=c(n,N),f=c(N,n),O=u(b,w),R=u(w,b),P=a[e],j=a[e+1],k=o(b,y,S),M=o(w,I,x);let L=C+R|0,D=v+O+m(L,C)|0;L=L+M|0,D=D+k+m(L,M)|0,L=L+j|0,D=D+P+m(L,j)|0,L=L+r|0,D=D+i+m(L,r)|0;const F=f+d|0,B=h+p+m(F,f)|0;v=S,C=x,S=y,x=I,y=b,I=w,w=E+L|0,b=_+D+m(w,E)|0,_=g,E=A,g=s,A=T,s=n,T=N,N=L+F|0,n=D+B+m(N,L)|0}this._al=this._al+N|0,this._bl=this._bl+T|0,this._cl=this._cl+A|0,this._dl=this._dl+E|0,this._el=this._el+w|0,this._fl=this._fl+I|0,this._gl=this._gl+x|0,this._hl=this._hl+C|0,this._ah=this._ah+n+m(this._al,N)|0,this._bh=this._bh+s+m(this._bl,T)|0,this._ch=this._ch+g+m(this._cl,A)|0,this._dh=this._dh+_+m(this._dl,E)|0,this._eh=this._eh+b+m(this._el,w)|0,this._fh=this._fh+y+m(this._fl,I)|0,this._gh=this._gh+S+m(this._gl,x)|0,this._hh=this._hh+v+m(this._hl,C)|0}_hash(){const e=n.Buffer.allocUnsafe(64);function t(t,i,r){e.writeInt32BE(t,r),e.writeInt32BE(i,r+4)}return t(this._ah,this._al,0),t(this._bh,this._bl,8),t(this._ch,this._cl,16),t(this._dh,this._dl,24),t(this._eh,this._el,32),t(this._fh,this._fl,40),t(this._gh,this._gl,48),t(this._hh,this._hl,56),e}}t.default=g},2081:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Hash=void 0;const r=i(7582),n=(0,r.__importDefault)(i(9621));t.Hash=n.default;const s=(0,r.__importDefault)(i(1680)),a=(0,r.__importDefault)(i(5301)),o=(0,r.__importDefault)(i(1597)),l=(0,r.__importDefault)(i(4037)),c=new Map([["md5",s.default],["sha-1",a.default],["sha-256",o.default],["sha-512",l.default],["sha1",a.default],["sha256",o.default],["sha512",l.default]]);t.default=function(e){e=e.toLowerCase();const t=c.get(e);if(t)return new t;throw new Error("Unsupported hash algorithm: "+e)}},4142:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PassThrough=t.Duplex=t.Transform=t.Writable=t.Readable=t.WebSocket=t.RTCPeerConnection=t.fetch=t.Hmac=t.Hash=t.createHash=t.Buffer=t.name=t.createResolver=t.createHmac=t.getHashes=t.randomBytes=void 0;const r=i(7582),n=i(2646);Object.defineProperty(t,"Buffer",{enumerable:!0,get:function(){return n.Buffer}});const s=(0,r.__importStar)(i(2081));t.createHash=s.default,Object.defineProperty(t,"Hash",{enumerable:!0,get:function(){return s.Hash}});const a=(0,r.__importDefault)(i(843));t.Hmac=a.default;const o=i(1099);Object.defineProperty(t,"Readable",{enumerable:!0,get:function(){return o.Readable}}),Object.defineProperty(t,"Writable",{enumerable:!0,get:function(){return o.Writable}}),Object.defineProperty(t,"Transform",{enumerable:!0,get:function(){return o.Transform}}),Object.defineProperty(t,"PassThrough",{enumerable:!0,get:function(){return o.PassThrough}}),Object.defineProperty(t,"Duplex",{enumerable:!0,get:function(){return o.Duplex}}),t.randomBytes=function(e){const t=new Uint8Array(e);return e>0&&(globalThis.crypto||globalThis.msCrypto).getRandomValues(t),n.Buffer.from(t.buffer)},t.getHashes=function(){return["sha-1","sha-256","sha-512","md5"]},t.createHmac=function(e,t){return new a.default(e.toLowerCase(),t)},t.createResolver=function(){};const l=globalThis.fetch.bind(globalThis);t.fetch=l;const c=globalThis.WebSocket;t.WebSocket=c;const u=globalThis.RTCPeerConnection;t.RTCPeerConnection=u,t.name="browser"},8723:(e,t)=>{function i(e,t){this.fun=e,this.array=t}i.prototype.run=function(){this.fun.apply(null,this.array)};var r,n=[],s=!1,a=-1;function o(){s&&r&&(s=!1,r.length?n=r.concat(n):a=-1,n.length&&l())}function l(){if(!s){var e=setTimeout(o,0);s=!0;for(var t=n.length;t;){for(r=n,n=[];++a<t;)r&&r[a].run();a=-1,t=n.length}r=null,s=!1,clearTimeout(e)}}t.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];n.push(new i(e,t)),1!==n.length||s||setTimeout(l,0)}},1099:(e,t,i)=>{t.Readable=i(9037),t.Writable=i(4177),t.Duplex=i(8760),t.Transform=i(7424),t.PassThrough=i(2563)},8760:(e,t,i)=>{var r=i(8723),n=Object.keys||function(e){var t=[];for(var i in e)t.push(i);return t};e.exports=p;var s=Object.create(i(9613)),a=i(9037),o=i(4177);s.inherits(p,a);for(var l=n(o.prototype),c=0;c<l.length;c++){var u=l[c];p.prototype[u]||(p.prototype[u]=o.prototype[u])}function p(e){if(!(this instanceof p))return new p(e);a.call(this,e),o.call(this,e),e&&!1===e.readable&&(this.readable=!1),e&&!1===e.writable&&(this.writable=!1),this.allowHalfOpen=!0,e&&!1===e.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",d)}function d(){this.allowHalfOpen||this._writableState.ended||r.nextTick(h,this)}function h(e){e.end()}Object.defineProperty(p.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(p.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}}),p.prototype._destroy=function(e,t){this.push(null),this.end(),r.nextTick(t,e)}},2563:(e,t,i)=>{e.exports=n;var r=i(7424);function n(e){if(!(this instanceof n))return new n(e);r.call(this,e)}Object.create(i(9613)).inherits(n,r),n.prototype._transform=function(e,t,i){i(null,e)}},9037:(e,t,i)=>{var r,n=i(8723);e.exports=g,g.ReadableState=m,i(7187).EventEmitter;var s,a=function(e,t){return e.listeners(t).length},o=i(7187).EventEmitter,l=i(2646).Buffer,c=i.g.Uint8Array||function(){},u=Object.create(i(9613)),p=function(){},d=i(927).n,h=i(4599);u.inherits(g,o);var f=["error","close","destroy","pause","resume"];function m(e,t){e=e||{};var n=t instanceof(r=r||i(8760));this.objectMode=!!e.objectMode,n&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var a=e.highWaterMark,o=e.readableHighWaterMark,l=this.objectMode?16:16384;this.highWaterMark=a||0===a?a:n&&(o||0===o)?o:l,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new d,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(s||(s=i(4331).s),this.decoder=new s(e.encoding),this.encoding=e.encoding)}function g(e){if(r=r||i(8760),!(this instanceof g))return new g(e);this._readableState=new m(e,this),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),o.call(this)}function _(e,t,i,r,n){var s,a=e._readableState;return null===t?(a.reading=!1,function(e,t){if(!t.ended){if(t.decoder){var i=t.decoder.end();i&&i.length&&(t.buffer.push(i),t.length+=t.objectMode?1:i.length)}t.ended=!0,v(e)}}(e,a)):(n||(s=function(e,t){var i,r;return r=t,l.isBuffer(r)||r instanceof c||"string"==typeof t||void 0===t||e.objectMode||(i=new TypeError("Invalid non-string/buffer chunk")),i}(a,t)),s?e.emit("error",s):a.objectMode||t&&t.length>0?("string"==typeof t||a.objectMode||Object.getPrototypeOf(t)===l.prototype||(t=function(e){return l.from(e)}(t)),r?a.endEmitted?e.emit("error",new Error("stream.unshift() after end event")):b(e,a,t,!0):a.ended?e.emit("error",new Error("stream.push() after EOF")):(a.reading=!1,a.decoder&&!i?(t=a.decoder.write(t),a.objectMode||0!==t.length?b(e,a,t,!1):T(e,a)):b(e,a,t,!1))):r||(a.reading=!1)),function(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}(a)}function b(e,t,i,r){t.flowing&&0===t.length&&!t.sync?(e.emit("data",i),e.read(0)):(t.length+=t.objectMode?1:i.length,r?t.buffer.unshift(i):t.buffer.push(i),t.needReadable&&v(e)),T(e,t)}Object.defineProperty(g.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),g.prototype.destroy=h.destroy,g.prototype._undestroy=h.undestroy,g.prototype._destroy=function(e,t){this.push(null),t(e)},g.prototype.push=function(e,t){var i,r=this._readableState;return r.objectMode?i=!0:"string"==typeof e&&((t=t||r.defaultEncoding)!==r.encoding&&(e=l.from(e,t),t=""),i=!0),_(this,e,t,!1,i)},g.prototype.unshift=function(e){return _(this,e,null,!0,!1)},g.prototype.isPaused=function(){return!1===this._readableState.flowing},g.prototype.setEncoding=function(e){return s||(s=i(4331).s),this._readableState.decoder=new s(e),this._readableState.encoding=e,this};var y=8388608;function S(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=y?e=y:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function v(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(p("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?n.nextTick(N,e):N(e))}function N(e){p("emit readable"),e.emit("readable"),I(e)}function T(e,t){t.readingMore||(t.readingMore=!0,n.nextTick(A,e,t))}function A(e,t){for(var i=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(p("maybeReadMore read 0"),e.read(0),i!==t.length);)i=t.length;t.readingMore=!1}function E(e){p("readable nexttick read 0"),e.read(0)}function w(e,t){t.reading||(p("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),I(e),t.flowing&&!t.reading&&e.read(0)}function I(e){var t=e._readableState;for(p("flow",t.flowing);t.flowing&&null!==e.read(););}function x(e,t){return 0===t.length?null:(t.objectMode?i=t.buffer.shift():!e||e>=t.length?(i=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.head.data:t.buffer.concat(t.length),t.buffer.clear()):i=function(e,t,i){var r;return e<t.head.data.length?(r=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):r=e===t.head.data.length?t.shift():i?function(e,t){var i=t.head,r=1,n=i.data;for(e-=n.length;i=i.next;){var s=i.data,a=e>s.length?s.length:e;if(a===s.length?n+=s:n+=s.slice(0,e),0==(e-=a)){a===s.length?(++r,i.next?t.head=i.next:t.head=t.tail=null):(t.head=i,i.data=s.slice(a));break}++r}return t.length-=r,n}(e,t):function(e,t){var i=l.allocUnsafe(e),r=t.head,n=1;for(r.data.copy(i),e-=r.data.length;r=r.next;){var s=r.data,a=e>s.length?s.length:e;if(s.copy(i,i.length-e,0,a),0==(e-=a)){a===s.length?(++n,r.next?t.head=r.next:t.head=t.tail=null):(t.head=r,r.data=s.slice(a));break}++n}return t.length-=n,i}(e,t),r}(e,t.buffer,t.decoder),i);var i}function C(e){var t=e._readableState;if(t.length>0)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,n.nextTick(O,t,e))}function O(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function R(e,t){for(var i=0,r=e.length;i<r;i++)if(e[i]===t)return i;return-1}g.prototype.read=function(e){p("read",e),e=parseInt(e,10);var t=this._readableState,i=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return p("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?C(this):v(this),null;if(0===(e=S(e,t))&&t.ended)return 0===t.length&&C(this),null;var r,n=t.needReadable;return p("need readable",n),(0===t.length||t.length-e<t.highWaterMark)&&p("length less than watermark",n=!0),t.ended||t.reading?p("reading or ended",n=!1):n&&(p("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=S(i,t))),null===(r=e>0?x(e,t):null)?(t.needReadable=!0,e=0):t.length-=e,0===t.length&&(t.ended||(t.needReadable=!0),i!==e&&t.ended&&C(this)),null!==r&&this.emit("data",r),r},g.prototype._read=function(e){this.emit("error",new Error("_read() is not implemented"))},g.prototype.pipe=function(e,t){var i=this,r=this._readableState;switch(r.pipesCount){case 0:r.pipes=e;break;case 1:r.pipes=[r.pipes,e];break;default:r.pipes.push(e)}r.pipesCount+=1,p("pipe count=%d opts=%j",r.pipesCount,t);var s=t&&!1===t.end||e===process.stdout||e===process.stderr?g:o;function o(){p("onend"),e.end()}r.endEmitted?n.nextTick(s):i.once("end",s),e.on("unpipe",(function t(n,s){p("onunpipe"),n===i&&s&&!1===s.hasUnpiped&&(s.hasUnpiped=!0,p("cleanup"),e.removeListener("close",f),e.removeListener("finish",m),e.removeListener("drain",l),e.removeListener("error",h),e.removeListener("unpipe",t),i.removeListener("end",o),i.removeListener("end",g),i.removeListener("data",d),c=!0,!r.awaitDrain||e._writableState&&!e._writableState.needDrain||l())}));var l=function(e){return function(){var t=e._readableState;p("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&a(e,"data")&&(t.flowing=!0,I(e))}}(i);e.on("drain",l);var c=!1,u=!1;function d(t){p("ondata"),u=!1,!1!==e.write(t)||u||((1===r.pipesCount&&r.pipes===e||r.pipesCount>1&&-1!==R(r.pipes,e))&&!c&&(p("false write response, pause",i._readableState.awaitDrain),i._readableState.awaitDrain++,u=!0),i.pause())}function h(t){p("onerror",t),g(),e.removeListener("error",h),0===a(e,"error")&&e.emit("error",t)}function f(){e.removeListener("finish",m),g()}function m(){p("onfinish"),e.removeListener("close",f),g()}function g(){p("unpipe"),i.unpipe(e)}return i.on("data",d),function(e,t,i){if("function"==typeof e.prependListener)return e.prependListener(t,i);e._events&&e._events[t]?Array.isArray(e._events[t])?e._events[t].unshift(i):e._events[t]=[i,e._events[t]]:e.on(t,i)}(e,"error",h),e.once("close",f),e.once("finish",m),e.emit("pipe",i),r.flowing||(p("pipe resume"),i.resume()),e},g.prototype.unpipe=function(e){var t=this._readableState,i={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,i)),this;if(!e){var r=t.pipes,n=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var s=0;s<n;s++)r[s].emit("unpipe",this,i);return this}var a=R(t.pipes,e);return-1===a||(t.pipes.splice(a,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,i)),this},g.prototype.on=function(e,t){var i=o.prototype.on.call(this,e,t);if("data"===e)!1!==this._readableState.flowing&&this.resume();else if("readable"===e){var r=this._readableState;r.endEmitted||r.readableListening||(r.readableListening=r.needReadable=!0,r.emittedReadable=!1,r.reading?r.length&&v(this):n.nextTick(E,this))}return i},g.prototype.addListener=g.prototype.on,g.prototype.resume=function(){var e=this._readableState;return e.flowing||(p("resume"),e.flowing=!0,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,n.nextTick(w,e,t))}(this,e)),this},g.prototype.pause=function(){return p("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(p("pause"),this._readableState.flowing=!1,this.emit("pause")),this},g.prototype.wrap=function(e){var t=this,i=this._readableState,r=!1;for(var n in e.on("end",(function(){if(p("wrapped end"),i.decoder&&!i.ended){var e=i.decoder.end();e&&e.length&&t.push(e)}t.push(null)})),e.on("data",(function(n){p("wrapped data"),i.decoder&&(n=i.decoder.write(n)),i.objectMode&&null==n||(i.objectMode||n&&n.length)&&(t.push(n)||(r=!0,e.pause()))})),e)void 0===this[n]&&"function"==typeof e[n]&&(this[n]=function(t){return function(){return e[t].apply(e,arguments)}}(n));for(var s=0;s<f.length;s++)e.on(f[s],this.emit.bind(this,f[s]));return this._read=function(t){p("wrapped _read",t),r&&(r=!1,e.resume())},this},Object.defineProperty(g.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),g._fromList=x},7424:(e,t,i)=>{e.exports=s;var r=i(8760);function n(e,t){var i=this._transformState;i.transforming=!1;var r=i.writecb;if(!r)return this.emit("error",new Error("write callback called multiple times"));i.writechunk=null,i.writecb=null,null!=t&&this.push(t),r(e);var n=this._readableState;n.reading=!1,(n.needReadable||n.length<n.highWaterMark)&&this._read(n.highWaterMark)}function s(e){if(!(this instanceof s))return new s(e);r.call(this,e),this._transformState={afterTransform:n.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",a)}function a(){var e=this;"function"==typeof this._flush?this._flush((function(t,i){o(e,t,i)})):o(this,null,null)}function o(e,t,i){if(t)return e.emit("error",t);if(null!=i&&e.push(i),e._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(e._transformState.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}Object.create(i(9613)).inherits(s,r),s.prototype.push=function(e,t){return this._transformState.needTransform=!1,r.prototype.push.call(this,e,t)},s.prototype._transform=function(e,t,i){throw new Error("_transform() is not implemented")},s.prototype._write=function(e,t,i){var r=this._transformState;if(r.writecb=i,r.writechunk=e,r.writeencoding=t,!r.transforming){var n=this._readableState;(r.needTransform||n.needReadable||n.length<n.highWaterMark)&&this._read(n.highWaterMark)}},s.prototype._read=function(e){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0},s.prototype._destroy=function(e,t){var i=this;r.prototype._destroy.call(this,e,(function(e){t(e),i.emit("close")}))}},4177:(e,t,i)=>{var r=i(8723);function n(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,i){var r=e.entry;for(e.entry=null;r;){var n=r.callback;t.pendingcb--,n(undefined),r=r.next}t.corkedRequestsFree?t.corkedRequestsFree.next=e:t.corkedRequestsFree=e}(t,e)}}e.exports=m;var s,a=r.nextTick;m.WritableState=f;var o,l=Object.create(i(9613)),c=i(7187).EventEmitter,u=i(2646).Buffer,p=i.g.Uint8Array||function(){},d=i(4599);function h(){}function f(e,t){s=s||i(8760),e=e||{};var o=t instanceof s;this.objectMode=!!e.objectMode,o&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var l=e.highWaterMark,c=e.writableHighWaterMark,u=this.objectMode?16:16384;this.highWaterMark=l||0===l?l:o&&(c||0===c)?c:u,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var p=!1===e.decodeStrings;this.decodeStrings=!p,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var i=e._writableState,n=i.sync,s=i.writecb;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(i),t)!function(e,t,i,n,s){--t.pendingcb,i?(r.nextTick(s,n),r.nextTick(v,e,t),e._writableState.errorEmitted=!0,e.emit("error",n)):(s(n),e._writableState.errorEmitted=!0,e.emit("error",n),v(e,t))}(e,i,n,t,s);else{var o=y(i);o||i.corked||i.bufferProcessing||!i.bufferedRequest||b(e,i),n?a(_,e,i,o,s):_(e,i,o,s)}}(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new n(this)}function m(e){if(s=s||i(8760),!(o.call(m,this)||this instanceof s))return new m(e);this._writableState=new f(e,this),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),c.call(this)}function g(e,t,i,r,n,s,a){t.writelen=r,t.writecb=a,t.writing=!0,t.sync=!0,i?e._writev(n,t.onwrite):e._write(n,s,t.onwrite),t.sync=!1}function _(e,t,i,r){i||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,r(),v(e,t)}function b(e,t){t.bufferProcessing=!0;var i=t.bufferedRequest;if(e._writev&&i&&i.next){var r=t.bufferedRequestCount,s=new Array(r),a=t.corkedRequestsFree;a.entry=i;for(var o=0,l=!0;i;)s[o]=i,i.isBuf||(l=!1),i=i.next,o+=1;s.allBuffers=l,g(e,t,!0,t.length,s,"",a.finish),t.pendingcb++,t.lastBufferedRequest=null,a.next?(t.corkedRequestsFree=a.next,a.next=null):t.corkedRequestsFree=new n(t),t.bufferedRequestCount=0}else{for(;i;){var c=i.chunk,u=i.encoding,p=i.callback;if(g(e,t,!1,t.objectMode?1:c.length,c,u,p),i=i.next,t.bufferedRequestCount--,t.writing)break}null===i&&(t.lastBufferedRequest=null)}t.bufferedRequest=i,t.bufferProcessing=!1}function y(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function S(e,t){e._final((function(i){t.pendingcb--,i&&e.emit("error",i),t.prefinished=!0,e.emit("prefinish"),v(e,t)}))}function v(e,t){var i=y(t);return i&&(function(e,t){t.prefinished||t.finalCalled||("function"==typeof e._final?(t.pendingcb++,t.finalCalled=!0,r.nextTick(S,e,t)):(t.prefinished=!0,e.emit("prefinish")))}(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"))),i}l.inherits(m,c),f.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(f.prototype,"buffer",{get:function(){return this.getBuffer()}})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(o=Function.prototype[Symbol.hasInstance],Object.defineProperty(m,Symbol.hasInstance,{value:function(e){return!!o.call(this,e)||this===m&&e&&e._writableState instanceof f}})):o=function(e){return e instanceof this},m.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},m.prototype.write=function(e,t,i){var n,s=this._writableState,a=!1,o=!s.objectMode&&(n=e,u.isBuffer(n)||n instanceof p);return o&&!u.isBuffer(e)&&(e=function(e){return u.from(e)}(e)),"function"==typeof t&&(i=t,t=null),o?t="buffer":t||(t=s.defaultEncoding),"function"!=typeof i&&(i=h),s.ended?function(e,t){var i=new Error("write after end");e.emit("error",i),r.nextTick(t,i)}(this,i):(o||function(e,t,i,n){var s=!0,a=!1;return null===i?a=new TypeError("May not write null values to stream"):"string"==typeof i||void 0===i||t.objectMode||(a=new TypeError("Invalid non-string/buffer chunk")),a&&(e.emit("error",a),r.nextTick(n,a),s=!1),s}(this,s,e,i))&&(s.pendingcb++,a=function(e,t,i,r,n,s){if(!i){var a=function(e,t,i){return e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=u.from(t,i)),t}(t,r,n);r!==a&&(i=!0,n="buffer",r=a)}var o=t.objectMode?1:r.length;t.length+=o;var l=t.length<t.highWaterMark;if(l||(t.needDrain=!0),t.writing||t.corked){var c=t.lastBufferedRequest;t.lastBufferedRequest={chunk:r,encoding:n,isBuf:i,callback:s,next:null},c?c.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else g(e,t,!1,o,r,n,s);return l}(this,s,o,e,t,i)),a},m.prototype.cork=function(){this._writableState.corked++},m.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.bufferedRequest||b(this,e))},m.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(m.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),m.prototype._write=function(e,t,i){i(new Error("_write() is not implemented"))},m.prototype._writev=null,m.prototype.end=function(e,t,i){var n=this._writableState;"function"==typeof e?(i=e,e=null,t=null):"function"==typeof t&&(i=t,t=null),null!=e&&this.write(e,t),n.corked&&(n.corked=1,this.uncork()),n.ending||n.finished||function(e,t,i){t.ending=!0,v(e,t),i&&(t.finished?r.nextTick(i):e.once("finish",i)),t.ended=!0,e.writable=!1}(this,n,i)},Object.defineProperty(m.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),m.prototype.destroy=d.destroy,m.prototype._undestroy=d.undestroy,m.prototype._destroy=function(e,t){this.end(),t(e)}},927:(e,t,i)=>{var r=i(2646).Buffer;t.n=class{constructor(){this.head=null,this.tail=null,this.length=0}push(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length}unshift(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length}shift(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}}clear(){this.head=this.tail=null,this.length=0}join(e){if(0===this.length)return"";for(var t=this.head,i=""+t.data;t=t.next;)i+=e+t.data;return i}concat(e){if(0===this.length)return r.alloc(0);if(1===this.length)return this.head.data;for(var t,i,n=r.allocUnsafe(e>>>0),s=this.head,a=0;s;)t=n,i=a,s.data.copy(t,i),a+=s.data.length,s=s.next;return n}}},4599:(e,t,i)=>{var r=i(8723);function n(e,t){e.emit("error",t)}e.exports={destroy:function(e,t){var i=this,s=this._readableState&&this._readableState.destroyed,a=this._writableState&&this._writableState.destroyed;return s||a?(t?t(e):!e||this._writableState&&this._writableState.errorEmitted||r.nextTick(n,this,e),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,(function(e){!t&&e?(r.nextTick(n,i,e),i._writableState&&(i._writableState.errorEmitted=!0)):t&&t(e)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},4331:(e,t,i)=>{var r=i(2646).Buffer,n=r.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function s(e){var t;switch(this.encoding=function(e){var t=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"!=typeof t&&(r.isEncoding===n||!n(e)))throw new Error("Unknown encoding: "+e);return t||e}(e),this.encoding){case"utf16le":this.text=l,this.end=c,t=4;break;case"utf8":this.fillLast=o,t=4;break;case"base64":this.text=u,this.end=p,t=3;break;default:return this.write=d,void(this.end=h)}this.lastNeed=0,this.lastTotal=0,this.lastChar=r.allocUnsafe(t)}function a(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function o(e){var t=this.lastTotal-this.lastNeed,i=function(e,t,i){if(128!=(192&t[0]))return e.lastNeed=0,"";if(e.lastNeed>1&&t.length>1){if(128!=(192&t[1]))return e.lastNeed=1,"";if(e.lastNeed>2&&t.length>2&&128!=(192&t[2]))return e.lastNeed=2,""}}(this,e);return void 0!==i?i:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function l(e,t){if((e.length-t)%2==0){var i=e.toString("utf16le",t);if(i){var r=i.charCodeAt(i.length-1);if(r>=55296&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],i.slice(0,-1)}return i}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function c(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var i=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,i)}return t}function u(e,t){var i=(e.length-t)%3;return 0===i?e.toString("base64",t):(this.lastNeed=3-i,this.lastTotal=3,1===i?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-i))}function p(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function d(e){return e.toString(this.encoding)}function h(e){return e&&e.length?this.write(e):""}t.s=s,s.prototype.write=function(e){if(0===e.length)return"";var t,i;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";i=this.lastNeed,this.lastNeed=0}else i=0;return i<e.length?t?t+this.text(e,i):this.text(e,i):t||""},s.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"":t},s.prototype.text=function(e,t){var i=function(e,t,i){var r=t.length-1;if(r<i)return 0;var n=a(t[r]);return n>=0?(n>0&&(e.lastNeed=n-1),n):--r<i||-2===n?0:(n=a(t[r]))>=0?(n>0&&(e.lastNeed=n-2),n):--r<i||-2===n?0:(n=a(t[r]))>=0?(n>0&&(2===n?n=0:e.lastNeed=n-3),n):0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=i;var r=e.length-(i-this.lastNeed);return e.copy(this.lastChar,0,r),e.toString("utf8",t,r)},s.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},9613:(e,t)=>{t.inherits=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}},2435:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=i(6552);t.default=function(e){e.getAccountInfo=async t=>(await e.sendIQ({account:{},to:t,type:"get"})).account,e.updateAccount=(t,i)=>e.sendIQ({account:i,to:t,type:"set"}),e.deleteAccount=t=>e.sendIQ({account:{remove:!0},to:t,type:"set"}),e.getPrivateData=async t=>(await e.sendIQ({privateStorage:{[t]:{}},type:"get"})).privateStorage[t],e.setPrivateData=async(t,i)=>e.sendIQ({privateStorage:{[t]:i},type:"set"}),e.getVCard=async t=>(await e.sendIQ({to:t,type:"get",vcard:{format:r.NS_VCARD_TEMP}})).vcard,e.publishVCard=async t=>{await e.sendIQ({type:"set",vcard:t})},e.enableNotifications=(t,i,r=[])=>e.sendIQ({push:{action:"enable",form:{fields:[{name:"FORM_TYPE",type:"hidden",value:"http://jabber.org/protocol/pubsub#publish-options"},...r],type:"submit"},jid:t,node:i},type:"set"}),e.disableNotifications=(t,i)=>e.sendIQ({push:{action:"disable",jid:t,node:i},type:"set"})}},7018:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=i(6552);t.default=function(e){e.disco.addFeature((0,r.NS_PEP_NOTIFY)(r.NS_AVATAR_METADATA)),e.on("pubsub:published",(t=>{if(t.pubsub.items.node!==r.NS_AVATAR_METADATA)return;const i=t.pubsub.items.published[0].content;e.emit("avatar",{avatars:i.versions||[],jid:t.from,source:"pubsub"})})),e.on("presence",(t=>{t.vcardAvatar&&"string"==typeof t.vcardAvatar&&e.emit("avatar",{avatars:[{id:t.vcardAvatar}],jid:t.from,source:"vcard"})})),e.publishAvatar=(t,i)=>e.publish("",r.NS_AVATAR_DATA,{data:i,itemType:r.NS_AVATAR_DATA},t),e.useAvatars=(t,i=[])=>e.publish("",r.NS_AVATAR_METADATA,{itemType:r.NS_AVATAR_METADATA,pointers:i,versions:t},"current"),e.getAvatar=(t,i)=>e.getItem(t,r.NS_AVATAR_DATA,i)}},1286:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){e.registerFeature("bind",300,(async(t,i)=>{try{const r=await e.sendIQ({bind:{resource:e.config.resource},type:"set"});e.features.negotiated.bind=!0,e.emit("session:prebind",r.bind.jid);const n=!t.legacySession||t.legacySession&&t.legacySession.optional;return!e.sessionStarted&&n&&e.emit("session:started",e.jid),i()}catch(e){return console.error(e),i("disconnect","JID binding failed")}})),e.registerFeature("legacySession",1e3,(async(t,i)=>{if(e.sessionStarted||t.legacySession&&t.legacySession.optional)return e.features.negotiated.session=!0,i();try{return await e.sendIQ({legacySession:!0,type:"set"}),e.features.negotiated.session=!0,e.sessionStarted||(e.sessionStarted=!0,e.emit("session:started",e.jid)),i()}catch(e){return i("disconnect","Session requeset failed")}})),e.on("session:started",(()=>{e.sessionStarted=!0})),e.on("session:prebind",(t=>{e.jid=t,e.emit("session:bound",e.jid)})),e.on("--reset-stream-features",(()=>{e.sessionStarted=!1,e.features.negotiated.bind=!1,e.features.negotiated.session=!1}))}},8139:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=i(6552);t.default=function(e){e.disco.addFeature(r.NS_ADHOC_COMMANDS),e.disco.addItem({name:"Ad-Hoc Commands",node:r.NS_ADHOC_COMMANDS}),e.getCommands=t=>e.getDiscoItems(t,r.NS_ADHOC_COMMANDS)}},8522:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=i(6552),n=i(2898);function s(e,t){e.features.negotiated.clientStateIndication&&e.send("csi",{type:t})}t.default=function(e){e.disco.addFeature(r.NS_PING),e.on("iq:get:ping",(t=>{e.sendIQResult(t)})),e.on("--reset-stream-features",(()=>{e._stopKeepAliveInterval(),e.features.negotiated.streamManagement=!1,e.features.negotiated.clientStateIndication=!1})),e.markActive=()=>s(e,"active"),e.markInactive=()=>s(e,"inactive"),e.ping=async t=>{await e.sendIQ({ping:!0,to:t,type:"get"})},e.enableKeepAlive=(t={})=>{e._keepAliveOptions=t;const i=t.interval||300,r=t.timeout||e.config.timeout||15;clearInterval(e._keepAliveInterval),e._keepAliveInterval=setInterval((async function(){if(e.sessionStarted)try{await(0,n.timeoutPromise)(async function(e){if(e.sm.started)return new Promise((t=>{e.once("stream:management:ack",(()=>t())),e.sm.request()}));try{await e.ping()}catch(e){if(e.error&&"timeout"!==e.error.condition)return;throw e}}(e),1e3*r)}catch(t){e.emit("stream:error",{condition:"connection-timeout",text:"Server did not respond in "+r+" seconds"}),e.transport&&(e.transport.hasStream=!1,e.transport.disconnect(!1))}}),1e3*i)},e._stopKeepAliveInterval=()=>{e._keepAliveInterval&&(clearInterval(e._keepAliveInterval),delete e._keepAliveInterval)},e.disableKeepAlive=()=>{delete e._keepAliveOptions,e._stopKeepAliveInterval()},e.on("stream:management:resumed",(()=>{e._keepAliveOptions&&e.enableKeepAlive(e._keepAliveOptions)})),e.on("stream:start",(()=>{e._keepAliveOptions&&e.enableKeepAlive(e._keepAliveOptions)}));const t=async(t,i)=>{if(!e.config.useStreamManagement)return i();const r=async t=>{switch(t.type){case"enabled":return await e.sm.enabled(t),e.features.negotiated.streamManagement=!0,e.off("sm",r),i();case"resumed":return await e.sm.resumed(t),e.features.negotiated.streamManagement=!0,e.features.negotiated.bind=!0,e.sessionStarted=!0,e.sessionStarting=!1,e.off("sm",r),e.emit("stream:management:resumed",t),i("break");case"failed":await e.sm.failed(t),e.off("sm",r),e.emit("session:end"),i()}};e.on("sm",r),e.sm.id?e.sm.id&&e.sm.allowResume?await e.sm.resume():(e.off("sm",r),i()):e.features.negotiated.bind?await e.sm.enable():(e.off("sm",r),i())};e.registerFeature("streamManagement",200,t),e.registerFeature("streamManagement",500,t),e.registerFeature("clientStateIndication",400,((t,i)=>{e.features.negotiated.clientStateIndication=!0,i()}))}},7777:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=i(7582),n=(0,r.__importDefault)(i(573)),s=(0,r.__importStar)(i(549)),a=i(6552);t.default=function(e){e.disco=new n.default,e.disco.addFeature(a.NS_DISCO_INFO),e.disco.addFeature(a.NS_DISCO_ITEMS),e.disco.addIdentity({category:"client",type:"web"}),e.registerFeature("caps",100,((t,i)=>{const r=s.getDomain(e.jid)||e.config.server;e.emit("disco:caps",{caps:t.legacyCapabilities||[],jid:r}),e.features.negotiated.caps=!0,i()})),e.getDiscoInfo=async(t,i)=>({extensions:[],features:[],identities:[],...(await e.sendIQ({disco:{node:i,type:"info"},to:t,type:"get"})).disco}),e.getDiscoItems=async(t,i)=>({items:[],...(await e.sendIQ({disco:{node:i,type:"items"},to:t,type:"get"})).disco}),e.updateCaps=()=>{const t=e.config.capsNode||"https://stanzajs.org";return e.disco.updateCaps(t)},e.getCurrentCaps=()=>{const t=e.disco.getCaps();if(!t)return;const i=`${t[0].node}#${t[0].value}`;return{info:e.disco.getNodeInfo(i),legacyCapabilities:t}},e.on("presence",(t=>{t.legacyCapabilities&&e.emit("disco:caps",{caps:t.legacyCapabilities,jid:t.from})})),e.on("iq:get:disco",(t=>{const{type:i,node:r}=t.disco;"info"===i&&e.sendIQResult(t,{disco:{...e.disco.getNodeInfo(r||""),node:r,type:"info"}}),"items"===i&&e.sendIQResult(t,{disco:{items:e.disco.items.get(r||"")||[],type:"items"}})}))}},8910:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=i(7582),n=i(2768),s=i(6552),a=(0,r.__importStar)(i(4142));t.default=function(e){e.disco.addFeature("jid\\20escaping"),e.disco.addFeature(s.NS_DELAY),e.disco.addFeature(s.NS_EME_0),e.disco.addFeature(s.NS_FORWARD_0),e.disco.addFeature(s.NS_HASHES_2),e.disco.addFeature(s.NS_HASHES_1),e.disco.addFeature(s.NS_IDLE_1),e.disco.addFeature(s.NS_JSON_0),e.disco.addFeature(s.NS_OOB),e.disco.addFeature(s.NS_PSA),e.disco.addFeature(s.NS_REFERENCE_0),e.disco.addFeature(s.NS_SHIM),e.disco.addFeature(s.NS_DATAFORM),e.disco.addFeature(s.NS_DATAFORM_MEDIA),e.disco.addFeature(s.NS_DATAFORM_VALIDATION),e.disco.addFeature(s.NS_DATAFORM_LAYOUT);const t=a.getHashes();for(const i of t)e.disco.addFeature((0,s.NS_HASH_NAME)(i));e.disco.addFeature(s.NS_TIME),e.disco.addFeature(s.NS_VERSION),e.on("iq:get:softwareVersion",(t=>e.sendIQResult(t,{softwareVersion:e.config.softwareVersion||{name:"stanzajs.org",version:n.VERSION}}))),e.on("iq:get:time",(t=>{const i=new Date;e.sendIQResult(t,{time:{tzo:i.getTimezoneOffset(),utc:i}})})),e.getSoftwareVersion=async t=>(await e.sendIQ({softwareVersion:{},to:t,type:"get"})).softwareVersion,e.getTime=async t=>(await e.sendIQ({time:{},to:t,type:"get"})).time,e.getLastActivity=async t=>(await e.sendIQ({lastActivity:{},to:t,type:"get"})).lastActivity}},589:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){e.features={handlers:Object.create(null),negotiated:Object.create(null),order:[]},e.registerFeature=function(t,i,r){this.features.order.push({name:t,priority:i}),this.features.order.sort(((e,t)=>e.priority-t.priority)),this.features.handlers[t]=r.bind(e)},e.on("features",(async t=>{const i=e.features.negotiated,r=e.features.handlers,n=[];for(const{name:s}of e.features.order)t[s]&&r[s]&&!i[s]&&n.push(s);function s(e){return new Promise((i=>{r[e](t,((e,t)=>{i(e?{command:e,message:t}:null)}))}))}for(const t of n){if(i[t])continue;let r="",n="";try{const e=await s(t);e&&(r=e.command,n=e.message||"")}catch(e){r="disconnect",n=e.message,console.error(e)}if(r)return"restart"===r&&e.transport&&e.transport.restart(),void("disconnect"===r&&(e.emit("stream:error",{condition:"policy-violation",text:"Failed to negotiate stream features: "+n}),e.disconnect()))}}))}},7570:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=i(6552);t.default=function(e){e.discoverBindings=async t=>{const i=new Set,n=new Set,s=e.resolver.getHostMeta(t).then((e=>{var t;for(const s of null!==(t=e.links)&&void 0!==t?t:[])s.href&&s.rel===r.NS_ALT_CONNECTIONS_WEBSOCKET&&n.add(s.href),s.href&&s.rel===r.NS_ALT_CONNECTIONS_XBOSH&&i.add(s.href)})).catch((e=>console.error(e))),a=e.config.allowAlternateDNSDiscovery?e.resolver.resolveTXT(`_xmppconnect.${t}`).then((e=>{for(const t of e)for(const e of t){if(e.startsWith("_xmpp-client-websocket=")){const t=e.substring(e.indexOf("=")+1);t&&n.add(t)}if(e.startsWith("_xmpp-client-xbosh=")){const t=e.substring(e.indexOf("=")+1);t&&i.add(t)}}})).catch((e=>console.error(e))):Promise.resolve();return await Promise.all([s,a]).catch((e=>console.error(e))),{bosh:[...i].filter((e=>e.startsWith("https://"))),websocket:[...n].filter((e=>e.startsWith("wss://")))}}}},8614:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.core=void 0;const r=i(7582);(0,r.__exportStar)(i(2435),t),(0,r.__exportStar)(i(7018),t),(0,r.__exportStar)(i(1286),t),(0,r.__exportStar)(i(8139),t),(0,r.__exportStar)(i(8522),t),(0,r.__exportStar)(i(7777),t),(0,r.__exportStar)(i(8910),t),(0,r.__exportStar)(i(589),t),(0,r.__exportStar)(i(7570),t),(0,r.__exportStar)(i(8880),t),(0,r.__exportStar)(i(3644),t),(0,r.__exportStar)(i(7929),t),(0,r.__exportStar)(i(2946),t),(0,r.__exportStar)(i(6211),t),(0,r.__exportStar)(i(2612),t),(0,r.__exportStar)(i(8580),t),(0,r.__exportStar)(i(3608),t),(0,r.__exportStar)(i(9557),t);const n=(0,r.__importDefault)(i(2435)),s=(0,r.__importDefault)(i(7018)),a=(0,r.__importDefault)(i(1286)),o=(0,r.__importDefault)(i(8139)),l=(0,r.__importDefault)(i(8522)),c=(0,r.__importDefault)(i(7777)),u=(0,r.__importDefault)(i(8910)),p=(0,r.__importDefault)(i(589)),d=(0,r.__importDefault)(i(7570)),h=(0,r.__importDefault)(i(8880)),f=(0,r.__importDefault)(i(3644)),m=(0,r.__importDefault)(i(7929)),g=(0,r.__importDefault)(i(2946)),_=(0,r.__importDefault)(i(6211)),b=(0,r.__importDefault)(i(2612)),y=(0,r.__importDefault)(i(8580)),S=(0,r.__importDefault)(i(3608)),v=(0,r.__importDefault)(i(9557));t.core=function(e){e.use(p.default),e.use(c.default),e.use(a.default),e.use(l.default),e.use(d.default),e.use(S.default)},t.default=function(e){e.use(n.default),e.use(m.default),e.use(s.default),e.use(o.default),e.use(u.default),e.use(h.default),e.use(f.default),e.use(g.default),e.use(_.default),e.use(b.default),e.use(y.default),e.use(v.default)}},8880:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=i(7582),n=i(4142),s=(0,r.__importStar)(i(7589)),a=i(6552);t.default=function(e){const t=!!n.RTCPeerConnection,i={advertiseAudio:t,advertiseFileTransfer:t,advertiseVideo:t,bundlePolicy:"balanced",hasRTCPeerConnection:t,iceServers:[{urls:"stun:stun.l.google.com:19302"}],iceTransportPolicy:"all",rtcpMuxPolicy:"require",trickleIce:!0,...e.config.jingle},r=e.jingle=new s.SessionManager(i),o=[a.NS_JINGLE_1];i.hasRTCPeerConnection&&(o.push(a.NS_JINGLE_ICE_0,a.NS_JINGLE_ICE_UDP_1,a.NS_JINGLE_DTLS_SCTP_1,a.NS_JINGLE_DTLS_0,"urn:ietf:rfc:5888"),!1===i.trickleIce&&o.push("urn:ietf:rfc:3264"),(i.advertiseAudio||i.advertiseVideo)&&o.push(a.NS_JINGLE_RTP_1,a.NS_JINGLE_RTP_RTCP_FB_0,a.NS_JINGLE_RTP_HDREXT_0,"urn:ietf:rfc:5576"),i.advertiseAudio&&o.push(a.NS_JINGLE_RTP_AUDIO),i.advertiseVideo&&o.push(a.NS_JINGLE_RTP_VIDEO),i.advertiseFileTransfer&&o.push(a.NS_JINGLE_FILE_TRANSFER_4,a.NS_JINGLE_FILE_TRANSFER_5));for(const t of o)e.disco.addFeature(t);const l=["outgoing","incoming","accepted","terminated","ringing","mute","unmute","hold","resumed"];for(const t of l)r.on(t,((i,r)=>{e.emit("jingle:"+t,i,r)}));r.on("createdSession",(t=>{e.emit("jingle:created",t)})),r.on("send",(async t=>{try{if("set"===t.type){const i=await e.sendIQ(t);i.jingle||(i.jingle={}),i.jingle.sid=t.jingle.sid,r.process(i)}"result"===t.type&&e.sendIQResult({type:"set",id:t.id,from:t.to},t),"error"===t.type&&e.sendIQError({type:"set",id:t.id,from:t.to},t)}catch(e){e.jingle||(e.jingle=t.jingle),e.jingle.sid=t.jingle.sid,r.process(e)}})),e.on("session:bound",(e=>{r.selfID=e})),e.on("iq:set:jingle",(e=>{r.process(e)})),e.on("unavailable",(e=>{r.endPeerSessions(e.from,void 0,!0)})),e.getServices=async(t,i,r)=>{const n=(await e.sendIQ({externalServices:{type:i,version:r},to:t,type:"get"})).externalServices;return n.services=n.services||[],n},e.getServiceCredentials=async(t,i,r,n,s)=>(await e.sendIQ({externalServiceCredentials:{host:i,port:n,type:r,version:s},to:t,type:"get"})).externalServiceCredentials,e.discoverICEServers=async(t={})=>{try{const i=(await e.getServices(e.config.server,void 0,t.version)).services||[],r=[];for(const t of i)e.jingle.addICEServer(t);return r}catch(e){return[]}}}},3644:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=i(7582),n=i(6070),s=(0,r.__importStar)(i(549)),a=i(6552);t.default=function(e){e.getHistorySearchForm=async(t,i={})=>(await e.sendIQ({archive:{type:"query",version:i.version},to:t,type:"get"})).archive.form,e.searchHistory=async(t,i={})=>{const r=e.nextId();let o="";"string"==typeof t?o=t:(o=t.to||"",i=t),i.queryId=r;const l=i.form||{};l.type="submit";const c=l.fields||[],u=[{name:"FORM_TYPE",type:"hidden",value:a.NS_MAM_2}];i.with&&u.push({name:"with",type:"text-single",value:i.with}),i.start&&u.push({name:"start",type:"text-single",value:i.start.toISOString()}),i.end&&u.push({name:"end",type:"text-single",value:i.end.toISOString()}),l.fields=(0,n.mergeFields)(u,c),i.form=l;const p=s.allowedResponders(e.jid,o),d=[],h=e=>{p.has(e.from)&&e.archive&&e.archive.queryId===r&&d.push(e.archive)};e.on("mam:item",h);try{return{...(await e.sendIQ({archive:i,id:r,to:o,type:"set"})).archive,results:d}}finally{e.off("mam:item",h)}},e.getHistoryPreferences=async()=>(await e.sendIQ({archive:{type:"preferences"},type:"get"})).archive,e.setHistoryPreferences=t=>e.sendIQ({archive:{type:"preferences",...t},type:"set"}),e.on("message",(t=>{t.archive&&e.emit("mam:item",t)}))}},7929:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=(0,i(7582).__importStar)(i(549)),n=i(6552),s=new Set(["chat","groupchat","headline","normal"]),a=new Set(["chat","groupchat","normal"]),o=new Map([["markable",0],["received",1],["displayed",2],["acknowledged",3]]),l=(e,t)=>{var i;return e.marker&&(o.get(e.marker.type)<o.get(t)||"markable"===(null===(i=e.marker)||void 0===i?void 0:i.type))};async function c(e,t){await e.sendIQ({carbons:{action:t},type:"set"})}t.default=function(e){e.disco.addFeature(n.NS_ATTENTION_0),e.disco.addFeature(n.NS_CHAT_MARKERS_0),e.disco.addFeature(n.NS_CHAT_STATES),e.disco.addFeature(n.NS_CORRECTION_0),e.disco.addFeature(n.NS_RECEIPTS),e.disco.addFeature(n.NS_RTT_0),e.enableCarbons=()=>c(e,"enable"),e.disableCarbons=()=>c(e,"disable"),e.markReceived=t=>e.sendMarker(t,"received"),e.markDisplayed=t=>e.sendMarker(t,"displayed"),e.markAcknowledged=t=>e.sendMarker(t,"acknowledged"),e.getAttention=(t,i={})=>e.sendMessage({...i,requestingAttention:!0,to:t,type:"headline"}),e.sendMarker=(t,i,n)=>{if(!l(t,i)&&!n)return;const s=!1!==e.config.groupchatMarkersUseStanzaID;let a=t.id;if("groupchat"===t.type&&t.stanzaIds&&s){const e=t.stanzaIds.find((e=>r.equalBare(e.by,t.from)));e&&(a=e.id)}e.sendMessage({marker:{id:a,type:i},to:"groupchat"===t.type?r.toBare(t.from):t.from,type:t.type})},e.on("message",(t=>{if(t.carbon&&r.equalBare(t.from,e.jid)){const i=t.carbon.forward.message;i.delay||(i.delay=t.carbon.forward.delay||{timestamp:new Date(Date.now())}),(e=>!!e.carbon&&"received"===e.carbon.type)(t)&&(e.emit("carbon:received",t),e.emit("message",i)),(e=>!!e.carbon&&"sent"===e.carbon.type)(t)&&(e.emit("carbon:sent",t),e.emit("message:sent",i,!0))}(e=>!!e.forms&&e.forms.length>0)(t)&&e.emit("dataform",t),t.requestingAttention&&e.emit("attention",t),(e=>!!e.rtt)(t)&&e.emit("rtt",t),(e=>!!e.replace)(t)&&e.emit("replace",t),(e=>!!e.chatState)(t)&&a.has(t.type||"normal")&&e.emit("chat:state",t);const i=!1!==e.config.sendReceipts,n=!1!==e.config.sendMUCReceipts,o=!1!==e.config.chatMarkers,c=!1!==e.config.groupchatMarkersUseStanzaID,u=(e=>{var t;return!!e.receipt&&"request"===e.receipt.type&&s.has(null!==(t=e.type)&&void 0!==t?t:"normal")})(t),p=l(t,"received"),d=u&&i&&("groupchat"!==t.type||n);if(d||o&&p){const i="groupchat"===t.type?r.toBare(t.from):t.from;let n=t.id;if("groupchat"===t.type&&t.stanzaIds&&c){const e=t.stanzaIds.find((e=>r.equalBare(e.by,t.from)));e&&(n=e.id)}e.sendMessage({receipt:d?{id:t.id,type:"received"}:void 0,marker:o&&p?{id:n,type:"received"}:void 0,to:i,type:t.type})}t.receipt&&"received"===t.receipt.type&&e.emit("receipt",t),t.marker&&"markable"!==t.marker.type&&e.emit(`marker:${t.marker.type}`,t)}))}},2946:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=i(7582),n=i(2768),s=(0,r.__importStar)(i(549)),a=i(6552),o=i(2898);t.default=function(e){e.disco.addFeature(a.NS_MUC),e.disco.addFeature(a.NS_MUC_DIRECT_INVITE),e.disco.addFeature(a.NS_HATS_0),e.joinedRooms=new Map,e.joiningRooms=new Map,e.leavingRooms=new Map,e.on("session:started",(function(){const t=e.joiningRooms;e.joiningRooms=new Map;for(const[i,r]of t)e.joinRoom(i,r);const i=e.joinedRooms;e.joinedRooms=new Map;for(const[t,r]of i)e.joinRoom(t,r)})),e.on("message",(t=>{if("groupchat"!==t.type||!t.hasSubject||t.body){if(t.muc)if("direct-invite"===t.muc.type||!t.muc.invite&&t.legacyMUC){const i="direct-invite"===t.muc.type?t.muc:t.legacyMUC;e.emit("muc:invite",{from:t.from,password:i.password,reason:i.reason,room:i.jid,thread:i.thread,type:"direct"})}else t.muc.invite?e.emit("muc:invite",{from:t.muc.invite[0].from,password:t.muc.password,reason:t.muc.invite[0].reason,room:t.from,thread:t.muc.invite[0].thread,type:"mediated"}):t.muc.decline?e.emit("muc:declined",{from:t.muc.decline.from,reason:t.muc.decline.reason,room:t.from}):e.emit("muc:other",t)}else e.emit("muc:topic",{from:t.from,room:s.toBare(t.from),topic:t.subject||""})})),e.on("presence",(t=>{const i=s.toBare(t.from);if(e.joiningRooms.has(i)&&"error"===t.type)return e.joiningRooms.delete(i),e.emit("muc:failed",t),void e.emit("muc:error",t);if(!function(e){return!!e.muc}(t))return;const r=t.muc.statusCodes&&t.muc.statusCodes.indexOf(n.MUCStatusCode.SelfPresence)>=0,a=t.muc.statusCodes&&t.muc.statusCodes.indexOf(n.MUCStatusCode.NickChanged)>=0;if("error"===t.type)return void e.emit("muc:error",t);if("unavailable"===t.type)return e.emit("muc:unavailable",t),r&&(a?e.joinedRooms.set(i,t.muc.nick):(e.emit("muc:leave",t),e.joinedRooms.delete(i),e.leavingRooms.delete(i))),void(t.muc.destroy&&e.emit("muc:destroyed",{newRoom:t.muc.destroy.jid,password:t.muc.destroy.password,reason:t.muc.destroy.reason,room:i}));e.emit("muc:available",t);const o=e.joiningRooms.has(i)||!e.joinedRooms.has(i);r&&(e.joinedRooms.set(i,s.getResource(t.from)),o&&(e.joiningRooms.delete(i),e.emit("muc:join",t)))})),e.joinRoom=async(t,i,r={})=>{if(t=s.toBare(t),e.joiningRooms.set(t,i||""),!i)try{i=await e.getReservedNick(t),e.joiningRooms.set(t,i)}catch(e){throw new Error("Room nick required")}return new Promise(((n,a)=>{function o(i){s.equalBare(i.from,t)&&(e.off("muc:join",o),e.off("muc:failed",l),n(i))}function l(i){s.equalBare(i.from,t)&&(e.off("muc:join",o),e.off("muc:failed",l),a(i))}e.on("muc:join",o),e.on("muc:failed",l),e.sendPresence({...r,muc:{...r.muc,type:"join"},to:s.createFull(t,i)})}))},e.leaveRoom=(t,i,r={})=>(t=s.toBare(t),i=i||e.joinedRooms.get(t),e.leavingRooms.set(t,i),new Promise(((n,a)=>{const l=r.id||(0,o.uuid)(),c=s.allowedResponders(t);function u(i){s.equalBare(i.from,t)&&(e.off("muc:leave",u),e.off("presence:error",p),n(i))}function p(i){i.id===l&&c.has(i.from)&&(e.joinedRooms.has(t)||e.leavingRooms.delete(t),e.off("muc:leave",u),e.off("presence:error",p),a(i))}e.on("muc:leave",u),e.on("presence:error",p),e.sendPresence({...r,id:l,to:s.createFull(t,i),type:"unavailable"})}))),e.ban=(t,i,r)=>e.setRoomAffiliation(t,i,"outcast",r),e.kick=(t,i,r)=>e.setRoomRole(t,i,"none",r),e.invite=(t,i=[])=>{Array.isArray(i)||(i=[i]),e.sendMessage({muc:{invite:i,type:"info"},to:t})},e.directInvite=(t,i,r={})=>{e.sendMessage({muc:{...r,jid:t,type:"direct-invite"},to:i})},e.declineInvite=(t,i,r)=>{e.sendMessage({muc:{decline:{reason:r,to:i},type:"info"},to:t})},e.changeNick=(t,i)=>{const r=(0,o.uuid)(),a=s.createFull(t,i),l=s.allowedResponders(t);return new Promise(((t,i)=>{function o(i){l.has(s.toBare(i.from))&&i.muc.statusCodes&&i.muc.statusCodes.includes(n.MUCStatusCode.SelfPresence)&&(e.off("muc:available",o),e.off(`presence:id:${r}`,c),t(i))}function c(n){l.has(s.toBare(n.from))&&n.id===r&&(e.off("muc:available",o),e.off(`presence:id:${r}`,c),"error"===n.type?i(n):t(n))}e.on("muc:available",o),e.on(`presence:id:${r}`,c),e.sendPresence({id:r,to:a})}))},e.setSubject=(t,i)=>{e.sendMessage({subject:i,to:t,type:"groupchat"})},e.getReservedNick=async t=>{try{const i=(await e.getDiscoInfo(t,"x-roomuser-item")).identities[0];if(i.name)return i.name;throw new Error("No nickname reserved")}catch(e){throw new Error("No nickname reserved")}},e.requestRoomVoice=t=>{e.sendMessage({forms:[{fields:[{name:"FORM_TYPE",type:"hidden",value:"http://jabber.org/protocol/muc#request"},{name:"muc#role",type:"text-single",value:"participant"}],type:"submit"}],to:t})},e.setRoomAffiliation=(t,i,r,n)=>e.sendIQ({muc:{type:"user-list",users:[{affiliation:r,jid:i,reason:n}]},to:t,type:"set"}),e.setRoomRole=(t,i,r,n)=>e.sendIQ({muc:{type:"user-list",users:[{nick:i,reason:n,role:r}]},to:t,type:"set"}),e.getRoomMembers=(t,i={affiliation:"member"})=>e.sendIQ({muc:{type:"user-list",users:[i]},to:t,type:"get"}),e.getRoomConfig=async t=>{const i=await e.sendIQ({muc:{type:"configure"},to:t,type:"get"});if(!i.muc.form)throw new Error("No configuration form returned");return i.muc.form},e.configureRoom=(t,i={})=>e.sendIQ({muc:{form:{...i,type:"submit"},type:"configure"},to:t,type:"set"}),e.destroyRoom=(t,i={})=>e.sendIQ({muc:{destroy:i,type:"configure"},to:t,type:"set"}),e.getUniqueRoomName=async function(e){const t=await this.sendIQ({muc:{type:"unique"},to:e,type:"get"});if(!t.muc.name)throw new Error("No unique name returned");return t.muc.name},e.getBookmarks=async()=>{const t=await e.getPrivateData("bookmarks");return t&&t.rooms?t.rooms:[]},e.setBookmarks=t=>e.setPrivateData("bookmarks",{rooms:t}),e.addBookmark=async t=>{const i=await e.getBookmarks(),r=[];let n=!1;for(const e of i)s.equalBare(e.jid,t.jid)?(r.push({...e,...t}),n=!0):r.push(e);return n||r.push(t),e.setBookmarks(r)},e.removeBookmark=async t=>{const i=(await e.getBookmarks()).filter((e=>!s.equalBare(e.jid,t)));return e.setBookmarks(i)}}},6211:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=i(6552);t.default=function(e){e.disco.addFeature(r.NS_ACTIVITY),e.disco.addFeature(r.NS_GEOLOC),e.disco.addFeature(r.NS_MOOD),e.disco.addFeature(r.NS_NICK),e.disco.addFeature(r.NS_TUNE),e.disco.addFeature((0,r.NS_PEP_NOTIFY)(r.NS_ACTIVITY)),e.disco.addFeature((0,r.NS_PEP_NOTIFY)(r.NS_GEOLOC)),e.disco.addFeature((0,r.NS_PEP_NOTIFY)(r.NS_MOOD)),e.disco.addFeature((0,r.NS_PEP_NOTIFY)(r.NS_NICK)),e.disco.addFeature((0,r.NS_PEP_NOTIFY)(r.NS_TUNE)),e.publishActivity=t=>e.publish("",r.NS_ACTIVITY,{itemType:r.NS_ACTIVITY,...t}),e.publishGeoLoc=t=>e.publish("",r.NS_GEOLOC,{itemType:r.NS_GEOLOC,...t}),e.publishMood=t=>e.publish("",r.NS_MOOD,{itemType:r.NS_MOOD,...t}),e.publishNick=t=>e.publish("",r.NS_NICK,{itemType:r.NS_NICK,nick:t}),e.publishTune=t=>e.publish("",r.NS_TUNE,{itemType:r.NS_TUNE,...t}),e.on("pubsub:published",(t=>{const i=t.pubsub.items.published[0].content;switch(t.pubsub.items.node){case r.NS_ACTIVITY:return e.emit("activity",{activity:i,jid:t.from});case r.NS_GEOLOC:return e.emit("geoloc",{geoloc:i,jid:t.from});case r.NS_MOOD:return e.emit("mood",{jid:t.from,mood:i});case r.NS_NICK:return e.emit("nick",{jid:t.from,nick:i.nick});case r.NS_TUNE:return e.emit("tune",{jid:t.from,tune:t.pubsub.items.published[0].content})}}))}},2612:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=(0,i(7582).__importStar)(i(549)),n=i(6552);t.default=function(e){e.disco.addFeature(`${n.NS_SHIM}#SubID`,n.NS_SHIM),e.on("message",(t=>{!function(e){return!!e.pubsub&&!(e.pubsub.context&&"user"!==e.pubsub.context||!e.pubsub.affiliations)}(t)?function(e){return!!e.pubsub}(t)&&(e.emit("pubsub:event",t),function(e){return!!e.pubsub.items&&!!e.pubsub.items.published}(t)?e.emit("pubsub:published",t):function(e){return!!e.pubsub.items&&!!e.pubsub.items.retracted}(t)?e.emit("pubsub:retracted",t):function(e){return"purge"===e.pubsub.eventType}(t)?e.emit("pubsub:purged",t):function(e){return"delete"===e.pubsub.eventType}(t)?e.emit("pubsub:deleted",t):function(e){return"subscription"===e.pubsub.eventType}(t)?e.emit("pubsub:subscription",t):function(e){return"configuration"===e.pubsub.eventType}(t)&&e.emit("pubsub:config",t)):e.emit("pubsub:affiliations",t)})),e.subscribeToNode=async(t,i)=>{const n={};let s;"string"==typeof i?(n.node=i,n.jid=r.toBare(e.jid)):(n.node=i.node,n.jid=i.jid||(i.useBareJID?r.toBare(e.jid):e.jid),s=i.options);const a=await e.sendIQ({pubsub:{context:"user",subscribe:n,subscriptionOptions:s?{form:s}:void 0},to:t,type:"set"}),o=a.pubsub.subscription||{};return a.pubsub.subscriptionOptions&&(o.options=a.pubsub.subscriptionOptions.form),o},e.unsubscribeFromNode=async(t,i)=>{const n={};"string"==typeof i?(n.node=i,n.jid=r.toBare(e.jid)):(n.node=i.node,n.subid=i.subid,n.jid=i.jid||(i.useBareJID?r.toBare(e.jid):e.jid));const s=await e.sendIQ({pubsub:{context:"user",unsubscribe:n},to:t,type:"set"});return s.pubsub&&s.pubsub.subscription?s.pubsub.subscription:{...n,state:"none"}},e.publish=(t,i,r,n)=>e.sendIQ({pubsub:{context:"user",publish:{item:{content:r,id:n},node:i}},to:t,type:"set"}),e.getItem=async(t,i,r)=>(await e.sendIQ({pubsub:{context:"user",fetch:{items:[{id:r}],node:i}},to:t,type:"get"})).pubsub.fetch.items[0],e.getItems=async(t,i,r={})=>{const n=await e.sendIQ({pubsub:{context:"user",fetch:{max:r.max,node:i},paging:r},to:t,type:"get"}),s=n.pubsub.fetch;return s.paging=n.pubsub.paging,s},e.retract=(t,i,r,n)=>e.sendIQ({pubsub:{context:"user",retract:{id:r,node:i,notify:n}},to:t,type:"set"}),e.purgeNode=(t,i)=>e.sendIQ({pubsub:{context:"owner",purge:i},to:t,type:"set"}),e.deleteNode=(t,i,r)=>e.sendIQ({pubsub:{context:"owner",destroy:{node:i,redirect:r}},to:t,type:"set"}),e.createNode=async(t,i,r)=>{const n=await e.sendIQ({pubsub:{configure:r?{form:r}:void 0,context:"user",create:{node:i}},to:t,type:"set"});return n.pubsub&&n.pubsub.create?n.pubsub.create:{node:i}},e.getSubscriptions=async(t,i={})=>(await e.sendIQ({pubsub:{context:"user",subscriptions:i},to:t,type:"get"})).pubsub.subscriptions,e.getAffiliations=(t,i)=>e.sendIQ({pubsub:{affiliations:{node:i}},to:t,type:"get"}),e.getNodeSubscribers=(t,i,r={})=>("string"==typeof i?r.node=i:r={...r,...i},e.sendIQ({pubsub:{context:"owner",subscriptions:r},to:t,type:"get"})),e.updateNodeSubscriptions=(t,i,r)=>e.sendIQ({pubsub:{context:"owner",subscriptions:{items:r,node:i}},to:t,type:"set"}),e.getNodeAffiliations=async(t,i)=>(await e.sendIQ({pubsub:{affiliations:{node:i},context:"owner"},to:t,type:"get"})).pubsub.affiliations,e.updateNodeAffiliations=(t,i,r)=>e.sendIQ({pubsub:{affiliations:{items:r,node:i},context:"owner"},to:t,type:"set"}),e.getNodeConfig=async(t,i)=>(await e.sendIQ({pubsub:{configure:{node:i},context:"owner"},to:t,type:"get"})).pubsub.configure.form||{},e.getDefaultNodeConfig=async t=>(await e.sendIQ({pubsub:{context:"owner",defaultConfiguration:{}},to:t,type:"get"})).pubsub.defaultConfiguration.form||{},e.configureNode=async(t,i,r)=>e.sendIQ({pubsub:{configure:{form:r,node:i},context:"owner"},to:t,type:"set"}),e.getDefaultSubscriptionOptions=async t=>(await e.sendIQ({pubsub:{defaultSubscriptionOptions:{}},to:t,type:"get"})).pubsub.defaultSubscriptionOptions.form||{}}},8580:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=(0,i(7582).__importStar)(i(549));t.default=function(e){async function t(t,i){await e.sendIQ({blockList:{action:t,jids:[i]},type:"set"})}e.on("iq:set:roster",(t=>{if(!r.allowedResponders(e.jid).has(t.from))return e.sendIQError(t,{error:{condition:"service-unavailable",type:"cancel"}});e.emit("roster:update",t),e.sendIQResult(t)})),e.on("iq:set:blockList",(t=>{if(!r.allowedResponders(e.jid).has(t.from))return e.sendIQError(t,{error:{condition:"service-unavailable",type:"cancel"}});const i=t.blockList;e.emit(i.action,{jids:i.jids||[]}),e.sendIQResult(t)})),e.getRoster=async()=>{const t=await e.sendIQ({roster:{version:e.config.rosterVer},type:"get"});if(t.roster){const i=t.roster.version;return i&&(e.config.rosterVer=i,e.emit("roster:ver",i)),t.roster.items=t.roster.items||[],t.roster}return{items:[]}},e.updateRosterItem=async t=>{await e.sendIQ({roster:{items:[t]},type:"set"})},e.removeRosterItem=t=>e.updateRosterItem({jid:t,subscription:"remove"}),e.subscribe=t=>{e.sendPresence({type:"subscribe",to:t})},e.unsubscribe=t=>{e.sendPresence({type:"unsubscribe",to:t})},e.acceptSubscription=t=>{e.sendPresence({type:"subscribed",to:t})},e.denySubscription=t=>{e.sendPresence({type:"unsubscribed",to:t})},e.getBlocked=async()=>({jids:[],...(await e.sendIQ({blockList:{action:"list"},type:"get"})).blockList}),e.block=async e=>t("block",e),e.unblock=async e=>t("unblock",e),e.goInvisible=async(t=!1)=>{await e.sendIQ({type:"set",visiblity:{probe:t,type:"invisible"}})},e.goVisible=async()=>{await e.sendIQ({type:"set",visiblity:{type:"visible"}})}}},3608:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){e.registerFeature("sasl",100,(async(t,i)=>{const r=e.sasl.createMechanism(t.sasl.mechanisms),n=async t=>{if(r)switch(t.type){case"success":return e.features.negotiated.sasl=!0,e.off("sasl",n),e.emit("auth:success",e.config.credentials),e.transport&&(e.transport.authenticated=!0),void i("restart");case"challenge":r.processChallenge(t.value);try{const t=await e.getCredentials(),i=r.createResponse(t);i||""===i?e.send("sasl",{type:"response",value:i}):e.send("sasl",{type:"response"});const n=r.getCacheableCredentials();n&&(e.config.credentials||(e.config.credentials={}),e.config.credentials={...e.config.credentials,...n},e.emit("credentials:update",e.config.credentials))}catch(t){console.error(t),e.send("sasl",{type:"abort"})}return;case"failure":case"abort":return e.off("sasl",n),e.emit("auth:failed"),void i("disconnect","authentication failed")}};if(!r)return e.off("sasl",n),e.emit("auth:failed"),i("disconnect","authentication failed");e.on("sasl",n),e.once("--reset-stream-features",(()=>{e.features.negotiated.sasl=!1,e.off("sasl",n)}));try{const t=await e.getCredentials();e.send("sasl",{mechanism:r.name,type:"auth",value:r.createResponse(t)})}catch(t){console.error(t),e.send("sasl",{type:"abort"})}}))}},9557:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=(0,i(7582).__importStar)(i(549)),n=i(6552);t.default=function(e){async function t(t){const i=await e.getDiscoInfo(t);if(!i.features||!i.features.includes(n.NS_HTTP_UPLOAD_0))return;let r;for(const e of i.extensions||[]){const i=e.fields||[];if(i.some((e=>"FORM_TYPE"===e.name&&e.value===n.NS_HTTP_UPLOAD_0))){const e=i.find((e=>"max-file-size"===e.name));return e&&(r=parseInt(e.value,10)),{jid:t,maxSize:r}}}}e.disco.addFeature(n.NS_BOB),e.getBits=async(t,i)=>(await e.sendIQ({bits:{cid:i},to:t,type:"get"})).bits,e.getUploadService=async(i=r.getDomain(e.jid))=>{const n=await t(i);if(n)return n;const s=await e.getDiscoItems(i);for(const e of s.items||[]){if(!e.jid)continue;const i=await t(e.jid);if(i)return i}throw new Error("No upload service discovered on: "+i)},e.getUploadSlot=async(t,i)=>(await e.sendIQ({httpUpload:{type:"request",...i},to:t,type:"get"})).httpUpload}},9672:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=i(7582);(0,r.__exportStar)(i(9317),t),(0,r.__exportStar)(i(542),t),(0,r.__exportStar)(i(3405),t),(0,r.__exportStar)(i(1848),t),(0,r.__exportStar)(i(7318),t),(0,r.__exportStar)(i(7137),t),(0,r.__exportStar)(i(2021),t),(0,r.__exportStar)(i(1672),t),(0,r.__exportStar)(i(5669),t),(0,r.__exportStar)(i(2506),t),(0,r.__exportStar)(i(1285),t),(0,r.__exportStar)(i(3893),t),(0,r.__exportStar)(i(3225),t),(0,r.__exportStar)(i(2679),t),(0,r.__exportStar)(i(5623),t),(0,r.__exportStar)(i(1140),t),(0,r.__exportStar)(i(724),t),(0,r.__exportStar)(i(5149),t),(0,r.__exportStar)(i(3562),t),(0,r.__exportStar)(i(6158),t),(0,r.__exportStar)(i(1565),t),(0,r.__exportStar)(i(5121),t),(0,r.__exportStar)(i(5807),t),(0,r.__exportStar)(i(7471),t),(0,r.__exportStar)(i(8936),t),(0,r.__exportStar)(i(426),t),(0,r.__exportStar)(i(3546),t),(0,r.__exportStar)(i(7090),t),(0,r.__exportStar)(i(4471),t),(0,r.__exportStar)(i(4476),t),(0,r.__exportStar)(i(7960),t),(0,r.__exportStar)(i(644),t),(0,r.__exportStar)(i(1505),t),(0,r.__exportStar)(i(713),t),(0,r.__exportStar)(i(7258),t),(0,r.__exportStar)(i(8794),t),(0,r.__exportStar)(i(9002),t),(0,r.__exportStar)(i(7521),t),(0,r.__exportStar)(i(921),t),(0,r.__exportStar)(i(5869),t),(0,r.__exportStar)(i(2801),t),(0,r.__exportStar)(i(9278),t),(0,r.__exportStar)(i(880),t),(0,r.__exportStar)(i(7855),t),(0,r.__exportStar)(i(6796),t),(0,r.__exportStar)(i(6410),t),(0,r.__exportStar)(i(4445),t),(0,r.__exportStar)(i(5856),t),(0,r.__exportStar)(i(251),t),(0,r.__exportStar)(i(2607),t),(0,r.__exportStar)(i(9867),t),(0,r.__exportStar)(i(8466),t),(0,r.__exportStar)(i(1097),t),(0,r.__exportStar)(i(6857),t),(0,r.__exportStar)(i(7978),t),(0,r.__exportStar)(i(8634),t),(0,r.__exportStar)(i(7905),t),(0,r.__exportStar)(i(2777),t),(0,r.__exportStar)(i(415),t),(0,r.__exportStar)(i(4207),t),(0,r.__exportStar)(i(2649),t),(0,r.__exportStar)(i(5310),t),(0,r.__exportStar)(i(964),t),(0,r.__exportStar)(i(2584),t),(0,r.__exportStar)(i(3163),t),(0,r.__exportStar)(i(2638),t),(0,r.__exportStar)(i(3394),t),(0,r.__exportStar)(i(6532),t),(0,r.__exportStar)(i(8662),t),(0,r.__exportStar)(i(1965),t),(0,r.__exportStar)(i(9639),t),(0,r.__exportStar)(i(7188),t),(0,r.__exportStar)(i(8711),t),(0,r.__exportStar)(i(6027),t),(0,r.__exportStar)(i(9542),t),(0,r.__exportStar)(i(8967),t),(0,r.__exportStar)(i(2691),t),(0,r.__exportStar)(i(7687),t),(0,r.__exportStar)(i(8210),t),(0,r.__exportStar)(i(9943),t),(0,r.__exportStar)(i(6335),t);const n=(0,r.__importDefault)(i(9317)),s=(0,r.__importDefault)(i(542)),a=(0,r.__importDefault)(i(3405)),o=(0,r.__importDefault)(i(1848)),l=(0,r.__importDefault)(i(7318)),c=(0,r.__importDefault)(i(7137)),u=(0,r.__importDefault)(i(2021)),p=(0,r.__importDefault)(i(1672)),d=(0,r.__importDefault)(i(5669)),h=(0,r.__importDefault)(i(2506)),f=(0,r.__importDefault)(i(1285)),m=(0,r.__importDefault)(i(3893)),g=(0,r.__importDefault)(i(3225)),_=(0,r.__importDefault)(i(2679)),b=(0,r.__importDefault)(i(5623)),y=(0,r.__importDefault)(i(1140)),S=(0,r.__importDefault)(i(724)),v=(0,r.__importDefault)(i(5149)),N=(0,r.__importDefault)(i(3562)),T=(0,r.__importDefault)(i(6158)),A=(0,r.__importDefault)(i(1565)),E=(0,r.__importDefault)(i(5121)),w=(0,r.__importDefault)(i(5807)),I=(0,r.__importDefault)(i(7471)),x=(0,r.__importDefault)(i(8936)),C=(0,r.__importDefault)(i(426)),O=(0,r.__importDefault)(i(3546)),R=(0,r.__importDefault)(i(7090)),P=(0,r.__importDefault)(i(4471)),j=(0,r.__importDefault)(i(4476)),k=(0,r.__importDefault)(i(7960)),M=(0,r.__importDefault)(i(644)),L=(0,r.__importDefault)(i(713)),D=(0,r.__importDefault)(i(7258)),F=(0,r.__importDefault)(i(8794)),B=(0,r.__importDefault)(i(1505)),q=(0,r.__importDefault)(i(9002)),U=(0,r.__importDefault)(i(7521)),J=(0,r.__importDefault)(i(921)),G=(0,r.__importDefault)(i(5869)),z=(0,r.__importDefault)(i(2801)),H=(0,r.__importDefault)(i(9278)),V=(0,r.__importDefault)(i(880)),$=(0,r.__importDefault)(i(7855)),W=(0,r.__importDefault)(i(6796)),Q=(0,r.__importDefault)(i(6410)),K=(0,r.__importDefault)(i(4445)),X=(0,r.__importDefault)(i(5856)),Y=(0,r.__importDefault)(i(251)),Z=(0,r.__importDefault)(i(2607)),ee=(0,r.__importDefault)(i(9867)),te=(0,r.__importDefault)(i(8466)),ie=(0,r.__importDefault)(i(1097)),re=(0,r.__importDefault)(i(6857)),ne=(0,r.__importDefault)(i(7978)),se=(0,r.__importDefault)(i(8634)),ae=(0,r.__importDefault)(i(7905)),oe=(0,r.__importDefault)(i(2777)),le=(0,r.__importDefault)(i(415)),ce=(0,r.__importDefault)(i(4207)),ue=(0,r.__importDefault)(i(2649)),pe=(0,r.__importDefault)(i(5310)),de=(0,r.__importDefault)(i(964)),he=(0,r.__importDefault)(i(2584)),fe=(0,r.__importDefault)(i(3163)),me=(0,r.__importDefault)(i(2638)),ge=(0,r.__importDefault)(i(3394)),_e=(0,r.__importDefault)(i(6532)),be=(0,r.__importDefault)(i(8662)),ye=(0,r.__importDefault)(i(1965)),Se=(0,r.__importDefault)(i(9639)),ve=(0,r.__importDefault)(i(7188)),Ne=(0,r.__importDefault)(i(8711)),Te=(0,r.__importDefault)(i(6027)),Ae=(0,r.__importDefault)(i(9542)),Ee=(0,r.__importDefault)(i(8967)),we=(0,r.__importDefault)(i(2691)),Ie=(0,r.__importDefault)(i(7687)),xe=(0,r.__importDefault)(i(8210)),Ce=(0,r.__importDefault)(i(9943)),Oe=(0,r.__importDefault)(i(6335)),Re=[n.default,s.default,a.default,o.default,l.default,c.default,u.default,p.default,d.default,h.default,f.default,m.default,g.default,_.default,b.default,y.default,S.default,v.default,N.default,T.default,A.default,E.default,w.default,I.default,x.default,C.default,O.default,R.default,P.default,j.default,k.default,M.default,L.default,D.default,F.default,B.default,q.default,U.default,J.default,G.default,z.default,H.default,V.default,$.default,W.default,Q.default,K.default,X.default,Y.default,Z.default,ee.default,te.default,ie.default,re.default,ne.default,se.default,ae.default,oe.default,le.default,ce.default,ue.default,pe.default,de.default,he.default,fe.default,me.default,ge.default,_e.default,be.default,ye.default,Se.default,ve.default,Ne.default,Te.default,Ae.default,Ee.default,we.default,Ie.default,xe.default,Ce.default,Oe.default];t.default=Re},9317:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=i(9447),n=i(6552),s={aliases:["features.legacySession","iq.legacySession"],element:"session",fields:{optional:(0,r.childBoolean)(null,"optional")},namespace:n.NS_SESSION};t.default=s},542:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=i(9447),n=i(6552),s=[{aliases:["atomentry",...(0,r.pubsubItemContentAliases)()],element:"entry",fields:{id:(0,r.childText)(null,"id"),published:(0,r.childDate)(null,"published"),updated:(0,r.childDate)(null,"updated")},namespace:n.NS_ATOM,type:n.NS_ATOM,typeField:"itemType"},{element:"summary",fields:{text:(0,r.text)(),type:(0,r.attribute)("type","text")},namespace:n.NS_ATOM,path:"atomentry.summary"},{element:"title",fields:{text:(0,r.text)(),type:(0,r.attribute)("type","text")},namespace:n.NS_ATOM,path:"atomentry.title"},{aliases:[{path:"atomentry.links",multiple:!0}],element:"link",fields:{href:(0,r.attribute)("href"),mediaType:(0,r.attribute)("type"),rel:(0,r.attribute)("rel")},namespace:n.NS_ATOM},{aliases:[{path:"atomentry.authors",multiple:!0}],element:"author",fields:{name:(0,r.childText)(null,"name"),uri:(0,r.childText)(null,"uri"),email:(0,r.childText)(null,"email")},namespace:n.NS_ATOM},{aliases:[{path:"atomentry.contributors",multiple:!0}],element:"contributor",fields:{name:(0,r.childText)(null,"name"),uri:(0,r.childText)(null,"uri"),email:(0,r.childText)(null,"email")},namespace:n.NS_ATOM},{aliases:[{path:"atomentry.categories",multiple:!0}],element:"category",fields:{term:(0,r.attribute)("term"),scheme:(0,r.attribute)("scheme"),label:(0,r.attribute)("label")},namespace:n.NS_ATOM},{element:"content",fields:{text:(0,r.text)(),type:(0,r.attribute)("type","text")},namespace:n.NS_ATOM,path:"atomentry.content"},{element:"rights",fields:{text:(0,r.text)(),type:(0,r.attribute)("type","text")},namespace:n.NS_ATOM,path:"atomentry.rights"}];t.default=s},3405:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=i(2768),n=i(9447),s=i(6552),a={defaultType:"stream",element:"stream",fields:{from:(0,n.attribute)("from"),id:(0,n.attribute)("id"),lang:(0,n.languageAttribute)(),to:(0,n.attribute)("to"),version:(0,n.attribute)("version")},namespace:s.NS_STREAM,path:"stream",type:"stream",typeField:"action"},o={element:"features",namespace:s.NS_STREAM,path:"features"},l={element:"error",fields:{alternateLanguageText:(0,n.childAlternateLanguageText)(s.NS_STREAMS,"text"),condition:(0,n.childEnum)(s.NS_STREAMS,Object.values(r.StreamErrorCondition),r.StreamErrorCondition.UndefinedCondition),seeOtherHost:(0,n.childText)(s.NS_STREAMS,r.StreamErrorCondition.SeeOtherHost),text:(0,n.childText)(s.NS_STREAMS,"text")},namespace:s.NS_STREAM,path:"streamError"},c=Object.values(r.StreamType).map((e=>({aliases:["stanzaError","message.error","presence.error","iq.error"],defaultType:s.NS_CLIENT,element:"error",fields:{alternateLanguageText:(0,n.childAlternateLanguageText)(s.NS_STANZAS,"text"),by:(0,n.JIDAttribute)("by"),condition:(0,n.childEnum)(s.NS_STANZAS,Object.values(r.StanzaErrorCondition),r.StanzaErrorCondition.UndefinedCondition),gone:(0,n.childText)(s.NS_STANZAS,r.StanzaErrorCondition.Gone),redirect:(0,n.childText)(s.NS_STANZAS,r.StanzaErrorCondition.Redirect),text:(0,n.childText)(s.NS_STANZAS,"text"),type:(0,n.attribute)("type")},namespace:e,type:e,typeField:"streamType"}))),u=new Set(["from","id","lang","to","type","payloadType","error","streamType"]),p=Object.values(r.StreamType).map((e=>({childrenExportOrder:{error:2e5},defaultType:s.NS_CLIENT,element:"iq",fields:{from:(0,n.JIDAttribute)("from"),id:(0,n.attribute)("id"),lang:(0,n.languageAttribute)(),payloadType:{order:-1e4,importer(e,t){if("get"!==t.data.type&&"set"!==t.data.type)return;if(1!==e.children.filter((e=>"string"!=typeof e)).length)return"invalid-payload-count";const i=Object.keys(t.data).filter((e=>!u.has(e)));return 1!==i.length?"unknown-payload":i[0]}},to:(0,n.JIDAttribute)("to"),type:(0,n.attribute)("type")},namespace:e,path:"iq",type:e,typeField:"streamType"}))),d=Object.values(r.StreamType).map((e=>({childrenExportOrder:{error:2e5},defaultType:s.NS_CLIENT,element:"message",fields:{from:(0,n.JIDAttribute)("from"),id:(0,n.attribute)("id"),lang:(0,n.languageAttribute)(),to:(0,n.JIDAttribute)("to")},namespace:e,path:"message",type:e,typeField:"streamType"}))),h=Object.values(r.StreamType).map((e=>({childrenExportOrder:{error:2e5},defaultType:s.NS_CLIENT,element:"presence",fields:{from:(0,n.JIDAttribute)("from"),id:(0,n.attribute)("id"),lang:(0,n.languageAttribute)(),to:(0,n.JIDAttribute)("to")},namespace:e,path:"presence",type:e,typeField:"streamType"}))),f=[a,o,l,...c,{element:"mechanisms",fields:{mechanisms:(0,n.multipleChildText)(null,"mechanism")},namespace:s.NS_SASL,path:"features.sasl"},{element:"abort",namespace:s.NS_SASL,path:"sasl",type:"abort",typeField:"type"},{element:"auth",fields:{mechanism:(0,n.attribute)("mechanism"),value:(0,n.textBuffer)("base64")},namespace:s.NS_SASL,path:"sasl",type:"auth",typeField:"type"},{element:"challenge",fields:{value:(0,n.textBuffer)("base64")},namespace:s.NS_SASL,path:"sasl",type:"challenge",typeField:"type"},{element:"response",fields:{value:(0,n.textBuffer)("base64")},namespace:s.NS_SASL,path:"sasl",type:"response",typeField:"type"},{element:"success",fields:{value:(0,n.textBuffer)("base64")},namespace:s.NS_SASL,path:"sasl",type:"success",typeField:"type"},{element:"failure",fields:{alternateLanguageText:(0,n.childAlternateLanguageText)(s.NS_SASL,"text"),condition:(0,n.childEnum)(s.NS_SASL,Object.values(r.SASLFailureCondition)),text:(0,n.childText)(s.NS_SASL,"text")},namespace:s.NS_SASL,path:"sasl",type:"failure",typeField:"type"},{aliases:["features.tls"],defaultType:"start",element:"starttls",fields:{required:(0,n.childBoolean)(null,"required")},namespace:s.NS_STARTTLS,path:"tls",type:"start",typeField:"type"},{element:"proceed",namespace:s.NS_STARTTLS,path:"tls",type:"proceed",typeField:"type"},{element:"failure",namespace:s.NS_STARTTLS,path:"tls",type:"failure",typeField:"type"},...p,...d,...h,{aliases:["features.bind","iq.bind"],element:"bind",fields:{jid:(0,n.childText)(null,"jid"),resource:(0,n.childText)(null,"resource")},namespace:s.NS_BIND}];t.default=f},1848:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=i(9447),n=i(6552),s=[(0,r.extendStreamFeatures)({rosterPreApproval:(0,r.childBoolean)(n.NS_SUBSCRIPTION_PREAPPROVAL,"sub"),rosterVersioning:(0,r.childBoolean)(n.NS_ROSTER_VERSIONING,"ver")}),(0,r.extendMessage)({alternateLanguageBodies:(0,r.childAlternateLanguageText)(null,"body"),alternateLanguageSubjects:(0,r.childAlternateLanguageText)(null,"subject"),body:(0,r.childText)(null,"body"),hasSubject:(0,r.childBoolean)(null,"subject"),parentThread:(0,r.childAttribute)(null,"thread","parent"),subject:(0,r.childText)(null,"subject"),thread:(0,r.childText)(null,"thread"),type:(0,r.attribute)("type")}),(0,r.extendPresence)({alternateLanguageStatuses:(0,r.childAlternateLanguageText)(null,"status"),priority:(0,r.childInteger)(null,"priority",0),show:(0,r.childText)(null,"show"),status:(0,r.childText)(null,"status"),type:(0,r.attribute)("type")}),{element:"query",fields:{version:(0,r.attribute)("ver",void 0,{emitEmpty:!0})},namespace:n.NS_ROSTER,path:"iq.roster"},{aliases:[{path:"iq.roster.items",multiple:!0}],element:"item",fields:{groups:(0,r.multipleChildText)(null,"group"),jid:(0,r.JIDAttribute)("jid"),name:(0,r.attribute)("name"),pending:(0,r.attribute)("ask"),preApproved:(0,r.booleanAttribute)("approved"),subscription:(0,r.attribute)("subscription")},namespace:n.NS_ROSTER}];t.default=s},7318:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=i(9447),n=i(6552),s=[{element:"open",fields:{from:(0,r.attribute)("from"),id:(0,r.attribute)("id"),lang:(0,r.languageAttribute)(),to:(0,r.attribute)("to"),version:(0,r.attribute)("version")},namespace:n.NS_FRAMING,path:"stream",type:"open"},{element:"close",fields:{seeOtherURI:(0,r.attribute)("see-other-uri")},namespace:n.NS_FRAMING,path:"stream",type:"close"}];t.default=s},7137:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=i(2768),n=i(9447),s=i(6552),a=[{aliases:[{path:"message.forms",multiple:!0}],element:"x",fields:{instructions:{...(0,n.multipleChildText)(null,"instructions"),exportOrder:2},reported:{...(0,n.splicePath)(null,"reported","dataformField",!0),exportOrder:3},title:{...(0,n.childText)(null,"title"),exportOrder:1},type:(0,n.attribute)("type")},namespace:s.NS_DATAFORM,optionalNamespaces:{xdv:s.NS_DATAFORM_VALIDATION},path:"dataform"},{aliases:[{path:"dataform.fields",multiple:!0},{path:"dataform.items.fields",multiple:!0}],element:"field",fields:{description:(0,n.childText)(null,"desc"),label:(0,n.attribute)("label"),name:(0,n.attribute)("var"),rawValues:{...(0,n.multipleChildText)(null,"value"),exporter:()=>null},required:(0,n.childBoolean)(null,"required"),type:(0,n.attribute)("type"),value:{importer(e,t){const i=e.getAttribute("type"),a=(0,n.multipleChildText)(s.NS_DATAFORM,"value").importer(e,t),o=a[0];switch(i){case r.DataFormFieldType.TextMultiple:case r.DataFormFieldType.ListMultiple:case r.DataFormFieldType.JIDMultiple:return a;case r.DataFormFieldType.Hidden:case r.DataFormFieldType.Fixed:return 1===a.length?o:a;case r.DataFormFieldType.Boolean:if(o)return"1"===o||"true"===o;break;default:return o}},exporter(e,t,i){const r=(0,n.multipleChildText)(null,"value");let a=[];const o=i.data&&i.data.rawValues?i.data.rawValues[0]:void 0;if("boolean"==typeof t)a="true"===o||"false"===o?[o]:[t?"1":"0"];else if(Array.isArray(t))for(const e of t)a.push(e.toString());else a=[t.toString()];r.exporter(e,a,Object.assign({},i,{namespace:s.NS_DATAFORM}))}}},namespace:s.NS_DATAFORM,path:"dataformField"},{aliases:[{path:"dataform.fields.options",multiple:!0}],element:"option",fields:{label:(0,n.attribute)("label"),value:(0,n.childText)(null,"value")},namespace:s.NS_DATAFORM},{aliases:[{path:"dataform.items",multiple:!0}],element:"item",namespace:s.NS_DATAFORM},{element:"validate",fields:{listMax:(0,n.childIntegerAttribute)(null,"list-range","max"),listMin:(0,n.childIntegerAttribute)(null,"list-range","min"),method:(0,n.childEnum)(null,["basic","open","range","regex"],"basic"),rangeMax:(0,n.childAttribute)(null,"range","max"),rangeMin:(0,n.childAttribute)(null,"range","min"),regex:(0,n.childText)(null,"regex"),type:(0,n.attribute)("datatype","xs:string")},namespace:s.NS_DATAFORM_VALIDATION,path:"dataform.fields.validation"}];t.default=a},2021:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=i(9447),n=i(6552),s=[{aliases:["presence.legacyLastActivity","iq.lastActivity"],element:"query",fields:{seconds:(0,r.integerAttribute)("seconds"),status:(0,r.text)()},namespace:n.NS_LAST_ACTIVITY}];t.default=s},1672:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=i(9447),n=i(6552),s=[{element:"query",fields:{activeList:(0,r.childAttribute)(null,"active","name"),defaultList:(0,r.childAttribute)(null,"default","name")},namespace:n.NS_PRIVACY,path:"iq.privacy"},{aliases:[{path:"iq.privacy.lists",multiple:!0}],element:"list",fields:{name:(0,r.attribute)("name")},namespace:n.NS_PRIVACY},{aliases:[{path:"iq.privacy.lists.items",multiple:!0}],element:"item",fields:{action:(0,r.attribute)("action"),incomingPresence:(0,r.childBoolean)(null,"presence-in"),iq:(0,r.childBoolean)(null,"iq"),messages:(0,r.childBoolean)(null,"message"),order:(0,r.integerAttribute)("order"),outgoingPresence:(0,r.childBoolean)(null,"presence-out"),type:(0,r.attribute)("type"),value:(0,r.attribute)("value")},namespace:n.NS_PRIVACY}];t.default=s},5669:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=i(9447),n=i(6552),s=[{aliases:["iq.disco","message.disco","features.disco"],childrenExportOrder:{identities:1,features:2,extensions:3},element:"query",fields:{features:(0,r.multipleChildAttribute)(null,"feature","var"),node:(0,r.attribute)("node")},namespace:n.NS_DISCO_INFO,path:"disco",type:"info",typeField:"type"},{aliases:[{path:"disco.identities",selector:"info",multiple:!0}],element:"identity",fields:{category:(0,r.attribute)("category"),lang:(0,r.languageAttribute)(),name:(0,r.attribute)("name"),type:(0,r.attribute)("type")},namespace:n.NS_DISCO_INFO},{aliases:[{path:"disco.items",multiple:!0,selector:"items"}],element:"item",fields:{jid:(0,r.JIDAttribute)("jid"),name:(0,r.attribute)("name"),node:(0,r.attribute)("node")},namespace:n.NS_DISCO_ITEMS},{aliases:[{path:"disco.items",multiple:!0,selector:"info"}],element:"item",fields:{category:(0,r.JIDAttribute)("category"),lang:(0,r.languageAttribute)(),name:(0,r.attribute)("name"),type:(0,r.attribute)("type")},namespace:n.NS_DISCO_INFO},(0,r.addAlias)(n.NS_DATAFORM,"x",[{path:"disco.extensions",multiple:!0,selector:"info"}]),(0,r.addAlias)(n.NS_RSM,"set",[{path:"disco.paging",selector:"items"}]),{aliases:["iq.disco","message.disco","features.disco"],element:"query",fields:{node:(0,r.attribute)("node")},namespace:n.NS_DISCO_ITEMS,path:"disco",type:"items",typeField:"type"}];t.default=s},2506:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=i(9447),n=i(6552),s=[(0,r.extendMessage)({addresses:(0,r.splicePath)(n.NS_ADDRESS,"addresses","extendedAddress",!0)}),(0,r.extendPresence)({addresses:(0,r.splicePath)(n.NS_ADDRESS,"addresses","extendedAddress",!0)}),{element:"address",fields:{alternateLanguageDescriptions:(0,r.childAlternateLanguageText)(null,"desc"),delivered:(0,r.booleanAttribute)("delivered"),description:(0,r.attribute)("desc"),jid:(0,r.JIDAttribute)("jid"),node:(0,r.attribute)("node"),type:(0,r.attribute)("type"),uri:(0,r.attribute)("uri")},namespace:n.NS_ADDRESS,path:"extendedAddress"}];t.default=s},1285:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=i(9447),n=i(6552),s=[(0,r.addAlias)(n.NS_DATAFORM,"x",[{path:"iq.muc.form",selector:"configure"}]),{defaultType:"info",element:"x",fields:{password:(0,r.childText)(null,"password")},namespace:n.NS_MUC,path:"presence.muc",type:"join",typeField:"type"},{aliases:[{path:"presence.muc.history",selector:"join"}],element:"history",fields:{maxCharacters:(0,r.integerAttribute)("maxchars"),maxStanzas:(0,r.integerAttribute)("maxstanzas"),seconds:(0,r.integerAttribute)("seconds"),since:(0,r.dateAttribute)("since")},namespace:n.NS_MUC},{aliases:["presence.muc","message.muc"],defaultType:"info",element:"x",fields:{action:(0,r.childEnum)(null,["invite","decline","destroy"]),actor:(0,r.splicePath)(null,"item","mucactor"),affiliation:(0,r.childAttribute)(null,"item","affiliation"),jid:(0,r.childJIDAttribute)(null,"item","jid"),nick:(0,r.childAttribute)(null,"item","nick"),password:(0,r.childText)(null,"password"),reason:(0,r.deepChildText)([{namespace:null,element:"item"},{namespace:null,element:"reason"}]),role:(0,r.childAttribute)(null,"item","role"),statusCodes:(0,r.multipleChildAttribute)(null,"status","code")},namespace:n.NS_MUC_USER,type:"info",typeField:"type",typeOrder:1},{element:"actor",fields:{jid:(0,r.JIDAttribute)("jid"),nick:(0,r.attribute)("nick")},namespace:n.NS_MUC_USER,path:"mucactor"},{element:"destroy",fields:{jid:(0,r.JIDAttribute)("jid"),password:(0,r.childText)(null,"password"),reason:(0,r.childText)(null,"reason")},namespace:n.NS_MUC_USER,path:"presence.muc.destroy"},{aliases:[{path:"message.muc.invite",multiple:!0}],element:"invite",fields:{continue:(0,r.childBoolean)(null,"continue"),from:(0,r.JIDAttribute)("from"),reason:(0,r.childText)(null,"reason"),thread:(0,r.childAttribute)(null,"continue","thread"),to:(0,r.JIDAttribute)("to")},namespace:n.NS_MUC_USER},{element:"decline",fields:{from:(0,r.JIDAttribute)("from"),reason:(0,r.childText)(null,"reason"),to:(0,r.JIDAttribute)("to")},namespace:n.NS_MUC_USER,path:"message.muc",type:"decline"},{element:"query",namespace:n.NS_MUC_ADMIN,path:"iq.muc",type:"user-list",typeField:"type"},{aliases:[{path:"iq.muc.users",multiple:!0,selector:"user-list"}],element:"item",fields:{affiliation:(0,r.attribute)("affiliation"),jid:(0,r.JIDAttribute)("jid"),nick:(0,r.attribute)("nick"),reason:(0,r.childText)(null,"reason"),role:(0,r.attribute)("role")},namespace:n.NS_MUC_ADMIN},{aliases:["iq.muc.users.actor"],element:"actor",fields:{jid:(0,r.JIDAttribute)("jid"),nick:(0,r.attribute)("nick")},namespace:n.NS_MUC_ADMIN},{element:"query",namespace:n.NS_MUC_OWNER,path:"iq.muc",type:"configure",typeField:"type"},{aliases:[{path:"iq.muc.destroy",selector:"configure"}],element:"destroy",fields:{jid:(0,r.JIDAttribute)("jid"),password:(0,r.childText)(null,"password"),reason:(0,r.childText)(null,"reason")},namespace:n.NS_MUC_OWNER},{element:"x",fields:{action:(0,r.staticValue)("invite"),continue:(0,r.booleanAttribute)("continue"),jid:(0,r.JIDAttribute)("jid"),legacyReason:(0,r.text)(),password:(0,r.attribute)("password"),reason:(0,r.attribute)("reason"),thread:(0,r.attribute)("thread")},namespace:n.NS_MUC_DIRECT_INVITE,path:"message.muc",type:"direct-invite",typeOrder:2},{element:"unique",fields:{name:(0,r.text)()},namespace:n.NS_MUC_UNIQUE,path:"iq.muc",type:"unique"},(0,r.extendMessage)({legacyMUC:{exporter(e,t,i){const r=i.registry?i.registry.export("message.muc",{...t,type:"direct-invite"}):void 0;r&&e.appendChild(r)},exportOrder:100001,importer(e,t){if(!(0,r.findAll)(e,n.NS_MUC_USER,"x")[0])return;const i=(0,r.findAll)(e,n.NS_MUC_DIRECT_INVITE,"x")[0];return i&&t.registry?t.registry.import(i,{...t,path:"message"}):void 0},importOrder:-1}})];t.default=s},3893:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=i(9447),n=i(6552),s=[{aliases:["iq.ibb","message.ibb"],element:"open",fields:{ack:{importer:(e,t)=>"message"!==(0,r.attribute)("stanza","iq").importer(e,t),exporter(e,t,i){(0,r.attribute)("stanza").exporter(e,t?"iq":"message",i)}},blockSize:(0,r.integerAttribute)("block-size"),sid:(0,r.attribute)("sid")},namespace:n.NS_IBB,type:"open",typeField:"action"},{aliases:["iq.ibb","message.ibb"],element:"close",fields:{sid:(0,r.attribute)("sid")},namespace:n.NS_IBB,type:"close",typeField:"action"},{aliases:["iq.ibb","message.ibb"],element:"data",fields:{data:(0,r.textBuffer)("base64"),seq:(0,r.integerAttribute)("seq"),sid:(0,r.attribute)("sid")},namespace:n.NS_IBB,type:"data",typeField:"action"}];t.default=s},3225:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=i(9447),n=i(6552),s=[{aliases:[{path:"bookmarkStorage",impliedType:!0},{path:"iq.privateStorage.bookmarks",impliedType:!0},...(0,r.pubsubItemContentAliases)()],element:"storage",namespace:n.NS_BOOKMARKS,type:n.NS_BOOKMARKS,typeField:"itemType"},{aliases:[{path:"bookmarkStorage.rooms",multiple:!0}],element:"conference",fields:{autoJoin:(0,r.booleanAttribute)("autojoin"),jid:(0,r.JIDAttribute)("jid"),name:(0,r.attribute)("name"),nick:(0,r.childText)(null,"nick"),password:(0,r.childText)(null,"password")},namespace:n.NS_BOOKMARKS}];t.default=s},2679:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const r={element:"query",namespace:i(6552).NS_PRIVATE,path:"iq.privateStorage"};t.default=r},5623:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=i(9447),n=i(6552),s=[(0,r.addAlias)(n.NS_DATAFORM,"x",["iq.command.form"]),(0,r.extendStanzaError)({commandError:(0,r.childEnum)(n.NS_ADHOC_COMMANDS,["bad-action","bad-locale","bad-payload","bad-sessionid","malformed-action","session-expired"])}),{element:"command",fields:{action:(0,r.attribute)("action"),node:(0,r.attribute)("node"),sid:(0,r.attribute)("sessionid"),status:(0,r.attribute)("status")},namespace:n.NS_ADHOC_COMMANDS,path:"iq.command"},{element:"actions",fields:{complete:(0,r.childBoolean)(null,"complete"),execute:(0,r.attribute)("execute"),next:(0,r.childBoolean)(null,"next"),prev:(0,r.childBoolean)(null,"prev")},namespace:n.NS_ADHOC_COMMANDS,path:"iq.command.availableActions"},{aliases:[{path:"iq.command.notes",multiple:!0}],element:"note",fields:{type:(0,r.attribute)("type"),value:(0,r.text)()},namespace:n.NS_ADHOC_COMMANDS}];t.default=s},1140:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=i(9447),n=i(6552),s="vcardTemp.records";function a(e,t){return{aliases:[{multiple:!0,path:s}],element:e,fields:{value:(0,r.text)()},namespace:n.NS_VCARD_TEMP,type:t,typeField:"type"}}const o=[{aliases:[{path:"iq.vcard"}],defaultType:n.NS_VCARD_TEMP,element:"vCard",fields:{fullName:(0,r.childText)(null,"FN")},namespace:n.NS_VCARD_TEMP,path:"vcardTemp",type:n.NS_VCARD_TEMP,typeField:"format"},{element:"N",fields:{additional:{...(0,r.childText)(null,"MIDDLE"),order:3},family:{...(0,r.childText)(null,"FAMILY"),order:1},given:{...(0,r.childText)(null,"GIVEN"),order:2},prefix:{...(0,r.childText)(null,"PREFIX"),order:4},suffix:{...(0,r.childText)(null,"SUFFIX"),order:5}},namespace:n.NS_VCARD_TEMP,path:"vcardTemp.name"},a("NICKNAME","nickname"),a("BDAY","birthday"),a("JABBERID","jid"),a("TZ","timezone"),a("TITLE","title"),a("ROLE","role"),a("URL","url"),a("NOTE","note"),a("SORT-STRING","sort"),a("UID","uid"),a("REV","revision"),a("PRODID","productId"),a("DESC","description"),{aliases:[{multiple:!0,path:s}],element:"EMAIL",fields:{preferred:(0,r.childBoolean)(null,"PREF"),types:(0,r.multipleChildEnum)(null,[["home","HOME"],["work","WORK"],["internet","INTERNET"]]),value:(0,r.childText)(null,"USERID")},namespace:n.NS_VCARD_TEMP,type:"email"},{aliases:[{path:s,multiple:!0}],element:"ORG",fields:{units:{...(0,r.multipleChildText)(null,"ORGUNIT"),order:2},value:{...(0,r.childText)(null,"ORGNAME"),order:1}},namespace:n.NS_VCARD_TEMP,type:"organization",typeField:"type"},{aliases:[{multiple:!0,path:s}],element:"ADR",fields:{city:(0,r.childText)(null,"LOCALITY"),code:(0,r.childText)(null,"PCODE"),country:(0,r.childText)(null,"CTRY"),pobox:(0,r.childText)(null,"POBOX"),preferred:(0,r.childBoolean)(null,"PREF"),region:(0,r.childText)(null,"REGION"),street:(0,r.childText)(null,"STREET"),street2:(0,r.childText)(null,"EXTADD"),types:(0,r.multipleChildEnum)(null,[["home","HOME"],["work","WORK"],["domestic","DOM"],["international","INTL"],["postal","POSTAL"],["parcel","PARCEL"]])},namespace:n.NS_VCARD_TEMP,type:"address",typeField:"type"},{aliases:[{multiple:!0,path:s}],element:"LABEL",fields:{lines:(0,r.multipleChildText)(null,"LINE"),preferred:(0,r.childBoolean)(null,"PREF"),types:(0,r.multipleChildEnum)(null,[["home","HOME"],["work","WORK"]])},namespace:n.NS_VCARD_TEMP,type:"addressLabel",typeField:"type"},{aliases:[{multiple:!0,path:s}],element:"TEL",fields:{preferred:(0,r.childBoolean)(null,"PREF"),types:(0,r.multipleChildEnum)(null,[["home","HOME"],["work","WORK"],["cell","CELL"],["fax","FAX"],["voice","VOICE"],["msg","MSG"]]),value:(0,r.childText)(null,"NUMBER","",!0)},namespace:n.NS_VCARD_TEMP,type:"tel",typeField:"type"},{aliases:[{multiple:!0,path:s}],element:"PHOTO",fields:{data:(0,r.childText)(null,"BINVAL"),mediaType:(0,r.childText)(null,"TYPE"),url:(0,r.childText)(null,"EXTVAL")},namespace:n.NS_VCARD_TEMP,type:"photo",typeField:"type"},{aliases:[{multiple:!0,path:s}],element:"LOGO",fields:{data:(0,r.childText)(null,"BINVAL"),mediaType:(0,r.childText)(null,"TYPE"),url:(0,r.childText)(null,"EXTVAL")},namespace:n.NS_VCARD_TEMP,type:"logo",typeField:"type"},{aliases:[{multiple:!0,path:s}],element:"CATEGORIES",fields:{value:(0,r.multipleChildText)(null,"KEYWORD")},namespace:n.NS_VCARD_TEMP,type:"categories",typeField:"type"}];t.default=o},724:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=i(9447),n=i(6552),s=[(0,r.addAlias)(n.NS_DATAFORM,"x",["iq.search.form"]),(0,r.addAlias)(n.NS_RSM,"set",["iq.search.paging"]),{element:"query",fields:{email:(0,r.childText)(null,"email"),familyName:(0,r.childText)(null,"last"),givenName:(0,r.childText)(null,"first"),instructions:(0,r.childText)(null,"instructions"),nick:(0,r.childText)(null,"nick")},namespace:n.NS_SEARCH,path:"iq.search"},{aliases:[{path:"iq.search.items",multiple:!0}],element:"item",fields:{email:(0,r.childText)(null,"email"),familyName:(0,r.childText)(null,"last"),givenName:(0,r.childText)(null,"first"),jid:(0,r.JIDAttribute)("jid"),nick:(0,r.childText)(null,"nick")},namespace:n.NS_SEARCH}];t.default=s},5149:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=i(9447),n=i(6552),s={aliases:["iq.pubsub.paging"],element:"set",fields:{after:(0,r.childText)(null,"after"),before:(0,r.childText)(null,"before"),count:(0,r.childInteger)(null,"count"),first:(0,r.childText)(null,"first"),firstIndex:(0,r.childIntegerAttribute)(null,"first","index"),index:(0,r.childInteger)(null,"index"),last:(0,r.childText)(null,"last"),max:(0,r.childInteger)(null,"max")},namespace:n.NS_RSM,path:"paging"};t.default=s},3562:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=i(2768),n=i(9447),s=i(6552),a={configurable:(0,n.childBoolean)(null,"subscribe-options"),configurationRequired:(0,n.deepChildBoolean)([{namespace:null,element:"subscribe-options"},{namespace:null,element:"required"}]),jid:(0,n.JIDAttribute)("jid"),node:(0,n.attribute)("node"),state:(0,n.attribute)("subscription"),subid:(0,n.attribute)("subid")},o={node:(0,n.attribute)("node")},l=[{aliases:["pubsub","iq.pubsub","message.pubsub"],childrenExportOrder:{configure:0,create:100,publish:100,subscribe:100,subscriptionOptions:0},defaultType:"user",element:"pubsub",fields:{publishOptions:(0,n.splicePath)(null,"publish-options","dataform")},namespace:s.NS_PUBSUB,type:"user",typeField:"context"},{aliases:["pubsub","iq.pubsub","message.pubsub"],defaultType:"user",element:"pubsub",fields:{purge:(0,n.childAttribute)(null,"purge","node")},namespace:s.NS_PUBSUB_OWNER,type:"owner",typeField:"context"},(0,n.addAlias)(s.NS_DATAFORM,"x",["iq.pubsub.configure.form","iq.pubsub.defaultConfiguration.form","iq.pubsub.defaultSubscriptionOptions.form","iq.pubsub.subscriptionOptions.form","message.pubsub.configuration.form"]),(0,n.addAlias)(s.NS_RSM,"set",["iq.pubsub.fetch.paging"]),(0,n.extendStanzaError)({pubsubError:(0,n.childEnum)(s.NS_PUBSUB_ERRORS,Object.values(r.PubsubErrorCondition)),pubsubUnsupportedFeature:(0,n.childAttribute)(s.NS_PUBSUB_ERRORS,"unsupported","feature")}),{element:"subscribe",fields:{jid:(0,n.JIDAttribute)("jid"),node:(0,n.attribute)("node")},namespace:s.NS_PUBSUB,path:"iq.pubsub.subscribe"},{element:"unsubscribe",fields:{jid:(0,n.JIDAttribute)("jid"),node:(0,n.attribute)("node"),subid:(0,n.attribute)("subid")},namespace:s.NS_PUBSUB,path:"iq.pubsub.unsubscribe"},{element:"options",fields:{jid:(0,n.JIDAttribute)("jid"),node:(0,n.attribute)("node"),subid:(0,n.attribute)("subid")},namespace:s.NS_PUBSUB,path:"iq.pubsub.subscriptionOptions"},{aliases:[{path:"iq.pubsub.subscriptions",selector:"user",impliedType:!0}],element:"subscriptions",fields:{jid:(0,n.JIDAttribute)("jid"),node:(0,n.attribute)("node")},namespace:s.NS_PUBSUB,type:"user"},{aliases:[{path:"iq.pubsub.subscriptions",selector:"owner",impliedType:!0}],element:"subscriptions",fields:{jid:(0,n.JIDAttribute)("jid"),node:(0,n.attribute)("node")},namespace:s.NS_PUBSUB_OWNER,type:"owner"},{aliases:[{path:"iq.pubsub.subscription",selector:"owner"},{impliedType:!0,multiple:!0,path:"iq.pubsub.subscriptions.items",selector:"owner"}],element:"subscription",fields:a,namespace:s.NS_PUBSUB},{aliases:[{path:"iq.pubsub.subscription",selector:"user"},{impliedType:!0,multiple:!0,path:"iq.pubsub.subscriptions.items",selector:"user"}],element:"subscription",fields:a,namespace:s.NS_PUBSUB,type:"user"},{aliases:[{impliedType:!0,multiple:!0,path:"iq.pubsub.subscriptions.items",selector:"owner"}],element:"subscription",fields:a,namespace:s.NS_PUBSUB_OWNER,type:"owner"},{aliases:[{path:"iq.pubsub.affiliations",selector:"user",impliedType:!0},{path:"message.pubsub.affiliations",selector:"user",impliedType:!0}],element:"affiliations",fields:o,namespace:s.NS_PUBSUB,type:"user"},{aliases:[{path:"iq.pubsub.affiliations",selector:"owner",impliedType:!0}],element:"affiliations",fields:o,namespace:s.NS_PUBSUB_OWNER,type:"owner"},{aliases:[{impliedType:!0,multiple:!0,path:"iq.pubsub.affiliations.items",selector:"user"},{impliedType:!0,multiple:!0,path:"message.pubsub.affiliations.items",selector:"user"}],element:"affiliation",fields:{affiliation:(0,n.attribute)("affiliation"),jid:(0,n.JIDAttribute)("jid"),node:(0,n.attribute)("node")},namespace:s.NS_PUBSUB,type:"user"},{aliases:[{impliedType:!0,multiple:!0,path:"iq.pubsub.affiliations.items",selector:"owner"}],element:"affiliation",fields:{affiliation:(0,n.attribute)("affiliation"),jid:(0,n.JIDAttribute)("jid"),node:(0,n.attribute)("node")},namespace:s.NS_PUBSUB_OWNER,type:"owner"},{element:"create",fields:o,namespace:s.NS_PUBSUB,path:"iq.pubsub.create"},{aliases:[{path:"iq.pubsub.destroy",selector:"owner"}],element:"delete",fields:{node:(0,n.attribute)("node"),redirect:(0,n.childAttribute)(null,"redirect","uri")},namespace:s.NS_PUBSUB_OWNER},{aliases:[{path:"iq.pubsub.configure",selector:"owner",impliedType:!0}],element:"configure",fields:o,namespace:s.NS_PUBSUB_OWNER,type:"owner"},{aliases:[{path:"iq.pubsub.configure",selector:"user",impliedType:!0}],element:"configure",fields:o,namespace:s.NS_PUBSUB,type:"user"},{element:"default",fields:{node:(0,n.attribute)("node")},namespace:s.NS_PUBSUB,path:"iq.pubsub.defaultSubscriptionOptions"},{element:"default",fields:{},namespace:s.NS_PUBSUB_OWNER,path:"iq.pubsub.defaultConfiguration"},{element:"publish",fields:o,namespace:s.NS_PUBSUB,path:"iq.pubsub.publish"},{element:"retract",fields:{id:(0,n.childAttribute)(null,"item","id"),node:(0,n.attribute)("node"),notify:(0,n.booleanAttribute)("notify")},namespace:s.NS_PUBSUB,path:"iq.pubsub.retract"},{element:"items",fields:{max:(0,n.integerAttribute)("max_items"),node:(0,n.attribute)("node")},namespace:s.NS_PUBSUB,path:"iq.pubsub.fetch"},{aliases:["pubsubitem","iq.pubsub.publish.item",{multiple:!0,path:"iq.pubsub.fetch.items"}],element:"item",fields:{id:(0,n.attribute)("id"),publisher:(0,n.JIDAttribute)("publisher")},namespace:s.NS_PUBSUB},{element:"event",fields:{eventType:(0,n.childEnum)(null,["purge","delete","subscription","configuration","items"])},namespace:s.NS_PUBSUB_EVENT,path:"message.pubsub",type:"event",typeField:"context"},{aliases:[{path:"message.pubsub.items.published",multiple:!0}],element:"item",fields:{id:(0,n.attribute)("id"),publisher:(0,n.JIDAttribute)("publisher")},namespace:s.NS_PUBSUB_EVENT,path:"pubsubeventitem"},{element:"purge",fields:o,namespace:s.NS_PUBSUB_EVENT,path:"message.pubsub.purge"},{element:"delete",fields:{node:(0,n.attribute)("node"),redirect:(0,n.childAttribute)(null,"redirect","uri")},namespace:s.NS_PUBSUB_EVENT,path:"message.pubsub.delete"},{aliases:[{path:"message.pubsub.subscription",selector:"event",impliedType:!0}],element:"subscription",fields:{expires:(c="expiry",{importer(e){const t=e.getAttribute(c);return"presence"===t?t:t?new Date(t):void 0},exporter(e,t){let i;i="string"==typeof t?t:t.toISOString(),e.setAttribute(c,i)}}),jid:(0,n.JIDAttribute)("jid"),node:(0,n.attribute)("node"),subid:(0,n.attribute)("subid"),type:(0,n.attribute)("subscription")},namespace:s.NS_PUBSUB_EVENT,type:"event"},{element:"configuration",fields:o,namespace:s.NS_PUBSUB_EVENT,path:"message.pubsub.configuration"},{element:"items",fields:{node:(0,n.attribute)("node"),retracted:(0,n.multipleChildAttribute)(null,"retract","id")},namespace:s.NS_PUBSUB_EVENT,path:"message.pubsub.items"}];var c;t.default=l},6158:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=i(9447),n=i(6552),s=[{element:"query",fields:{activate:(0,r.childText)(null,"activate"),address:(0,r.attribute)("dstaddr"),candidateUsed:(0,r.childJIDAttribute)(null,"streamhost-used","jid"),mode:(0,r.attribute)("mode","tcp"),sid:(0,r.attribute)("sid"),udpSuccess:(0,r.childAttribute)(null,"udpsuccess","dstaddr")},namespace:n.NS_SOCKS5,path:"iq.socks5"},{aliases:[{multiple:!0,path:"iq.socks5.candidates"}],element:"streamhost",fields:{host:(0,r.attribute)("host"),jid:(0,r.JIDAttribute)("jid"),port:(0,r.integerAttribute)("port"),uri:(0,r.attribute)("uri")},namespace:n.NS_SOCKS5}];t.default=s},1565:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=i(9447),n=i(6552),s=[{aliases:[{multiple:!0,path:"message.links"}],element:"x",fields:{description:(0,r.childText)(null,"desc"),url:(0,r.childText)(null,"url")},namespace:n.NS_OOB},{element:"query",fields:{description:(0,r.childText)(null,"desc"),url:(0,r.childText)(null,"url")},namespace:n.NS_OOB_TRANSFER,path:"iq.transferLink"}];t.default=s},5121:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=i(9447),n=i(6552),s={element:"html",fields:{alternateLanguageBodies:(0,r.childAlternateLanguageRawElement)(n.NS_XHTML,"body","xhtmlim"),body:(0,r.childLanguageRawElement)(n.NS_XHTML,"body","xhtmlim")},namespace:n.NS_XHTML_IM,path:"message.html"};t.default=s},5807:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=i(9447),n=i(6552),s=[(0,r.extendStreamFeatures)({inbandRegistration:(0,r.childBoolean)(n.NS_INBAND_REGISTRATION,"register")}),(0,r.addAlias)(n.NS_DATAFORM,"x",["iq.account.form"]),(0,r.addAlias)(n.NS_OOB,"x",["iq.account.registrationLink"]),{element:"query",fields:{address:(0,r.childText)(null,"address"),date:(0,r.childDate)(null,"date"),email:(0,r.childText)(null,"email"),familyName:(0,r.childText)(null,"last"),fullName:(0,r.childText)(null,"name"),givenName:(0,r.childText)(null,"first"),instructions:(0,r.childText)(null,"instructions"),key:(0,r.childText)(null,"key"),locality:(0,r.childText)(null,"city"),misc:(0,r.childText)(null,"misc"),nick:(0,r.childText)(null,"nick"),password:(0,r.childText)(null,"password"),phone:(0,r.childText)(null,"phone"),postalCode:(0,r.childText)(null,"zip"),region:(0,r.childText)(null,"state"),registered:(0,r.childBoolean)(null,"registered"),remove:(0,r.childBoolean)(null,"remove"),text:(0,r.childText)(null,"text"),uri:(0,r.childText)(null,"uri"),username:(0,r.childText)(null,"username")},namespace:n.NS_REGISTER,path:"iq.account"}];t.default=s},7471:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=i(9447),n=i(6552),s={aliases:[{path:"message.geoloc",impliedType:!0},{path:"dataform.fields.geoloc",impliedType:!0},...(0,r.pubsubItemContentAliases)()],element:"geoloc",fields:{accuracy:(0,r.childFloat)(null,"accuracy"),altitude:(0,r.childFloat)(null,"alt"),altitudeAccuracy:(0,r.childFloat)(null,"altaccuracy"),area:(0,r.childText)(null,"area"),building:(0,r.childText)(null,"building"),country:(0,r.childText)(null,"country"),countryCode:(0,r.childText)(null,"countrycode"),datum:(0,r.childText)(null,"datum"),description:(0,r.childText)(null,"description"),error:(0,r.childFloat)(null,"error"),floor:(0,r.childText)(null,"floor"),heading:(0,r.childFloat)(null,"bearing"),lang:(0,r.languageAttribute)(),latitude:(0,r.childFloat)(null,"lat"),locality:(0,r.childText)(null,"locality"),longitude:(0,r.childFloat)(null,"lon"),postalCode:(0,r.childText)(null,"postalcode"),region:(0,r.childText)(null,"region"),room:(0,r.childText)(null,"room"),speed:(0,r.childFloat)(null,"speed"),street:(0,r.childText)(null,"street"),text:(0,r.childText)(null,"text"),timestamp:(0,r.childDate)(null,"timestamp"),tzo:(0,r.childTimezoneOffset)(null,"tzo"),uri:(0,r.childText)(null,"uri")},namespace:n.NS_GEOLOC,type:n.NS_GEOLOC};t.default=s},8936:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=i(9447),n=i(6552),s=[{aliases:(0,r.pubsubItemContentAliases)(),element:"data",fields:{data:(0,r.textBuffer)("base64")},namespace:n.NS_AVATAR_DATA,path:"avatar",type:n.NS_AVATAR_DATA,typeField:"itemType"},{aliases:[{path:"avatar",impliedType:!0},...(0,r.pubsubItemContentAliases)()],element:"metadata",namespace:n.NS_AVATAR_METADATA,type:n.NS_AVATAR_METADATA,typeField:"itemType",childrenExportOrder:{versions:1,pointers:2}},{aliases:[{multiple:!0,path:"avatar.versions",selector:n.NS_AVATAR_METADATA}],element:"info",fields:{bytes:(0,r.integerAttribute)("bytes"),height:(0,r.integerAttribute)("height"),id:(0,r.attribute)("id"),mediaType:(0,r.attribute)("type"),uri:(0,r.attribute)("url"),width:(0,r.integerAttribute)("width")},namespace:n.NS_AVATAR_METADATA},{aliases:[{multiple:!0,path:"avatar.pointers",selector:n.NS_AVATAR_METADATA}],element:"pointer",fields:{bytes:(0,r.integerAttribute)("bytes"),height:(0,r.integerAttribute)("height"),id:(0,r.attribute)("id"),mediaType:(0,r.attribute)("type"),width:(0,r.integerAttribute)("width")},namespace:n.NS_AVATAR_METADATA}];t.default=s},426:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=i(2768),n=i(9447),s=i(6552);t.default=(0,n.extendMessage)({chatState:(0,n.childEnum)(s.NS_CHAT_STATES,Object.values(r.ChatState))})},3546:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=i(9447),n=i(6552),s={element:"query",fields:{name:(0,r.childText)(null,"name"),os:(0,r.childText)(null,"os"),version:(0,r.childText)(null,"version")},namespace:n.NS_VERSION,path:"iq.softwareVersion"};t.default=s},7090:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=i(2768),n=i(9447),s=i(6552),a={aliases:[{path:"message.mood",impliedType:!0},...(0,n.pubsubItemContentAliases)()],element:"mood",fields:{alternateLanguageText:(0,n.childAlternateLanguageText)(null,"text"),text:(0,n.childText)(null,"text"),value:(0,n.childEnum)(null,r.USER_MOODS)},namespace:s.NS_MOOD,type:s.NS_MOOD};t.default=a},4471:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=i(2768),n=i(9447),s=i(6552),a={aliases:[{path:"activity",impliedType:!0},...(0,n.pubsubItemContentAliases)()],element:"activity",fields:{activity:(0,n.childDoubleEnum)(null,r.USER_ACTIVITY_GENERAL,r.USER_ACTIVITY_SPECIFIC),alternateLanguageText:(0,n.childAlternateLanguageText)(null,"text"),text:(0,n.childText)(null,"text")},namespace:s.NS_ACTIVITY,type:s.NS_ACTIVITY};t.default=a},4476:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=i(9447),n=i(6552),s={element:"handshake",fields:{value:(0,r.textBuffer)("hex")},namespace:n.NS_COMPONENT,path:"handshake"};t.default=s},7960:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=i(9447),n=i(6552),s={aliases:[{path:"presence.legacyCapabilities",multiple:!0},{path:"features.legacyCapabilities",multiple:!0}],element:"c",fields:{algorithm:(0,r.attribute)("hash"),legacy:(0,r.staticValue)(!0),node:(0,r.attribute)("node"),value:(0,r.attribute)("ver")},namespace:n.NS_DISCO_LEGACY_CAPS};t.default=s},644:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=i(9447),n=i(6552),s={aliases:[{impliedType:!0,path:"tune"},...(0,r.pubsubItemContentAliases)()],element:"tune",fields:{artist:(0,r.childText)(null,"artist"),length:(0,r.childInteger)(null,"length"),rating:(0,r.childInteger)(null,"rating"),source:(0,r.childText)(null,"source"),title:(0,r.childText)(null,"title"),track:(0,r.childText)(null,"track"),uri:(0,r.childText)(null,"uri")},namespace:n.NS_TUNE,type:n.NS_TUNE};t.default=s},713:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=i(9447),n=i(6552),s={element:"body",fields:{acceptMediaTypes:(0,r.attribute)("accept"),ack:(0,r.integerAttribute)("ack"),authId:(0,r.attribute)("authid"),characterSets:(0,r.attribute)("charsets"),condition:(0,r.attribute)("condition"),from:(0,r.JIDAttribute)("from"),key:(0,r.attribute)("key"),lang:(0,r.languageAttribute)(),maxClientRequests:(0,r.integerAttribute)("requests"),maxHoldOpen:(0,r.integerAttribute)("hold"),maxInactivityTime:(0,r.integerAttribute)("inactivity"),maxSessionPause:(0,r.integerAttribute)("maxpause"),maxWaitTime:(0,r.integerAttribute)("wait"),mediaType:(0,r.attribute)("content"),minPollingInterval:(0,r.integerAttribute)("polling"),newKey:(0,r.attribute)("newkey"),pauseSession:(0,r.integerAttribute)("pause"),report:(0,r.integerAttribute)("report"),rid:(0,r.integerAttribute)("rid"),route:(0,r.attribute)("string"),seeOtherURI:(0,r.childText)(null,"uri"),sid:(0,r.attribute)("sid"),stream:(0,r.attribute)("stream"),time:(0,r.integerAttribute)("time"),to:(0,r.JIDAttribute)("to"),type:(0,r.attribute)("type"),version:(0,r.attribute)("ver"),xmppRestart:(0,r.namespacedBooleanAttribute)("xmpp",n.NS_BOSH_XMPP,"restart",void 0,{writeValue:e=>e?"true":"false"}),xmppRestartLogic:(0,r.namespacedBooleanAttribute)("xmpp",n.NS_BOSH_XMPP,"restartlogic",void 0,{writeValue:e=>e?"true":"false"}),xmppVersion:(0,r.namespacedAttribute)("xmpp",n.NS_BOSH_XMPP,"version")},namespace:n.NS_BOSH,path:"bosh"};t.default=s},7258:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=i(9447),n=i(6552),s=[(0,r.extendMessage)({headers:(0,r.splicePath)(n.NS_SHIM,"headers","header",!0)}),(0,r.extendPresence)({headers:(0,r.splicePath)(n.NS_SHIM,"headers","header",!0)}),{element:"header",fields:{name:(0,r.attribute)("name"),value:(0,r.text)()},namespace:n.NS_SHIM,path:"header"}];t.default=s},8794:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=i(9447),n=i(6552),s=[{element:"compression",fields:{methods:(0,r.multipleChildText)(null,"method")},namespace:n.NS_COMPRESSION_FEATURE,path:"features.compression"},{element:"compress",fields:{method:(0,r.childText)(null,"method")},namespace:n.NS_COMPRESSION,path:"compression",type:"start",typeField:"type"},{aliases:["error.compressionError"],element:"failure",fields:{condition:(0,r.childEnum)(null,["unsupported-method","setup-failed","processing-failed"])},namespace:n.NS_COMPRESSION,path:"compression",type:"failure",typeField:"type"},{element:"compressed",namespace:n.NS_COMPRESSION,path:"compression",type:"success",typeField:"type"}];t.default=s},1505:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=i(9447),n=i(6552),s=["dataformLayout",{multiple:!0,path:"dataformLayout.contents"},{multiple:!0,path:"dataform.layout.contents"}],a=[{aliases:[{multiple:!0,path:"dataform.layout"}],element:"page",fields:{label:(0,r.attribute)("label")},namespace:n.NS_DATAFORM_LAYOUT},{aliases:s,element:"section",fields:{label:(0,r.attribute)("label")},namespace:n.NS_DATAFORM_LAYOUT,type:"section",typeField:"type"},{aliases:s,element:"text",fields:{value:(0,r.text)()},namespace:n.NS_DATAFORM_LAYOUT,type:"text",typeField:"type"},{aliases:s,element:"fieldref",fields:{field:(0,r.attribute)("var")},namespace:n.NS_DATAFORM_LAYOUT,type:"fieldref",typeField:"type"},{aliases:s,element:"reportedref",namespace:n.NS_DATAFORM_LAYOUT,type:"reportedref",typeField:"type"}];t.default=a},9002:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=i(9447),n=i(6552),s=[(0,r.extendMessage)({rosterExchange:(0,r.splicePath)(n.NS_ROSTER_EXCHANGE,"x","rosterExchange",!0)}),(0,r.extendIQ)({rosterExchange:(0,r.splicePath)(n.NS_ROSTER_EXCHANGE,"x","rosterExchange",!0)}),{element:"item",fields:{action:(0,r.attribute)("action"),groups:(0,r.multipleChildText)(null,"group"),jid:(0,r.JIDAttribute)("jid"),name:(0,r.attribute)("name")},namespace:n.NS_ROSTER_EXCHANGE,path:"rosterExchange"}];t.default=s},7521:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=i(9447),n=i(6552);t.default=(0,r.extendPresence)({vcardAvatar:{importer(e){const t=(0,r.findAll)(e,n.NS_VCARD_TEMP_UPDATE,"x");if(!t.length)return;const i=(0,r.findAll)(t[0],n.NS_VCARD_TEMP_UPDATE,"photo");return!i.length||i[0].getText()},exporter(e,t){const i=(0,r.findOrCreate)(e,n.NS_VCARD_TEMP_UPDATE,"x");if(""===t)(0,r.findOrCreate)(i,n.NS_VCARD_TEMP_UPDATE,"photo");else{if(!0===t)return;t&&(0,r.findOrCreate)(i,n.NS_VCARD_TEMP_UPDATE,"photo").children.push(t)}}}})},921:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=i(9447),n=i(6552),s=[(0,r.extendMessage)({captcha:(0,r.splicePath)(n.NS_CAPTCHA,"captcha","dataform")}),(0,r.extendIQ)({captcha:(0,r.splicePath)(n.NS_CAPTCHA,"captcha","dataform")})];t.default=s},5869:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=i(2768),n=i(9447),s=i(6552),a=[(0,n.extendStanzaError)({jingleError:(0,n.childEnum)(s.NS_JINGLE_ERRORS_1,Object.values(r.JingleErrorCondition))}),{element:"jingle",fields:{action:(0,n.attribute)("action"),initiator:(0,n.JIDAttribute)("initiator"),responder:(0,n.JIDAttribute)("responder"),sid:(0,n.attribute)("sid")},namespace:s.NS_JINGLE_1,path:"iq.jingle"},{aliases:[{multiple:!0,path:"iq.jingle.contents"}],element:"content",fields:{creator:(0,n.attribute)("creator"),disposition:(0,n.attribute)("disposition","session"),name:(0,n.attribute)("name"),senders:(0,n.attribute)("senders","both")},namespace:s.NS_JINGLE_1},{element:"reason",fields:{alternativeSession:(0,n.childText)(null,"alternative-session"),condition:(0,n.childEnum)(null,Object.values(r.JingleReasonCondition)),text:(0,n.childText)(null,"text")},namespace:s.NS_JINGLE_1,path:"iq.jingle.reason"}];t.default=a},2801:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=i(2768),n=i(9447),s=i(6552);function a(){return{importer(e,t){let i=(0,n.findAll)(e,s.NS_JINGLE_RTP_RTCP_FB_0,"rtcp-fb");const r=(0,n.attribute)("type").importer,a=(0,n.attribute)("subtype").importer,o=(0,n.attribute)("value").importer,l=[];for(const e of i){const i=r(e,t),n=a(e,t);l.push(n?{type:i,parameter:n}:{type:i})}i=(0,n.findAll)(e,s.NS_JINGLE_RTP_RTCP_FB_0,"rtcp-fb-trr-int");for(const e of i){const i=o(e,t);l.push(i?{type:"trr-int",parameter:i}:{type:"trr-int"})}return l},exporter(e,t,i){const r=(0,n.attribute)("type").exporter,a=(0,n.attribute)("subtype").exporter,o=(0,n.attribute)("value").exporter;for(const l of t){let t;"trr-int"===l.type?(t=(0,n.createElement)(s.NS_JINGLE_RTP_RTCP_FB_0,"rtcp-fb-trr-int",i.namespace,e),l.parameter&&o(t,l.parameter,i)):(t=(0,n.createElement)(s.NS_JINGLE_RTP_RTCP_FB_0,"rtcp-fb",i.namespace,e),r(t,l.type,i),l.parameter&&a(t,l.parameter,i)),e.appendChild(t)}}}}const o="iq.jingle.info",l=[{aliases:["iq.jingle.contents.application"],childrenExportOrder:{codecs:4,encryption:5,headerExtensions:6,sourceGroups:8,sources:7,streams:9},element:"description",fields:{media:(0,n.attribute)("media"),rtcpFeedback:{...a(),exportOrder:3},rtcpMux:{...(0,n.childBoolean)(null,"rtcp-mux"),exportOrder:1},rtcpReducedSize:{...(0,n.childBoolean)(null,"rtcp-reduced-size"),exportOrder:2},ssrc:(0,n.attribute)("ssrc")},namespace:s.NS_JINGLE_RTP_1,optionalNamespaces:{rtcpf:s.NS_JINGLE_RTP_RTCP_FB_0,rtph:s.NS_JINGLE_RTP_HDREXT_0},type:s.NS_JINGLE_RTP_1},{aliases:[{multiple:!0,path:"iq.jingle.contents.application.headerExtensions",selector:s.NS_JINGLE_RTP_1}],element:"rtp-hdrext",fields:{id:(0,n.integerAttribute)("id"),senders:(0,n.attribute)("senders"),uri:(0,n.attribute)("uri")},namespace:s.NS_JINGLE_RTP_HDREXT_0},{aliases:[{multiple:!0,path:"iq.jingle.contents.application.codecs",selector:s.NS_JINGLE_RTP_1},"rtpcodec"],element:"payload-type",fields:{channels:(0,n.integerAttribute)("channels"),clockRate:(0,n.integerAttribute)("clockrate"),id:(0,n.attribute)("id"),maxptime:(0,n.integerAttribute)("maxptime"),name:(0,n.attribute)("name"),parameters:(0,n.parameterMap)(s.NS_JINGLE_RTP_1,"parameter","name","value"),ptime:(0,n.integerAttribute)("ptime"),rtcpFeedback:a()},namespace:s.NS_JINGLE_RTP_1},{aliases:[{multiple:!0,path:"iq.jingle.contents.application.sources",selector:s.NS_JINGLE_RTP_1}],element:"source",fields:{parameters:(0,n.parameterMap)(s.NS_JINGLE_RTP_SSMA_0,"parameter","name","value"),ssrc:(0,n.attribute)("ssrc")},namespace:s.NS_JINGLE_RTP_SSMA_0},{aliases:[{multiple:!0,path:"iq.jingle.contents.application.sourceGroups",selector:s.NS_JINGLE_RTP_1}],element:"ssrc-group",fields:{semantics:(0,n.attribute)("semantics"),sources:(0,n.multipleChildAttribute)(null,"source","ssrc")},namespace:s.NS_JINGLE_RTP_SSMA_0},{aliases:[{multiple:!0,path:"iq.jingle.contents.application.streams",selector:s.NS_JINGLE_RTP_1}],element:"stream",fields:{id:(0,n.attribute)("id"),track:(0,n.attribute)("track")},namespace:s.NS_JINGLE_RTP_MSID_0},{aliases:[{path:"iq.jingle.contents.application.encryption",selector:s.NS_JINGLE_RTP_1}],element:"encryption",fields:{required:(0,n.booleanAttribute)("required")},namespace:s.NS_JINGLE_RTP_1},{aliases:[{multiple:!0,path:"iq.jingle.contents.application.encryption.sdes",selector:s.NS_JINGLE_RTP_1}],element:"crypto",fields:{cryptoSuite:(0,n.attribute)("crypto-suite"),keyParameters:(0,n.attribute)("key-params"),sessionParameters:(0,n.attribute)("session-params"),tag:(0,n.integerAttribute)("tag")},namespace:s.NS_JINGLE_RTP_1},{aliases:[{path:"iq.jingle.contents.application.encryption.zrtp",selector:s.NS_JINGLE_RTP_1}],element:"zrtp-hash",fields:{value:(0,n.textBuffer)("hex"),version:(0,n.attribute)("version")},namespace:s.NS_JINGLE_RTP_1},{element:"mute",fields:{creator:(0,n.attribute)("creator"),name:(0,n.attribute)("name")},namespace:s.NS_JINGLE_RTP_INFO_1,path:o,type:r.JINGLE_INFO_MUTE},{element:"unmute",fields:{creator:(0,n.attribute)("creator"),name:(0,n.attribute)("name")},namespace:s.NS_JINGLE_RTP_INFO_1,path:o,type:r.JINGLE_INFO_UNMUTE},{element:"hold",namespace:s.NS_JINGLE_RTP_INFO_1,path:o,type:r.JINGLE_INFO_HOLD},{element:"unhold",namespace:s.NS_JINGLE_RTP_INFO_1,path:o,type:r.JINGLE_INFO_UNHOLD},{element:"active",namespace:s.NS_JINGLE_RTP_INFO_1,path:o,type:r.JINGLE_INFO_ACTIVE},{element:"ringing",namespace:s.NS_JINGLE_RTP_INFO_1,path:o,type:r.JINGLE_INFO_RINGING}];t.default=l},9278:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=i(9447),n=i(6552),s=[(0,r.extendMessage)({nick:(0,r.childText)(n.NS_NICK,"nick")}),(0,r.extendPresence)({nick:(0,r.childText)(n.NS_NICK,"nick")}),{aliases:(0,r.pubsubItemContentAliases)(),element:"nick",fields:{nick:(0,r.text)()},namespace:n.NS_NICK,type:n.NS_NICK}];t.default=s},880:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=i(9447),n=i(6552),s=e=>[{element:"transport",fields:{gatheringComplete:(0,r.childBoolean)(null,"gathering-complete"),password:(0,r.attribute)("pwd"),usernameFragment:(0,r.attribute)("ufrag")},namespace:e,path:"iq.jingle.contents.transport",type:e,typeField:"transportType"},{aliases:[{impliedType:!0,path:"iq.jingle.contents.transport.remoteCandidate",selector:e}],element:"remote-candidate",fields:{component:(0,r.integerAttribute)("component"),ip:(0,r.attribute)("ip"),port:(0,r.integerAttribute)("port")},namespace:e,type:e,typeField:"transportType"},{aliases:[{impliedType:!0,multiple:!0,path:"iq.jingle.contents.transport.candidates",selector:e}],element:"candidate",fields:{component:(0,r.integerAttribute)("component"),foundation:(0,r.attribute)("foundation"),generation:(0,r.integerAttribute)("generation"),id:(0,r.attribute)("id"),ip:(0,r.attribute)("ip"),network:(0,r.integerAttribute)("network"),port:(0,r.integerAttribute)("port"),priority:(0,r.integerAttribute)("priority"),protocol:(0,r.attribute)("protocol"),relatedAddress:(0,r.attribute)("rel-addr"),relatedPort:(0,r.attribute)("rel-port"),tcpType:(0,r.attribute)("tcptype"),type:(0,r.attribute)("type")},namespace:e,type:e,typeField:"transportType"}],a=[...s(n.NS_JINGLE_ICE_0),...s(n.NS_JINGLE_ICE_UDP_1)];t.default=a},7855:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=i(9447),n=i(6552),s=[{element:"transport",fields:{gatheringComplete:(0,r.childBoolean)(null,"gathering-complete"),password:(0,r.attribute)("pwd"),usernameFragment:(0,r.attribute)("ufrag")},namespace:n.NS_JINGLE_RAW_UDP_1,path:"iq.jingle.contents.transport",type:n.NS_JINGLE_RAW_UDP_1,typeField:"transportType"},{aliases:[{impliedType:!0,multiple:!0,path:"iq.jingle.contents.transport.candidates",selector:n.NS_JINGLE_RAW_UDP_1}],element:"candidate",fields:{component:(0,r.integerAttribute)("component"),foundation:(0,r.attribute)("foundation"),generation:(0,r.integerAttribute)("generation"),id:(0,r.attribute)("id"),ip:(0,r.attribute)("ip"),port:(0,r.integerAttribute)("port"),type:(0,r.attribute)("type")},namespace:n.NS_JINGLE_RAW_UDP_1,type:n.NS_JINGLE_RAW_UDP_1,typeField:"transportType"}];t.default=s},6796:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=i(9447),n=i(6552),s=[{element:"request",namespace:n.NS_RECEIPTS,path:"message.receipt",type:"request",typeField:"type"},{element:"received",fields:{id:(0,r.attribute)("id")},namespace:n.NS_RECEIPTS,path:"message.receipt",type:"received",typeField:"type"}];t.default=s},6410:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=i(9447),n=i(6552),s=[{element:"invisible",fields:{probe:(0,r.booleanAttribute)("probe")},namespace:n.NS_INVISIBLE_0,path:"iq.visibility",type:"invisible",typeField:"type"},{element:"visible",namespace:n.NS_INVISIBLE_0,path:"iq.visibility",type:"visible"}];t.default=s},4445:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=i(9447),n=i(6552),s=[(0,r.extendStanzaError)({blocked:(0,r.childBoolean)(n.NS_BLOCKING_ERRORS,"blocked")}),{element:"blocklist",fields:{jids:(0,r.multipleChildAttribute)(null,"item","jid")},namespace:n.NS_BLOCKING,path:"iq.blockList",type:"list",typeField:"action"},{element:"block",fields:{jids:(0,r.multipleChildAttribute)(null,"item","jid")},namespace:n.NS_BLOCKING,path:"iq.blockList",type:"block",typeField:"action"},{element:"unblock",fields:{jids:(0,r.multipleChildAttribute)(null,"item","jid")},namespace:n.NS_BLOCKING,path:"iq.blockList",type:"unblock",typeField:"action"}];t.default=s},5856:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=i(9447),n=i(6552),s=[(0,r.extendStreamFeatures)({streamManagement:(0,r.childBoolean)(n.NS_SMACKS_3,"sm")}),{element:"a",fields:{handled:(0,r.integerAttribute)("h")},namespace:n.NS_SMACKS_3,path:"sm",type:"ack",typeField:"type"},{element:"r",namespace:n.NS_SMACKS_3,path:"sm",type:"request",typeField:"type"},{element:"enable",fields:{allowResumption:(0,r.booleanAttribute)("resume")},namespace:n.NS_SMACKS_3,path:"sm",type:"enable",typeField:"type"},{element:"enabled",fields:{id:(0,r.attribute)("id"),resume:(0,r.booleanAttribute)("resume")},namespace:n.NS_SMACKS_3,path:"sm",type:"enabled",typeField:"type"},{element:"resume",fields:{handled:(0,r.integerAttribute)("h"),previousSession:(0,r.attribute)("previd")},namespace:n.NS_SMACKS_3,path:"sm",type:"resume",typeField:"type"},{element:"resumed",fields:{handled:(0,r.integerAttribute)("h"),previousSession:(0,r.attribute)("previd")},namespace:n.NS_SMACKS_3,path:"sm",type:"resumed",typeField:"type"},{element:"failed",fields:{handled:(0,r.integerAttribute)("h")},namespace:n.NS_SMACKS_3,path:"sm",type:"failed",typeField:"type"}];t.default=s},251:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=i(9447),n=i(6552);t.default=(0,r.extendIQ)({ping:(0,r.childBoolean)(n.NS_PING,"ping")})},2607:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=i(9447),n=i(6552),s={element:"time",fields:{tzo:(0,r.childTimezoneOffset)(null,"tzo"),utc:(0,r.childDate)(null,"utc")},namespace:n.NS_TIME,path:"iq.time"};t.default=s},9867:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=i(9447),n=i(6552),s={aliases:["message.delay","presence.delay"],element:"delay",fields:{from:(0,r.JIDAttribute)("from"),reason:(0,r.text)(),timestamp:(0,r.dateAttribute)("stamp")},namespace:n.NS_DELAY};t.default=s},8466:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=i(9447),n=i(6552),s={2:n.NS_DISCO_EXTERNAL_2,1:n.NS_DISCO_EXTERNAL_1},a=[];for(const[e,t]of Object.entries(s))a.push({aliases:["iq.externalServiceCredentials"],defaultType:"2",element:"credentials",fields:{expires:(0,r.childDateAttribute)(null,"service","expires"),host:(0,r.childAttribute)(null,"service","host"),name:(0,r.childAttribute)(null,"service","name"),password:(0,r.childAttribute)(null,"service","password"),port:(0,r.childIntegerAttribute)(null,"service","port"),restricted:(0,r.childBooleanAttribute)(null,"service","restricted"),transport:(0,r.childAttribute)(null,"service","transport"),type:(0,r.childAttribute)(null,"service","type"),username:(0,r.childAttribute)(null,"service","username")},namespace:t,type:e,typeField:"version"},{aliases:["iq.externalServices"],defaultType:"2",element:"services",fields:{type:(0,r.attribute)("type")},namespace:t,type:e,typeField:"version"},{aliases:[{path:"iq.externalServices.services",multiple:!0}],defaultType:"2",element:"service",fields:{expires:(0,r.dateAttribute)("expires"),host:(0,r.attribute)("host"),name:(0,r.attribute)("name"),password:(0,r.attribute)("password"),port:(0,r.integerAttribute)("port"),restricted:(0,r.booleanAttribute)("restricted"),transport:(0,r.attribute)("transport"),type:(0,r.attribute)("type"),username:(0,r.attribute)("username")},namespace:t,type:e,typeField:"version"});t.default=a},1097:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=i(9447),n=i(6552),s=[{element:"media",fields:{height:(0,r.integerAttribute)("height"),width:(0,r.integerAttribute)("width")},namespace:n.NS_DATAFORM_MEDIA,path:"dataform.fields.media"},{aliases:[{multiple:!0,path:"dataform.fields.media.sources"}],element:"uri",fields:{mediaType:(0,r.attribute)("type"),uri:(0,r.text)()},namespace:n.NS_DATAFORM_MEDIA}];t.default=s},6857:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=i(9447),n=i(6552);t.default=(0,r.extendMessage)({requestingAttention:(0,r.childBoolean)(n.NS_ATTENTION_0,"attention")})},7978:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=i(9447),n=i(6552),s={aliases:["iq.bits",{path:"message.bits",multiple:!0},{path:"presence.bits",multiple:!0},{path:"iq.jingle.bits",multiple:!0}],element:"data",fields:{cid:(0,r.attribute)("cid"),data:(0,r.textBuffer)("base64"),maxAge:(0,r.integerAttribute)("max-age"),mediaType:(0,r.attribute)("type")},namespace:n.NS_BOB};t.default=s},8634:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=i(9447),n=i(6552);let s=[(0,r.addAlias)(n.NS_HASHES_2,"hash",[{path:"file.hashes",multiple:!0},{path:"file.range.hashes",multiple:!0}]),(0,r.addAlias)(n.NS_HASHES_1,"hash",[{path:"file.hashes",multiple:!0},{path:"file.range.hashes",multiple:!0}]),(0,r.addAlias)(n.NS_HASHES_2,"hash-used",[{path:"file.hashesUsed",multiple:!0}]),(0,r.addAlias)(n.NS_THUMBS_1,"thumbnail",[{path:"file.thumbnails",multiple:!0}])];for(const e of[n.NS_JINGLE_FILE_TRANSFER_4,n.NS_JINGLE_FILE_TRANSFER_5])s=s.concat([{aliases:["file",{impliedType:!0,path:"iq.jingle.contents.application.file",selector:e},{impliedType:!0,path:"iq.jingle.info.file",selector:`{${e}}checksum`}],defaultType:n.NS_JINGLE_FILE_TRANSFER_5,element:"file",fields:{date:(0,r.childDate)(null,"date"),description:(0,r.childText)(null,"desc"),mediaType:(0,r.childText)(null,"media-type"),name:(0,r.childText)(null,"name"),size:(0,r.childInteger)(null,"size")},namespace:e,type:e,typeField:"version"},{aliases:[{impliedType:!0,path:"file.range",selector:e}],defaultType:n.NS_JINGLE_FILE_TRANSFER_5,element:"range",fields:{length:(0,r.integerAttribute)("length"),offset:(0,r.integerAttribute)("offset",0)},namespace:e,type:e,typeField:"version"},{element:"description",namespace:e,path:"iq.jingle.contents.application",type:e,typeField:"applicationType"},{element:"received",fields:{creator:(0,r.attribute)("creator"),name:(0,r.attribute)("name")},namespace:e,path:"iq.jingle.info",type:`{${e}}received`,typeField:"infoType"},{element:"checksum",fields:{creator:(0,r.attribute)("creator"),name:(0,r.attribute)("name")},namespace:e,path:"iq.jingle.info",type:`{${e}}checksum`,typeField:"infoType"}]);t.default=s},7905:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=i(6552),n={element:"description",namespace:r.NS_JINGLE_XML_0,path:"iq.jingle.contents.application",type:r.NS_JINGLE_XML_0,typeField:"applicationType"};t.default=n},2777:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=i(9447),n=i(6552),s=[{element:"transport",fields:{activated:(0,r.childAttribute)(null,"activated","cid"),address:(0,r.attribute)("dstaddr"),candidateError:(0,r.childBoolean)(null,"candidate-error"),candidateUsed:(0,r.childAttribute)(null,"candidate-used","cid"),mode:(0,r.attribute)("mode","tcp"),proxyError:(0,r.childBoolean)(null,"proxy-error"),sid:(0,r.attribute)("sid")},namespace:n.NS_JINGLE_SOCKS5_1,path:"iq.jingle.contents.transport",type:n.NS_JINGLE_SOCKS5_1,typeField:"transportType"},{aliases:[{multiple:!0,path:"iq.jingle.contents.transport.candidates",selector:n.NS_JINGLE_SOCKS5_1}],element:"candidate",fields:{cid:(0,r.attribute)("cid"),host:(0,r.attribute)("host"),jid:(0,r.JIDAttribute)("jid"),port:(0,r.integerAttribute)("port"),priority:(0,r.integerAttribute)("priority"),type:(0,r.attribute)("type"),uri:(0,r.attribute)("uri")},namespace:n.NS_JINGLE_SOCKS5_1}];t.default=s},415:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=i(9447),n=i(6552),s={element:"transport",fields:{ack:{importer:(e,t)=>"message"!==(0,r.attribute)("stanza","iq").importer(e,t),exporter(e,t,i){!1===t&&(0,r.attribute)("stanza").exporter(e,"message",i)}},blockSize:(0,r.integerAttribute)("block-size"),sid:(0,r.attribute)("sid")},namespace:n.NS_JINGLE_IBB_1,path:"iq.jingle.contents.transport",type:n.NS_JINGLE_IBB_1,typeField:"transportType"};t.default=s},4207:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=i(9447),n=i(6552),s=[(0,r.addAlias)(n.NS_BOB,"data",[{path:"iq.jingle.bits",multiple:!0}]),{element:"thumbnail",fields:{height:(0,r.integerAttribute)("height"),mediaType:(0,r.attribute)("media-type"),uri:(0,r.attribute)("uri"),width:(0,r.integerAttribute)("width")},namespace:n.NS_THUMBS_1,path:"thumbnail"}];t.default=s},2649:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=i(9447),n=i(6552),s=[(0,r.addAlias)(n.NS_FORWARD_0,"forwarded",["message.carbon.forward"]),{element:"enable",namespace:n.NS_CARBONS_2,path:"iq.carbons",type:"enable",typeField:"action"},{element:"disable",namespace:n.NS_CARBONS_2,path:"iq.carbons",type:"disable",typeField:"action"},{element:"sent",namespace:n.NS_CARBONS_2,path:"message.carbon",type:"sent",typeField:"type"},{element:"received",namespace:n.NS_CARBONS_2,path:"message.carbon",type:"received",typeField:"type"}];t.default=s},5310:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=i(9447),n=i(2768),s=i(6552),a=[...Object.values(n.StreamType).map((e=>(0,r.addAlias)(e,"message",["forward.message"]))),...Object.values(n.StreamType).map((e=>(0,r.addAlias)(e,"presence",["forward.presence"]))),...Object.values(n.StreamType).map((e=>(0,r.addAlias)(e,"iq",["forward.iq"]))),(0,r.addAlias)(s.NS_DELAY,"delay",["forward.delay"]),{aliases:["message.forward"],element:"forwarded",namespace:s.NS_FORWARD_0,path:"forward"}];t.default=a},964:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=i(9447),n=i(6552),s=[{defaultType:"2",element:"hash",fields:{algorithm:(0,r.attribute)("algo"),value:(0,r.textBuffer)("base64"),version:(0,r.staticValue)("2")},namespace:n.NS_HASHES_2,path:"hash",type:"2",typeField:"version"},{element:"hash-used",fields:{algorithm:(0,r.attribute)("algo"),version:(0,r.staticValue)("2")},namespace:n.NS_HASHES_2,path:"hashUsed"},{element:"hash",fields:{algorithm:(0,r.attribute)("algo"),value:(0,r.textBuffer)("hex"),version:(0,r.staticValue)("1")},namespace:n.NS_HASHES_1,path:"hash",type:"1",typeField:"version"}];t.default=s},2584:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=i(9447),n=i(6552),s=[{element:"rtt",fields:{event:(0,r.attribute)("event","edit"),id:(0,r.attribute)("id"),seq:(0,r.integerAttribute)("seq")},namespace:n.NS_RTT_0,path:"message.rtt"},{aliases:[{path:"message.rtt.actions",multiple:!0}],element:"t",fields:{position:(0,r.integerAttribute)("p"),text:(0,r.text)()},namespace:n.NS_RTT_0,type:"insert",typeField:"type"},{aliases:[{path:"message.rtt.actions",multiple:!0}],element:"e",fields:{length:(0,r.integerAttribute)("n",1),position:(0,r.integerAttribute)("p")},namespace:n.NS_RTT_0,type:"erase",typeField:"type"},{aliases:[{multiple:!0,path:"message.rtt.actions"}],element:"w",fields:{duration:(0,r.integerAttribute)("n",0)},namespace:n.NS_RTT_0,type:"wait",typeField:"type"}];t.default=s},3163:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=i(9447),n=i(6552);t.default=(0,r.extendMessage)({replace:(0,r.childAttribute)(n.NS_CORRECTION_0,"replace","id")})},2638:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=i(9447),n=i(6552),s={2:n.NS_MAM_2,1:n.NS_MAM_1},a=[(0,r.addAlias)(n.NS_DATAFORM,"x",["iq.archive.form"]),(0,r.addAlias)(n.NS_FORWARD_0,"forwarded",["message.archive.item"]),(0,r.addAlias)(n.NS_RSM,"set",["iq.archive.paging"])];for(const[e,t]of Object.entries(s))a.push({defaultType:"query",defaultVersion:"2",element:"query",fields:{node:(0,r.attribute)("node"),queryId:(0,r.attribute)("queryid")},namespace:t,path:"iq.archive",type:"query",typeField:"type",version:e,versionField:"version"},{element:"fin",fields:{complete:(0,r.booleanAttribute)("complete"),stable:(0,r.booleanAttribute)("stable")},namespace:t,path:"iq.archive",type:"result",version:e},{element:"prefs",fields:{default:(0,r.attribute)("default"),always:(0,r.deepMultipleChildText)([{namespace:null,element:"always"},{namespace:null,element:"jid"}]),never:(0,r.deepMultipleChildText)([{namespace:null,element:"never"},{namespace:null,element:"jid"}])},namespace:t,path:"iq.archive",type:"preferences",version:e},{element:"result",defaultType:"2",fields:{id:(0,r.attribute)("id"),queryId:(0,r.attribute)("queryid")},namespace:t,path:"message.archive",type:e,typeField:"version"});t.default=a},3394:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=i(9447),n=i(6552),s=[(0,r.extendPresence)({hats:(0,r.splicePath)(n.NS_HATS_0,"hats","hat",!0)}),{element:"hat",fields:{id:(0,r.attribute)("name"),name:(0,r.attribute)("displayName")},namespace:n.NS_HATS_0,path:"hat"}];t.default=s},6532:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=i(9447),n=i(6552);t.default=(0,r.extendPresence)({idleSince:(0,r.childDate)(n.NS_IDLE_1,"since")})},8662:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=i(9447),n=i(6552),s={aliases:[{multiple:!0,path:"iq.jingle.contents.transport.fingerprints",selector:n.NS_JINGLE_ICE_UDP_1},{multiple:!0,path:"iq.jingle.contents.transport.fingerprints",selector:n.NS_JINGLE_ICE_0},{multiple:!0,path:"iq.jingle.contents.application.encryption.dtls",selector:n.NS_JINGLE_RTP_1}],element:"fingerprint",fields:{algorithm:(0,r.attribute)("hash"),setup:(0,r.attribute)("setup"),value:(0,r.text)()},namespace:n.NS_JINGLE_DTLS_0};t.default=s},1965:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=i(9447),n=i(6552),s="message.marker",a=[{element:"markable",namespace:n.NS_CHAT_MARKERS_0,path:s,type:"markable",typeField:"type"},{element:"received",fields:{id:(0,r.attribute)("id")},namespace:n.NS_CHAT_MARKERS_0,path:s,type:"received"},{element:"displayed",fields:{id:(0,r.attribute)("id")},namespace:n.NS_CHAT_MARKERS_0,path:s,type:"displayed"},{element:"acknowledged",fields:{id:(0,r.attribute)("id")},namespace:n.NS_CHAT_MARKERS_0,path:s,type:"acknowledged"}];t.default=a},9639:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=i(9447),n=i(6552);t.default=(0,r.extendMessage)({processingHints:{importer(e){const t={};let i=!1;for(const r of e.children)if("string"!=typeof r&&r.getNamespace()===n.NS_HINTS)switch(r.getName()){case"no-copy":t.noCopy=!0,i=!0;break;case"no-permanent-store":t.noPermanentStore=!0,i=!0;break;case"no-store":t.noStore=!0,i=!0;break;case"store":t.store=!0,i=!0}return i?t:void 0},exporter(e,t,i){t.noCopy&&e.appendChild((0,r.createElement)(n.NS_HINTS,"no-copy",i.namespace,e)),t.noPermanentStore&&e.appendChild((0,r.createElement)(n.NS_HINTS,"no-permanent-store",i.namespace,e)),t.noStore&&e.appendChild((0,r.createElement)(n.NS_HINTS,"no-store",i.namespace,e)),t.store&&e.appendChild((0,r.createElement)(n.NS_HINTS,"store",i.namespace,e))}}})},7188:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=i(9447),n=i(6552),s=[(0,r.extendMessage)({json:(0,r.childJSON)(n.NS_JSON_0,"json")}),{aliases:(0,r.pubsubItemContentAliases)(),element:"json",fields:{json:(0,r.textJSON)()},namespace:n.NS_JSON_0,type:n.NS_JSON_0},{aliases:[{path:"message.jsonPayloads",multiple:!0}],element:"payload",fields:{type:(0,r.attribute)("datatype"),data:(0,r.childJSON)(n.NS_JSON_0,"json")},namespace:n.NS_JSON_MESSAGE_0}];t.default=s},8711:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=i(9447),n=i(6552),s=[{aliases:[{path:"iq.jingle.groups",multiple:!0}],element:"group",fields:{contents:(0,r.multipleChildAttribute)(null,"content","name"),semantics:(0,r.attribute)("semantics")},namespace:n.NS_JINGLE_GROUPING_0}];t.default=s},6027:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=i(9447),n=i(6552),s={aliases:[{path:"iq.jingle.contents.transport.sctp",selector:n.NS_JINGLE_ICE_UDP_1},{path:"iq.jingle.contents.transport.sctp",selector:n.NS_JINGLE_ICE_0}],element:"sctpmap",fields:{port:(0,r.integerAttribute)("number"),protocol:(0,r.attribute)("protocol"),streams:(0,r.attribute)("streams")},namespace:n.NS_JINGLE_DTLS_SCTP_1};t.default=s},9542:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=i(6552),n=[{element:"active",namespace:r.NS_CSI_0,path:"csi",type:"active",typeField:"state"},{element:"inactive",namespace:r.NS_CSI_0,path:"csi",type:"inactive",typeField:"state"}];t.default=n},8967:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=i(9447),n=i(6552),s=[(0,r.addAlias)(n.NS_DATAFORM,"x",["iq.push.form","pushNotification.form"]),{element:"enable",fields:{jid:(0,r.JIDAttribute)("jid"),node:(0,r.attribute)("node")},namespace:n.NS_PUSH_0,path:"iq.push",type:"enable",typeField:"action"},{element:"disable",fields:{jid:(0,r.JIDAttribute)("jid"),node:(0,r.attribute)("node")},namespace:n.NS_PUSH_0,path:"iq.push",type:"disable",typeField:"action"},{aliases:(0,r.pubsubItemContentAliases)(),element:"notification",namespace:n.NS_PUSH_0,path:"pushNotification",type:n.NS_PUSH_0,typeField:"itemType"}];t.default=s},2691:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=i(9447),n=i(6552),s=[(0,r.extendMessage)({originId:(0,r.childAttribute)(n.NS_SID_0,"origin-id","id")}),{aliases:[{path:"message.stanzaIds",multiple:!0}],element:"stanza-id",fields:{by:(0,r.JIDAttribute)("by"),id:(0,r.attribute)("id")},namespace:n.NS_SID_0}];t.default=s},7687:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=i(9447),n=i(6552),s=[(0,r.extendStanzaError)({httpUploadError:(0,r.childEnum)(n.NS_HTTP_UPLOAD_0,["file-too-large","retry"]),httpUploadMaxFileSize:(0,r.deepChildInteger)([{namespace:n.NS_HTTP_UPLOAD_0,element:"file-too-large"},{namespace:n.NS_HTTP_UPLOAD_0,element:"max-file-size"}]),httpUploadRetry:(0,r.childDateAttribute)(n.NS_HTTP_UPLOAD_0,"retry","stamp")}),{element:"request",fields:{mediaType:(0,r.attribute)("content-type"),name:(0,r.attribute)("filename"),size:(0,r.integerAttribute)("size")},namespace:n.NS_HTTP_UPLOAD_0,path:"iq.httpUpload",type:"request",typeField:"type"},{element:"slot",fields:{download:(0,r.childAttribute)(null,"get","url")},namespace:n.NS_HTTP_UPLOAD_0,path:"iq.httpUpload",type:"slot"},{aliases:[{path:"iq.httpUpload.upload",selector:"slot"}],element:"put",fields:{url:(0,r.attribute)("url")},namespace:n.NS_HTTP_UPLOAD_0},{aliases:[{path:"iq.httpUpload.upload.headers",multiple:!0}],element:"header",fields:{name:(0,r.attribute)("name"),value:(0,r.text)()},namespace:n.NS_HTTP_UPLOAD_0}];t.default=s},8210:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=i(9447),n=i(6552),s={element:"encryption",fields:{id:(0,r.attribute)("namespace"),name:(0,r.attribute)("name")},namespace:n.NS_EME_0,path:"message.encryptionMethod"};t.default=s},9943:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=i(9447),n=i(6552),s=[{aliases:["message.omemo"],element:"encrypted",fields:{payload:(0,r.childTextBuffer)(null,"payload","base64")},namespace:n.NS_OMEMO_AXOLOTL,path:"omemo"},{element:"header",fields:{iv:(0,r.childTextBuffer)(null,"iv","base64"),sid:(0,r.integerAttribute)("sid")},namespace:n.NS_OMEMO_AXOLOTL,path:"omemo.header"},{aliases:[{path:"omemo.header.keys",multiple:!0}],element:"key",fields:{preKey:(0,r.booleanAttribute)("prekey"),rid:(0,r.integerAttribute)("rid"),value:(0,r.textBuffer)("base64")},namespace:n.NS_OMEMO_AXOLOTL},{aliases:(0,r.pubsubItemContentAliases)(),element:"list",fields:{devices:(0,r.multipleChildIntegerAttribute)(null,"device","id")},namespace:n.NS_OMEMO_AXOLOTL,type:n.NS_OMEMO_AXOLOTL_DEVICELIST,typeField:"itemType"},{element:"preKeyPublic",fields:{id:(0,r.integerAttribute)("preKeyId"),value:(0,r.textBuffer)("base64")},namespace:n.NS_OMEMO_AXOLOTL,path:"omemoPreKey"},{element:"signedPreKeyPublic",fields:{id:(0,r.integerAttribute)("signedPreKeyId"),value:(0,r.textBuffer)("base64")},namespace:n.NS_OMEMO_AXOLOTL,path:"omemoDevice.signedPreKeyPublic"},{aliases:(0,r.pubsubItemContentAliases)(),element:"bundle",fields:{identityKey:(0,r.childTextBuffer)(null,"identityKey","base64"),preKeys:(0,r.splicePath)(null,"prekeys","omemoPreKey",!0),signedPreKeySignature:(0,r.childTextBuffer)(null,"signedPreKeySignature","base64")},namespace:n.NS_OMEMO_AXOLOTL,path:"omemoDevice",type:n.NS_OMEMO_AXOLOTL_BUNDLES,typeField:"itemType"}];t.default=s},6335:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=i(9447),n=i(6552),s=[{element:"XRD",fields:{subject:(0,r.childText)(null,"Subject")},namespace:n.NS_XRD,path:"xrd"},{aliases:[{path:"xrd.links",multiple:!0}],element:"Link",fields:{href:(0,r.attribute)("href"),rel:(0,r.attribute)("rel"),type:(0,r.attribute)("type")},namespace:n.NS_XRD}];t.default=s},5559:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=i(2768),n=i(4142),s=i(9447),a=i(2898);class o{constructor(e){this.active=!1,this.maxRetries=5,this.stream=e,this.maxTimeout=1100*this.stream.maxWaitTime}async send(e,t){this.rid=e,this.active=!0;let i=0;for(;i<=this.maxRetries;){i+=1;try{const e=await(0,a.timeoutPromise)((0,n.fetch)(this.stream.url,{body:t,headers:{"Content-Type":this.stream.contentType},method:"POST"}),this.maxTimeout,(()=>new Error("Request timed out")));if(!e.ok)throw new Error("HTTP Status Error: "+e.status);const i=await e.text();return this.active=!1,i}catch(e){if(1===i)continue;if(i<this.maxRetries){const e=Math.min(this.maxTimeout,1e3*Math.pow(i,2));await(0,a.sleep)(e+1e3*Math.random());continue}throw this.active=!1,e}}throw new Error("Request failed")}}class l extends n.Duplex{constructor(e,t,i){super({objectMode:!0}),this.rid=Math.floor(4294967295*Math.random()),this.sid="",this.maxHoldOpen=2,this.maxWaitTime=30,this.contentType="text/xml; charset=utf-8",this.channels=[new o(this),new o(this)],this.activeChannelID=0,this.queue=[],this.isEnded=!1,this.client=e,this.sm=t,this.stanzas=i,this.on("data",(e=>{this.client.emit("stream:data",e.stanza,e.kind)})),this.on("end",(()=>{this.isEnded=!0,clearTimeout(this.idleTimeout),this.client.transport===this&&this.client.emit("--transport-disconnected")}))}_write(e,t,i){this.queue.push([e,i]),this.scheduleRequests()}_writev(e,t){this.queue.push([e.map((e=>e.chunk)).join(""),t]),this.scheduleRequests()}_read(){}process(e){const t=new s.StreamParser({acceptLanguages:this.config.acceptLanguages,allowComments:!1,lang:this.config.lang,registry:this.stanzas,rootKey:"bosh",wrappedStream:!0});t.on("error",(e=>{const t={condition:r.StreamErrorCondition.InvalidXML};return this.client.emit("stream:error",t,e),this.send("error",t),this.disconnect()})),t.on("data",(e=>{if("stream-start"===e.event)return this.stream=e.stanza,void("terminate"===e.stanza.type?(this.hasStream=!1,this.rid=void 0,this.sid=void 0,this.isEnded||(this.isEnded=!0,this.client.emit("bosh:terminate",e.stanza),this.client.emit("stream:end"),this.push(null))):this.hasStream||(this.hasStream=!0,this.stream=e.stanza,this.sid=e.stanza.sid||this.sid,this.maxWaitTime=e.stanza.maxWaitTime||this.maxWaitTime,this.client.emit("stream:start",e.stanza)));e.event||this.push({kind:e.kind,stanza:e.stanza})})),this.client.emit("raw","incoming",e),t.write(e),this.scheduleRequests()}connect(e){if(this.config=e,this.url=e.url,e.rid&&(this.rid=e.rid),e.sid&&(this.sid=e.sid),e.wait&&(this.maxWaitTime=e.wait),e.maxHoldOpen&&(this.maxHoldOpen=e.maxHoldOpen),this.sid)return this.hasStream=!0,this.stream={},this.client.emit("connected"),this.client.emit("session:prebind",this.config.jid),void this.client.emit("session:started");this._send({lang:e.lang,maxHoldOpen:this.maxHoldOpen,maxWaitTime:this.maxWaitTime,to:e.server,version:"1.6",xmppVersion:"1.0"})}restart(){this.hasStream=!1,this._send({to:this.config.server,xmppRestart:!0})}disconnect(e=!0){this.hasStream&&e?this._send({type:"terminate"}):(this.stream=void 0,this.sid=void 0,this.rid=void 0,this.client.emit("--transport-disconnected"))}async send(e,t){var i;let r;if(t&&(r=null===(i=this.stanzas.export(e,t))||void 0===i?void 0:i.toString()),r)return new Promise(((e,t)=>{this.write(r,"utf8",(i=>i?t(i):e()))}))}get sendingChannel(){return this.channels[this.activeChannelID]}get pollingChannel(){return this.channels[0===this.activeChannelID?1:0]}toggleChannel(){this.activeChannelID=0===this.activeChannelID?1:0}async _send(e,t=""){if(this.isEnded)return;const i=this.rid++,r=this.stanzas.export("bosh",{...e,rid:i,sid:this.sid});let n;n=t?[r.openTag(),t,r.closeTag()].join(""):r.toString(),this.client.emit("raw","outgoing",n),this.sendingChannel.send(i,n).then((e=>{this.process(e)})).catch((e=>{this.end(e)})),this.toggleChannel()}async _poll(){if(this.isEnded)return;const e=this.rid++,t=this.stanzas.export("bosh",{rid:e,sid:this.sid}).toString();this.client.emit("raw","outgoing",t),this.pollingChannel.send(e,t).then((e=>{this.process(e)})).catch((e=>{this.end(e)}))}scheduleRequests(){clearTimeout(this.idleTimeout),this.idleTimeout=setTimeout((()=>{this.fireRequests()}),10)}fireRequests(){if(!this.isEnded)if(this.queue.length)if(this.sendingChannel.active)this.scheduleRequests();else{const[e,t]=this.queue.shift();this._send({},e),t()}else!this.authenticated||this.channels[0].active||this.channels[1].active||this._poll()}}t.default=l},1667:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=i(2768),n=i(9447),s=i(4142);class a extends s.Duplex{constructor(e,t,i){super({objectMode:!0}),this.sm=t,this.stanzas=i,this.closing=!1,this.client=e,this.on("data",(e=>{this.client.emit("stream:data",e.stanza,e.kind)})),this.on("error",(()=>{this.end()})),this.on("end",(()=>{this.client.transport===this&&this.client.emit("--transport-disconnected")}))}_read(){}_write(e,t,i){if(!this.socket||1!==this.socket.readyState)return i(new Error("Socket closed"));const r=s.Buffer.from(e,"utf8").toString();this.client.emit("raw","outgoing",r),this.socket.send(r),i()}connect(e){this.config=e,this.hasStream=!1,this.closing=!1,this.parser=new n.StreamParser({acceptLanguages:this.config.acceptLanguages,allowComments:!1,lang:this.config.lang,registry:this.stanzas,wrappedStream:!1}),this.parser.on("data",(e=>{const t=e.kind,i=e.stanza;if("stream"===t){if("open"===i.action)return this.hasStream=!0,this.stream=i,this.client.emit("stream:start",i);if("close"===i.action)return this.client.emit("stream:end"),this.disconnect()}this.push({kind:e.kind,stanza:e.stanza})})),this.parser.on("error",(e=>{const t={condition:r.StreamErrorCondition.InvalidXML};return this.client.emit("stream:error",t,e),this.write(this.stanzas.export("error",t).toString()),this.disconnect()})),this.socket=new s.WebSocket(e.url,"xmpp"),this.socket.onopen=()=>{this.emit("connect"),this.sm.started=!1,this.client.emit("connected"),this.write(this.startHeader())},this.socket.onmessage=e=>{const t=s.Buffer.from(e.data,"utf8").toString();this.client.emit("raw","incoming",t),this.parser&&this.parser.write(t)},this.socket.onclose=()=>{this.push(null)},this.socket.onerror=e=>{console.error(e),this.push(null)}}disconnect(e=!0){this.socket&&!this.closing&&this.hasStream&&e?(this.closing=!0,this.write(this.closeHeader())):(this.hasStream=!1,this.stream=void 0,this.socket&&(this.end(),this.socket.close(),this.client.transport===this&&this.client.emit("--transport-disconnected")),this.socket=void 0)}async send(e,t){var i;let r;if(t&&(r=null===(i=this.stanzas.export(e,t))||void 0===i?void 0:i.toString()),r)return new Promise(((e,t)=>{this.write(r,"utf8",(i=>i?t(i):e()))}))}restart(){this.hasStream=!1,this.write(this.startHeader())}startHeader(){return this.stanzas.export("stream",{action:"open",lang:this.config.lang,to:this.config.server,version:"1.0"}).toString()}closeHeader(){return this.stanzas.export("stream",{action:"close"}).toString()}}t.default=a},7187:e=>{var t,i="object"==typeof Reflect?Reflect:null,r=i&&"function"==typeof i.apply?i.apply:function(e,t,i){return Function.prototype.apply.call(e,t,i)};t=i&&"function"==typeof i.ownKeys?i.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var n=Number.isNaN||function(e){return e!=e};function s(){s.init.call(this)}e.exports=s,e.exports.once=function(e,t){return new Promise((function(i,r){function n(i){e.removeListener(t,s),r(i)}function s(){"function"==typeof e.removeListener&&e.removeListener("error",n),i([].slice.call(arguments))}m(e,t,s,{once:!0}),"error"!==t&&function(e,t,i){"function"==typeof e.on&&m(e,"error",t,{once:!0})}(e,n)}))},s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var a=10;function o(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function l(e){return void 0===e._maxListeners?s.defaultMaxListeners:e._maxListeners}function c(e,t,i,r){var n,s,a,c;if(o(i),void 0===(s=e._events)?(s=e._events=Object.create(null),e._eventsCount=0):(void 0!==s.newListener&&(e.emit("newListener",t,i.listener?i.listener:i),s=e._events),a=s[t]),void 0===a)a=s[t]=i,++e._eventsCount;else if("function"==typeof a?a=s[t]=r?[i,a]:[a,i]:r?a.unshift(i):a.push(i),(n=l(e))>0&&a.length>n&&!a.warned){a.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=e,u.type=t,u.count=a.length,c=u,console&&console.warn&&console.warn(c)}return e}function u(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function p(e,t,i){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:i},n=u.bind(r);return n.listener=i,r.wrapFn=n,n}function d(e,t,i){var r=e._events;if(void 0===r)return[];var n=r[t];return void 0===n?[]:"function"==typeof n?i?[n.listener||n]:[n]:i?function(e){for(var t=new Array(e.length),i=0;i<t.length;++i)t[i]=e[i].listener||e[i];return t}(n):f(n,n.length)}function h(e){var t=this._events;if(void 0!==t){var i=t[e];if("function"==typeof i)return 1;if(void 0!==i)return i.length}return 0}function f(e,t){for(var i=new Array(t),r=0;r<t;++r)i[r]=e[r];return i}function m(e,t,i,r){if("function"==typeof e.on)r.once?e.once(t,i):e.on(t,i);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function n(s){r.once&&e.removeEventListener(t,n),i(s)}))}}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return a},set:function(e){if("number"!=typeof e||e<0||n(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");a=e}}),s.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||n(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},s.prototype.getMaxListeners=function(){return l(this)},s.prototype.emit=function(e){for(var t=[],i=1;i<arguments.length;i++)t.push(arguments[i]);var n="error"===e,s=this._events;if(void 0!==s)n=n&&void 0===s.error;else if(!n)return!1;if(n){var a;if(t.length>0&&(a=t[0]),a instanceof Error)throw a;var o=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw o.context=a,o}var l=s[e];if(void 0===l)return!1;if("function"==typeof l)r(l,this,t);else{var c=l.length,u=f(l,c);for(i=0;i<c;++i)r(u[i],this,t)}return!0},s.prototype.addListener=function(e,t){return c(this,e,t,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(e,t){return c(this,e,t,!0)},s.prototype.once=function(e,t){return o(t),this.on(e,p(this,e,t)),this},s.prototype.prependOnceListener=function(e,t){return o(t),this.prependListener(e,p(this,e,t)),this},s.prototype.removeListener=function(e,t){var i,r,n,s,a;if(o(t),void 0===(r=this._events))return this;if(void 0===(i=r[e]))return this;if(i===t||i.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,i.listener||t));else if("function"!=typeof i){for(n=-1,s=i.length-1;s>=0;s--)if(i[s]===t||i[s].listener===t){a=i[s].listener,n=s;break}if(n<0)return this;0===n?i.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(i,n),1===i.length&&(r[e]=i[0]),void 0!==r.removeListener&&this.emit("removeListener",e,a||t)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(e){var t,i,r;if(void 0===(i=this._events))return this;if(void 0===i.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==i[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete i[e]),this;if(0===arguments.length){var n,s=Object.keys(i);for(r=0;r<s.length;++r)"removeListener"!==(n=s[r])&&this.removeAllListeners(n);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=i[e]))this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},s.prototype.listeners=function(e){return d(this,e,!0)},s.prototype.rawListeners=function(e){return d(this,e,!1)},s.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):h.call(e,t)},s.prototype.listenerCount=h,s.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]}},3689:(e,t,i)=>{i.r(t),i.d(t,{decode:()=>_,default:()=>v,encode:()=>b,toASCII:()=>S,toUnicode:()=>y,ucs2decode:()=>h,ucs2encode:()=>f});const r=2147483647,n=36,s=/^xn--/,a=/[^\0-\x7F]/,o=/[\x2E\u3002\uFF0E\uFF61]/g,l={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},c=Math.floor,u=String.fromCharCode;function p(e){throw new RangeError(l[e])}function d(e,t){const i=e.split("@");let r="";i.length>1&&(r=i[0]+"@",e=i[1]);const n=function(e,t){const i=[];let r=e.length;for(;r--;)i[r]=t(e[r]);return i}((e=e.replace(o,".")).split("."),t).join(".");return r+n}function h(e){const t=[];let i=0;const r=e.length;for(;i<r;){const n=e.charCodeAt(i++);if(n>=55296&&n<=56319&&i<r){const r=e.charCodeAt(i++);56320==(64512&r)?t.push(((1023&n)<<10)+(1023&r)+65536):(t.push(n),i--)}else t.push(n)}return t}const f=e=>String.fromCodePoint(...e),m=function(e,t){return e+22+75*(e<26)-((0!=t)<<5)},g=function(e,t,i){let r=0;for(e=i?c(e/700):e>>1,e+=c(e/t);e>455;r+=n)e=c(e/35);return c(r+36*e/(e+38))},_=function(e){const t=[],i=e.length;let s=0,a=128,o=72,l=e.lastIndexOf("-");l<0&&(l=0);for(let i=0;i<l;++i)e.charCodeAt(i)>=128&&p("not-basic"),t.push(e.charCodeAt(i));for(let d=l>0?l+1:0;d<i;){const l=s;for(let t=1,a=n;;a+=n){d>=i&&p("invalid-input");const l=(u=e.charCodeAt(d++))>=48&&u<58?u-48+26:u>=65&&u<91?u-65:u>=97&&u<123?u-97:n;l>=n&&p("invalid-input"),l>c((r-s)/t)&&p("overflow"),s+=l*t;const h=a<=o?1:a>=o+26?26:a-o;if(l<h)break;const f=n-h;t>c(r/f)&&p("overflow"),t*=f}const h=t.length+1;o=g(s-l,h,0==l),c(s/h)>r-a&&p("overflow"),a+=c(s/h),s%=h,t.splice(s++,0,a)}var u;return String.fromCodePoint(...t)},b=function(e){const t=[],i=(e=h(e)).length;let s=128,a=0,o=72;for(const i of e)i<128&&t.push(u(i));const l=t.length;let d=l;for(l&&t.push("-");d<i;){let i=r;for(const t of e)t>=s&&t<i&&(i=t);const h=d+1;i-s>c((r-a)/h)&&p("overflow"),a+=(i-s)*h,s=i;for(const i of e)if(i<s&&++a>r&&p("overflow"),i===s){let e=a;for(let i=n;;i+=n){const r=i<=o?1:i>=o+26?26:i-o;if(e<r)break;const s=e-r,a=n-r;t.push(u(m(r+s%a,0))),e=c(s/a)}t.push(u(m(e,0))),o=g(a,h,d===l),a=0,++d}++a,++s}return t.join("")},y=function(e){return d(e,(function(e){return s.test(e)?_(e.slice(4).toLowerCase()):e}))},S=function(e){return d(e,(function(e){return a.test(e)?"xn--"+b(e):e}))},v={version:"2.3.1",ucs2:{decode:h,encode:f},decode:_,encode:b,toASCII:S,toUnicode:y}},7539:e=>{const t={generateIdentifier:function(){return Math.random().toString(36).substring(2,12)}};t.localCName=t.generateIdentifier(),t.splitLines=function(e){return e.trim().split("\n").map((e=>e.trim()))},t.splitSections=function(e){return e.split("\nm=").map(((e,t)=>(t>0?"m="+e:e).trim()+"\r\n"))},t.getDescription=function(e){const i=t.splitSections(e);return i&&i[0]},t.getMediaSections=function(e){const i=t.splitSections(e);return i.shift(),i},t.matchPrefix=function(e,i){return t.splitLines(e).filter((e=>0===e.indexOf(i)))},t.parseCandidate=function(e){let t;t=0===e.indexOf("a=candidate:")?e.substring(12).split(" "):e.substring(10).split(" ");const i={foundation:t[0],component:{1:"rtp",2:"rtcp"}[t[1]]||t[1],protocol:t[2].toLowerCase(),priority:parseInt(t[3],10),ip:t[4],address:t[4],port:parseInt(t[5],10),type:t[7]};for(let e=8;e<t.length;e+=2)switch(t[e]){case"raddr":i.relatedAddress=t[e+1];break;case"rport":i.relatedPort=parseInt(t[e+1],10);break;case"tcptype":i.tcpType=t[e+1];break;case"ufrag":i.ufrag=t[e+1],i.usernameFragment=t[e+1];break;default:void 0===i[t[e]]&&(i[t[e]]=t[e+1])}return i},t.writeCandidate=function(e){const t=[];t.push(e.foundation);const i=e.component;"rtp"===i?t.push(1):"rtcp"===i?t.push(2):t.push(i),t.push(e.protocol.toUpperCase()),t.push(e.priority),t.push(e.address||e.ip),t.push(e.port);const r=e.type;return t.push("typ"),t.push(r),"host"!==r&&e.relatedAddress&&e.relatedPort&&(t.push("raddr"),t.push(e.relatedAddress),t.push("rport"),t.push(e.relatedPort)),e.tcpType&&"tcp"===e.protocol.toLowerCase()&&(t.push("tcptype"),t.push(e.tcpType)),(e.usernameFragment||e.ufrag)&&(t.push("ufrag"),t.push(e.usernameFragment||e.ufrag)),"candidate:"+t.join(" ")},t.parseIceOptions=function(e){return e.substring(14).split(" ")},t.parseRtpMap=function(e){let t=e.substring(9).split(" ");const i={payloadType:parseInt(t.shift(),10)};return t=t[0].split("/"),i.name=t[0],i.clockRate=parseInt(t[1],10),i.channels=3===t.length?parseInt(t[2],10):1,i.numChannels=i.channels,i},t.writeRtpMap=function(e){let t=e.payloadType;void 0!==e.preferredPayloadType&&(t=e.preferredPayloadType);const i=e.channels||e.numChannels||1;return"a=rtpmap:"+t+" "+e.name+"/"+e.clockRate+(1!==i?"/"+i:"")+"\r\n"},t.parseExtmap=function(e){const t=e.substring(9).split(" ");return{id:parseInt(t[0],10),direction:t[0].indexOf("/")>0?t[0].split("/")[1]:"sendrecv",uri:t[1],attributes:t.slice(2).join(" ")}},t.writeExtmap=function(e){return"a=extmap:"+(e.id||e.preferredId)+(e.direction&&"sendrecv"!==e.direction?"/"+e.direction:"")+" "+e.uri+(e.attributes?" "+e.attributes:"")+"\r\n"},t.parseFmtp=function(e){const t={};let i;const r=e.substring(e.indexOf(" ")+1).split(";");for(let e=0;e<r.length;e++)i=r[e].trim().split("="),t[i[0].trim()]=i[1];return t},t.writeFmtp=function(e){let t="",i=e.payloadType;if(void 0!==e.preferredPayloadType&&(i=e.preferredPayloadType),e.parameters&&Object.keys(e.parameters).length){const r=[];Object.keys(e.parameters).forEach((t=>{void 0!==e.parameters[t]?r.push(t+"="+e.parameters[t]):r.push(t)})),t+="a=fmtp:"+i+" "+r.join(";")+"\r\n"}return t},t.parseRtcpFb=function(e){const t=e.substring(e.indexOf(" ")+1).split(" ");return{type:t.shift(),parameter:t.join(" ")}},t.writeRtcpFb=function(e){let t="",i=e.payloadType;return void 0!==e.preferredPayloadType&&(i=e.preferredPayloadType),e.rtcpFeedback&&e.rtcpFeedback.length&&e.rtcpFeedback.forEach((e=>{t+="a=rtcp-fb:"+i+" "+e.type+(e.parameter&&e.parameter.length?" "+e.parameter:"")+"\r\n"})),t},t.parseSsrcMedia=function(e){const t=e.indexOf(" "),i={ssrc:parseInt(e.substring(7,t),10)},r=e.indexOf(":",t);return r>-1?(i.attribute=e.substring(t+1,r),i.value=e.substring(r+1)):i.attribute=e.substring(t+1),i},t.parseSsrcGroup=function(e){const t=e.substring(13).split(" ");return{semantics:t.shift(),ssrcs:t.map((e=>parseInt(e,10)))}},t.getMid=function(e){const i=t.matchPrefix(e,"a=mid:")[0];if(i)return i.substring(6)},t.parseFingerprint=function(e){const t=e.substring(14).split(" ");return{algorithm:t[0].toLowerCase(),value:t[1].toUpperCase()}},t.getDtlsParameters=function(e,i){return{role:"auto",fingerprints:t.matchPrefix(e+i,"a=fingerprint:").map(t.parseFingerprint)}},t.writeDtlsParameters=function(e,t){let i="a=setup:"+t+"\r\n";return e.fingerprints.forEach((e=>{i+="a=fingerprint:"+e.algorithm+" "+e.value+"\r\n"})),i},t.parseCryptoLine=function(e){const t=e.substring(9).split(" ");return{tag:parseInt(t[0],10),cryptoSuite:t[1],keyParams:t[2],sessionParams:t.slice(3)}},t.writeCryptoLine=function(e){return"a=crypto:"+e.tag+" "+e.cryptoSuite+" "+("object"==typeof e.keyParams?t.writeCryptoKeyParams(e.keyParams):e.keyParams)+(e.sessionParams?" "+e.sessionParams.join(" "):"")+"\r\n"},t.parseCryptoKeyParams=function(e){if(0!==e.indexOf("inline:"))return null;const t=e.substring(7).split("|");return{keyMethod:"inline",keySalt:t[0],lifeTime:t[1],mkiValue:t[2]?t[2].split(":")[0]:void 0,mkiLength:t[2]?t[2].split(":")[1]:void 0}},t.writeCryptoKeyParams=function(e){return e.keyMethod+":"+e.keySalt+(e.lifeTime?"|"+e.lifeTime:"")+(e.mkiValue&&e.mkiLength?"|"+e.mkiValue+":"+e.mkiLength:"")},t.getCryptoParameters=function(e,i){return t.matchPrefix(e+i,"a=crypto:").map(t.parseCryptoLine)},t.getIceParameters=function(e,i){const r=t.matchPrefix(e+i,"a=ice-ufrag:")[0],n=t.matchPrefix(e+i,"a=ice-pwd:")[0];return r&&n?{usernameFragment:r.substring(12),password:n.substring(10)}:null},t.writeIceParameters=function(e){let t="a=ice-ufrag:"+e.usernameFragment+"\r\na=ice-pwd:"+e.password+"\r\n";return e.iceLite&&(t+="a=ice-lite\r\n"),t},t.parseRtpParameters=function(e){const i={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},r=t.splitLines(e)[0].split(" ");i.profile=r[2];for(let n=3;n<r.length;n++){const s=r[n],a=t.matchPrefix(e,"a=rtpmap:"+s+" ")[0];if(a){const r=t.parseRtpMap(a),n=t.matchPrefix(e,"a=fmtp:"+s+" ");switch(r.parameters=n.length?t.parseFmtp(n[0]):{},r.rtcpFeedback=t.matchPrefix(e,"a=rtcp-fb:"+s+" ").map(t.parseRtcpFb),i.codecs.push(r),r.name.toUpperCase()){case"RED":case"ULPFEC":i.fecMechanisms.push(r.name.toUpperCase())}}}t.matchPrefix(e,"a=extmap:").forEach((e=>{i.headerExtensions.push(t.parseExtmap(e))}));const n=t.matchPrefix(e,"a=rtcp-fb:* ").map(t.parseRtcpFb);return i.codecs.forEach((e=>{n.forEach((t=>{e.rtcpFeedback.find((e=>e.type===t.type&&e.parameter===t.parameter))||e.rtcpFeedback.push(t)}))})),i},t.writeRtpDescription=function(e,i){let r="";r+="m="+e+" ",r+=i.codecs.length>0?"9":"0",r+=" "+(i.profile||"UDP/TLS/RTP/SAVPF")+" ",r+=i.codecs.map((e=>void 0!==e.preferredPayloadType?e.preferredPayloadType:e.payloadType)).join(" ")+"\r\n",r+="c=IN IP4 0.0.0.0\r\n",r+="a=rtcp:9 IN IP4 0.0.0.0\r\n",i.codecs.forEach((e=>{r+=t.writeRtpMap(e),r+=t.writeFmtp(e),r+=t.writeRtcpFb(e)}));let n=0;return i.codecs.forEach((e=>{e.maxptime>n&&(n=e.maxptime)})),n>0&&(r+="a=maxptime:"+n+"\r\n"),i.headerExtensions&&i.headerExtensions.forEach((e=>{r+=t.writeExtmap(e)})),r},t.parseRtpEncodingParameters=function(e){const i=[],r=t.parseRtpParameters(e),n=-1!==r.fecMechanisms.indexOf("RED"),s=-1!==r.fecMechanisms.indexOf("ULPFEC"),a=t.matchPrefix(e,"a=ssrc:").map((e=>t.parseSsrcMedia(e))).filter((e=>"cname"===e.attribute)),o=a.length>0&&a[0].ssrc;let l;const c=t.matchPrefix(e,"a=ssrc-group:FID").map((e=>e.substring(17).split(" ").map((e=>parseInt(e,10)))));c.length>0&&c[0].length>1&&c[0][0]===o&&(l=c[0][1]),r.codecs.forEach((e=>{if("RTX"===e.name.toUpperCase()&&e.parameters.apt){let t={ssrc:o,codecPayloadType:parseInt(e.parameters.apt,10)};o&&l&&(t.rtx={ssrc:l}),i.push(t),n&&(t=JSON.parse(JSON.stringify(t)),t.fec={ssrc:o,mechanism:s?"red+ulpfec":"red"},i.push(t))}})),0===i.length&&o&&i.push({ssrc:o});let u=t.matchPrefix(e,"b=");return u.length&&(u=0===u[0].indexOf("b=TIAS:")?parseInt(u[0].substring(7),10):0===u[0].indexOf("b=AS:")?1e3*parseInt(u[0].substring(5),10)*.95-16e3:void 0,i.forEach((e=>{e.maxBitrate=u}))),i},t.parseRtcpParameters=function(e){const i={},r=t.matchPrefix(e,"a=ssrc:").map((e=>t.parseSsrcMedia(e))).filter((e=>"cname"===e.attribute))[0];r&&(i.cname=r.value,i.ssrc=r.ssrc);const n=t.matchPrefix(e,"a=rtcp-rsize");i.reducedSize=n.length>0,i.compound=0===n.length;const s=t.matchPrefix(e,"a=rtcp-mux");return i.mux=s.length>0,i},t.writeRtcpParameters=function(e){let t="";return e.reducedSize&&(t+="a=rtcp-rsize\r\n"),e.mux&&(t+="a=rtcp-mux\r\n"),void 0!==e.ssrc&&e.cname&&(t+="a=ssrc:"+e.ssrc+" cname:"+e.cname+"\r\n"),t},t.parseMsid=function(e){let i;const r=t.matchPrefix(e,"a=msid:");if(1===r.length)return i=r[0].substring(7).split(" "),{stream:i[0],track:i[1]};const n=t.matchPrefix(e,"a=ssrc:").map((e=>t.parseSsrcMedia(e))).filter((e=>"msid"===e.attribute));return n.length>0?(i=n[0].value.split(" "),{stream:i[0],track:i[1]}):void 0},t.parseSctpDescription=function(e){const i=t.parseMLine(e),r=t.matchPrefix(e,"a=max-message-size:");let n;r.length>0&&(n=parseInt(r[0].substring(19),10)),isNaN(n)&&(n=65536);const s=t.matchPrefix(e,"a=sctp-port:");if(s.length>0)return{port:parseInt(s[0].substring(12),10),protocol:i.fmt,maxMessageSize:n};const a=t.matchPrefix(e,"a=sctpmap:");if(a.length>0){const e=a[0].substring(10).split(" ");return{port:parseInt(e[0],10),protocol:e[1],maxMessageSize:n}}},t.writeSctpDescription=function(e,t){let i=[];return i="DTLS/SCTP"!==e.protocol?["m="+e.kind+" 9 "+e.protocol+" "+t.protocol+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctp-port:"+t.port+"\r\n"]:["m="+e.kind+" 9 "+e.protocol+" "+t.port+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctpmap:"+t.port+" "+t.protocol+" 65535\r\n"],void 0!==t.maxMessageSize&&i.push("a=max-message-size:"+t.maxMessageSize+"\r\n"),i.join("")},t.generateSessionId=function(){return Math.random().toString().substr(2,22)},t.writeSessionBoilerplate=function(e,i,r){let n;const s=void 0!==i?i:2;return n=e||t.generateSessionId(),"v=0\r\no="+(r||"thisisadapterortc")+" "+n+" "+s+" IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"},t.getDirection=function(e,i){const r=t.splitLines(e);for(let e=0;e<r.length;e++)switch(r[e]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return r[e].substring(2)}return i?t.getDirection(i):"sendrecv"},t.getKind=function(e){return t.splitLines(e)[0].split(" ")[0].substring(2)},t.isRejected=function(e){return"0"===e.split(" ",2)[1]},t.parseMLine=function(e){const i=t.splitLines(e)[0].substring(2).split(" ");return{kind:i[0],port:parseInt(i[1],10),protocol:i[2],fmt:i.slice(3).join(" ")}},t.parseOLine=function(e){const i=t.matchPrefix(e,"o=")[0].substring(2).split(" ");return{username:i[0],sessionId:i[1],sessionVersion:parseInt(i[2],10),netType:i[3],addressType:i[4],address:i[5]}},t.isValidSDP=function(e){if("string"!=typeof e||0===e.length)return!1;const i=t.splitLines(e);for(let e=0;e<i.length;e++)if(i[e].length<2||"="!==i[e].charAt(1))return!1;return!0},e.exports=t},1641:(e,t,i)=>{function r(e,...t){return(...i)=>e(...t,...i)}function n(e){return function(...t){var i=t.pop();return e.call(this,t,i)}}i.r(t),i.d(t,{all:()=>fe,allLimit:()=>me,allSeries:()=>ge,any:()=>tt,anyLimit:()=>it,anySeries:()=>rt,apply:()=>r,applyEach:()=>O,applyEachSeries:()=>j,asyncify:()=>p,auto:()=>L,autoInject:()=>U,cargo:()=>H,cargoQueue:()=>V,compose:()=>Q,concat:()=>Y,concatLimit:()=>X,concatSeries:()=>Z,constant:()=>ee,default:()=>mt,detect:()=>ie,detectLimit:()=>re,detectSeries:()=>ne,dir:()=>ae,doDuring:()=>oe,doUntil:()=>le,doWhilst:()=>oe,during:()=>dt,each:()=>ue,eachLimit:()=>pe,eachOf:()=>x,eachOfLimit:()=>E,eachOfSeries:()=>R,eachSeries:()=>de,ensureAsync:()=>he,every:()=>fe,everyLimit:()=>me,everySeries:()=>ge,filter:()=>Se,filterLimit:()=>ve,filterSeries:()=>Ne,find:()=>ie,findLimit:()=>re,findSeries:()=>ne,flatMap:()=>Y,flatMapLimit:()=>X,flatMapSeries:()=>Z,foldl:()=>$,foldr:()=>Je,forEach:()=>ue,forEachLimit:()=>pe,forEachOf:()=>x,forEachOfLimit:()=>E,forEachOfSeries:()=>R,forEachSeries:()=>de,forever:()=>Te,groupBy:()=>Ee,groupByLimit:()=>Ae,groupBySeries:()=>we,inject:()=>$,log:()=>Ie,map:()=>C,mapLimit:()=>K,mapSeries:()=>P,mapValues:()=>Ce,mapValuesLimit:()=>xe,mapValuesSeries:()=>Oe,memoize:()=>Re,nextTick:()=>Pe,parallel:()=>ke,parallelLimit:()=>Me,priorityQueue:()=>qe,queue:()=>Le,race:()=>Ue,reduce:()=>$,reduceRight:()=>Je,reflect:()=>Ge,reflectAll:()=>ze,reject:()=>Ve,rejectLimit:()=>$e,rejectSeries:()=>We,retry:()=>Ye,retryable:()=>Ze,select:()=>Se,selectLimit:()=>ve,selectSeries:()=>Ne,seq:()=>W,series:()=>et,setImmediate:()=>u,some:()=>tt,someLimit:()=>it,someSeries:()=>rt,sortBy:()=>nt,timeout:()=>st,times:()=>ot,timesLimit:()=>at,timesSeries:()=>lt,transform:()=>ct,tryEach:()=>ut,unmemoize:()=>pt,until:()=>ht,waterfall:()=>ft,whilst:()=>dt,wrapSync:()=>p});var s="function"==typeof queueMicrotask&&queueMicrotask,a="function"==typeof setImmediate&&setImmediate,o="object"==typeof process&&"function"==typeof process.nextTick;function l(e){setTimeout(e,0)}function c(e){return(t,...i)=>e((()=>t(...i)))}var u=c(s?queueMicrotask:a?setImmediate:o?process.nextTick:l);function p(e){return f(e)?function(...t){const i=t.pop();return d(e.apply(this,t),i)}:n((function(t,i){var r;try{r=e.apply(this,t)}catch(e){return i(e)}if(r&&"function"==typeof r.then)return d(r,i);i(null,r)}))}function d(e,t){return e.then((e=>{h(t,null,e)}),(e=>{h(t,e&&(e instanceof Error||e.message)?e:new Error(e))}))}function h(e,t,i){try{e(t,i)}catch(e){u((e=>{throw e}),e)}}function f(e){return"AsyncFunction"===e[Symbol.toStringTag]}function m(e){if("function"!=typeof e)throw new Error("expected a function");return f(e)?p(e):e}function g(e,t){if(t||(t=e.length),!t)throw new Error("arity is undefined");return function(...i){return"function"==typeof i[t-1]?e.apply(this,i):new Promise(((r,n)=>{i[t-1]=(e,...t)=>{if(e)return n(e);r(t.length>1?t:t[0])},e.apply(this,i)}))}}function _(e){return function(t,...i){return g((function(r){var n=this;return e(t,((e,t)=>{m(e).apply(n,i.concat(t))}),r)}))}}function b(e,t,i,r){t=t||[];var n=[],s=0,a=m(i);return e(t,((e,t,i)=>{var r=s++;a(e,((e,t)=>{n[r]=t,i(e)}))}),(e=>{r(e,n)}))}function y(e){return e&&"number"==typeof e.length&&e.length>=0&&e.length%1==0}var S={};function v(e){function t(...t){if(null!==e){var i=e;e=null,i.apply(this,t)}}return Object.assign(t,e),t}function N(e){return function(...t){if(null===e)throw new Error("Callback was already called.");var i=e;e=null,i.apply(this,t)}}function T(e,t,i,r){let n=!1,s=!1,a=!1,o=0,l=0;function c(){o>=t||a||n||(a=!0,e.next().then((({value:e,done:t})=>{if(!s&&!n){if(a=!1,t)return n=!0,void(o<=0&&r(null));o++,i(e,l,u),l++,c()}})).catch(p))}function u(e,t){if(o-=1,!s)return e?p(e):!1===e?(n=!0,void(s=!0)):t===S||n&&o<=0?(n=!0,r(null)):void c()}function p(e){s||(a=!1,n=!0,r(e))}c()}var A=e=>(t,i,r)=>{if(r=v(r),e<=0)throw new RangeError("concurrency limit cannot be less than 1");if(!t)return r(null);if("AsyncGenerator"===t[Symbol.toStringTag])return T(t,e,i,r);if(function(e){return"function"==typeof e[Symbol.asyncIterator]}(t))return T(t[Symbol.asyncIterator](),e,i,r);var n=function(e){if(y(e))return function(e){var t=-1,i=e.length;return function(){return++t<i?{value:e[t],key:t}:null}}(e);var t,i,r,n,s=function(e){return e[Symbol.iterator]&&e[Symbol.iterator]()}(e);return s?function(e){var t=-1;return function(){var i=e.next();return i.done?null:(t++,{value:i.value,key:t})}}(s):(i=(t=e)?Object.keys(t):[],r=-1,n=i.length,function e(){var s=i[++r];return"__proto__"===s?e():r<n?{value:t[s],key:s}:null})}(t),s=!1,a=!1,o=0,l=!1;function c(e,t){if(!a)if(o-=1,e)s=!0,r(e);else if(!1===e)s=!0,a=!0;else{if(t===S||s&&o<=0)return s=!0,r(null);l||u()}}function u(){for(l=!0;o<e&&!s;){var t=n();if(null===t)return s=!0,void(o<=0&&r(null));o+=1,i(t.value,t.key,N(c))}l=!1}u()},E=g((function(e,t,i,r){return A(t)(e,m(i),r)}),4);function w(e,t,i){i=v(i);var r=0,n=0,{length:s}=e,a=!1;function o(e,t){!1===e&&(a=!0),!0!==a&&(e?i(e):++n!==s&&t!==S||i(null))}for(0===s&&i(null);r<s;r++)t(e[r],r,N(o))}function I(e,t,i){return E(e,1/0,t,i)}var x=g((function(e,t,i){return(y(e)?w:I)(e,m(t),i)}),3),C=g((function(e,t,i){return b(x,e,t,i)}),3),O=_(C),R=g((function(e,t,i){return E(e,1,t,i)}),3),P=g((function(e,t,i){return b(R,e,t,i)}),3),j=_(P);const k=Symbol("promiseCallback");function M(){let e,t;function i(i,...r){if(i)return t(i);e(r.length>1?r:r[0])}return i[k]=new Promise(((i,r)=>{e=i,t=r})),i}function L(e,t,i){"number"!=typeof t&&(i=t,t=null),i=v(i||M());var r=Object.keys(e).length;if(!r)return i(null);t||(t=r);var n={},s=0,a=!1,o=!1,l=Object.create(null),c=[],u=[],p={};function d(e,t){c.push((()=>function(e,t){if(!o){var r=N(((t,...r)=>{if(s--,!1!==t)if(r.length<2&&([r]=r),t){var c={};if(Object.keys(n).forEach((e=>{c[e]=n[e]})),c[e]=r,o=!0,l=Object.create(null),a)return;i(t,c)}else n[e]=r,(l[e]||[]).forEach((e=>e())),h();else a=!0}));s++;var c=m(t[t.length-1]);t.length>1?c(n,r):c(r)}}(e,t)))}function h(){if(!a){if(0===c.length&&0===s)return i(null,n);for(;c.length&&s<t;)c.shift()()}}function f(t){var i=[];return Object.keys(e).forEach((r=>{const n=e[r];Array.isArray(n)&&n.indexOf(t)>=0&&i.push(r)})),i}return Object.keys(e).forEach((t=>{var i=e[t];if(!Array.isArray(i))return d(t,[i]),void u.push(t);var r=i.slice(0,i.length-1),n=r.length;if(0===n)return d(t,i),void u.push(t);p[t]=n,r.forEach((s=>{if(!e[s])throw new Error("async.auto task `"+t+"` has a non-existent dependency `"+s+"` in "+r.join(", "));var a,o;(o=l[a=s])||(o=l[a]=[]),o.push((()=>{0==--n&&d(t,i)}))}))})),function(){for(var e=0;u.length;)e++,f(u.pop()).forEach((e=>{0==--p[e]&&u.push(e)}));if(e!==r)throw new Error("async.auto cannot execute tasks due to a recursive dependency")}(),h(),i[k]}var D=/^(?:async\s+)?(?:function)?\s*\w*\s*\(\s*([^)]+)\s*\)(?:\s*{)/,F=/^(?:async\s+)?\(?\s*([^)=]+)\s*\)?(?:\s*=>)/,B=/,/,q=/(=.+)?(\s*)$/;function U(e,t){var i={};return Object.keys(e).forEach((t=>{var r,n=e[t],s=f(n),a=!s&&1===n.length||s&&0===n.length;if(Array.isArray(n))r=[...n],n=r.pop(),i[t]=r.concat(r.length>0?o:n);else if(a)i[t]=n;else{if(r=function(e){const t=function(e){let t="",i=0,r=e.indexOf("*/");for(;i<e.length;)if("/"===e[i]&&"/"===e[i+1]){let t=e.indexOf("\n",i);i=-1===t?e.length:t}else if(-1!==r&&"/"===e[i]&&"*"===e[i+1]){let n=e.indexOf("*/",i);-1!==n?(i=n+2,r=e.indexOf("*/",i)):(t+=e[i],i++)}else t+=e[i],i++;return t}(e.toString());let i=t.match(D);if(i||(i=t.match(F)),!i)throw new Error("could not parse args in autoInject\nSource:\n"+t);let[,r]=i;return r.replace(/\s/g,"").split(B).map((e=>e.replace(q,"").trim()))}(n),0===n.length&&!s&&0===r.length)throw new Error("autoInject task functions require explicit parameters.");s||r.pop(),i[t]=r.concat(o)}function o(e,t){var i=r.map((t=>e[t]));i.push(t),m(n)(...i)}})),L(i,t)}class J{constructor(){this.head=this.tail=null,this.length=0}removeLink(e){return e.prev?e.prev.next=e.next:this.head=e.next,e.next?e.next.prev=e.prev:this.tail=e.prev,e.prev=e.next=null,this.length-=1,e}empty(){for(;this.head;)this.shift();return this}insertAfter(e,t){t.prev=e,t.next=e.next,e.next?e.next.prev=t:this.tail=t,e.next=t,this.length+=1}insertBefore(e,t){t.prev=e.prev,t.next=e,e.prev?e.prev.next=t:this.head=t,e.prev=t,this.length+=1}unshift(e){this.head?this.insertBefore(this.head,e):G(this,e)}push(e){this.tail?this.insertAfter(this.tail,e):G(this,e)}shift(){return this.head&&this.removeLink(this.head)}pop(){return this.tail&&this.removeLink(this.tail)}toArray(){return[...this]}*[Symbol.iterator](){for(var e=this.head;e;)yield e.data,e=e.next}remove(e){for(var t=this.head;t;){var{next:i}=t;e(t)&&this.removeLink(t),t=i}return this}}function G(e,t){e.length=1,e.head=e.tail=t}function z(e,t,i){if(null==t)t=1;else if(0===t)throw new RangeError("Concurrency must not be zero");var r=m(e),n=0,s=[];const a={error:[],drain:[],saturated:[],unsaturated:[],empty:[]};function o(e,t){return e?t?void(a[e]=a[e].filter((e=>e!==t))):a[e]=[]:Object.keys(a).forEach((e=>a[e]=[]))}function l(e,...t){a[e].forEach((e=>e(...t)))}var c=!1;function p(e,t,i,r){if(null!=r&&"function"!=typeof r)throw new Error("task callback must be a function");var n,s;function a(e,...t){return e?i?s(e):n():t.length<=1?n(t[0]):void n(t)}_.started=!0;var o=_._createTaskItem(e,i?a:r||a);if(t?_._tasks.unshift(o):_._tasks.push(o),c||(c=!0,u((()=>{c=!1,_.process()}))),i||!r)return new Promise(((e,t)=>{n=e,s=t}))}function d(e){return function(t,...i){n-=1;for(var r=0,a=e.length;r<a;r++){var o=e[r],c=s.indexOf(o);0===c?s.shift():c>0&&s.splice(c,1),o.callback(t,...i),null!=t&&l("error",t,o.data)}n<=_.concurrency-_.buffer&&l("unsaturated"),_.idle()&&l("drain"),_.process()}}function h(e){return!(0!==e.length||!_.idle()||(u((()=>l("drain"))),0))}const f=e=>t=>{if(!t)return new Promise(((t,i)=>{!function(e,r){const n=(...r)=>{o(e,n),((e,r)=>{if(e)return i(e);t(r)})(...r)};a[e].push(n)}(e)}));o(e),function(e,t){a[e].push(t)}(e,t)};var g=!1,_={_tasks:new J,_createTaskItem:(e,t)=>({data:e,callback:t}),*[Symbol.iterator](){yield*_._tasks[Symbol.iterator]()},concurrency:t,payload:i,buffer:t/4,started:!1,paused:!1,push(e,t){if(Array.isArray(e)){if(h(e))return;return e.map((e=>p(e,!1,!1,t)))}return p(e,!1,!1,t)},pushAsync(e,t){if(Array.isArray(e)){if(h(e))return;return e.map((e=>p(e,!1,!0,t)))}return p(e,!1,!0,t)},kill(){o(),_._tasks.empty()},unshift(e,t){if(Array.isArray(e)){if(h(e))return;return e.map((e=>p(e,!0,!1,t)))}return p(e,!0,!1,t)},unshiftAsync(e,t){if(Array.isArray(e)){if(h(e))return;return e.map((e=>p(e,!0,!0,t)))}return p(e,!0,!0,t)},remove(e){_._tasks.remove(e)},process(){if(!g){for(g=!0;!_.paused&&n<_.concurrency&&_._tasks.length;){var e=[],t=[],i=_._tasks.length;_.payload&&(i=Math.min(i,_.payload));for(var a=0;a<i;a++){var o=_._tasks.shift();e.push(o),s.push(o),t.push(o.data)}n+=1,0===_._tasks.length&&l("empty"),n===_.concurrency&&l("saturated");var c=N(d(e));r(t,c)}g=!1}},length:()=>_._tasks.length,running:()=>n,workersList:()=>s,idle:()=>_._tasks.length+n===0,pause(){_.paused=!0},resume(){!1!==_.paused&&(_.paused=!1,u(_.process))}};return Object.defineProperties(_,{saturated:{writable:!1,value:f("saturated")},unsaturated:{writable:!1,value:f("unsaturated")},empty:{writable:!1,value:f("empty")},drain:{writable:!1,value:f("drain")},error:{writable:!1,value:f("error")}}),_}function H(e,t){return z(e,1,t)}function V(e,t,i){return z(e,t,i)}var $=g((function(e,t,i,r){r=v(r);var n=m(i);return R(e,((e,i,r)=>{n(t,e,((e,i)=>{t=i,r(e)}))}),(e=>r(e,t)))}),4);function W(...e){var t=e.map(m);return function(...e){var i=this,r=e[e.length-1];return"function"==typeof r?e.pop():r=M(),$(t,e,((e,t,r)=>{t.apply(i,e.concat(((e,...t)=>{r(e,t)})))}),((e,t)=>r(e,...t))),r[k]}}function Q(...e){return W(...e.reverse())}var K=g((function(e,t,i,r){return b(A(t),e,i,r)}),4),X=g((function(e,t,i,r){var n=m(i);return K(e,t,((e,t)=>{n(e,((e,...i)=>e?t(e):t(e,i)))}),((e,t)=>{for(var i=[],n=0;n<t.length;n++)t[n]&&(i=i.concat(...t[n]));return r(e,i)}))}),4),Y=g((function(e,t,i){return X(e,1/0,t,i)}),3),Z=g((function(e,t,i){return X(e,1,t,i)}),3);function ee(...e){return function(...t){return t.pop()(null,...e)}}function te(e,t){return(i,r,n,s)=>{var a,o=!1;const l=m(n);i(r,((i,r,n)=>{l(i,((r,s)=>r||!1===r?n(r):e(s)&&!a?(o=!0,a=t(!0,i),n(null,S)):void n()))}),(e=>{if(e)return s(e);s(null,o?a:t(!1))}))}}var ie=g((function(e,t,i){return te((e=>e),((e,t)=>t))(x,e,t,i)}),3),re=g((function(e,t,i,r){return te((e=>e),((e,t)=>t))(A(t),e,i,r)}),4),ne=g((function(e,t,i){return te((e=>e),((e,t)=>t))(A(1),e,t,i)}),3);function se(e){return(t,...i)=>m(t)(...i,((t,...i)=>{"object"==typeof console&&(t?console.error&&console.error(t):console[e]&&i.forEach((t=>console[e](t))))}))}var ae=se("dir"),oe=g((function(e,t,i){i=N(i);var r,n=m(e),s=m(t);function a(e,...t){if(e)return i(e);!1!==e&&(r=t,s(...t,o))}function o(e,t){return e?i(e):!1!==e?t?void n(a):i(null,...r):void 0}return o(null,!0)}),3);function le(e,t,i){const r=m(t);return oe(e,((...e)=>{const t=e.pop();r(...e,((e,i)=>t(e,!i)))}),i)}function ce(e){return(t,i,r)=>e(t,r)}var ue=g((function(e,t,i){return x(e,ce(m(t)),i)}),3),pe=g((function(e,t,i,r){return A(t)(e,ce(m(i)),r)}),4),de=g((function(e,t,i){return pe(e,1,t,i)}),3);function he(e){return f(e)?e:function(...t){var i=t.pop(),r=!0;t.push(((...e)=>{r?u((()=>i(...e))):i(...e)})),e.apply(this,t),r=!1}}var fe=g((function(e,t,i){return te((e=>!e),(e=>!e))(x,e,t,i)}),3),me=g((function(e,t,i,r){return te((e=>!e),(e=>!e))(A(t),e,i,r)}),4),ge=g((function(e,t,i){return te((e=>!e),(e=>!e))(R,e,t,i)}),3);function _e(e,t,i,r){var n=new Array(t.length);e(t,((e,t,r)=>{i(e,((e,i)=>{n[t]=!!i,r(e)}))}),(e=>{if(e)return r(e);for(var i=[],s=0;s<t.length;s++)n[s]&&i.push(t[s]);r(null,i)}))}function be(e,t,i,r){var n=[];e(t,((e,t,r)=>{i(e,((i,s)=>{if(i)return r(i);s&&n.push({index:t,value:e}),r(i)}))}),(e=>{if(e)return r(e);r(null,n.sort(((e,t)=>e.index-t.index)).map((e=>e.value)))}))}function ye(e,t,i,r){return(y(t)?_e:be)(e,t,m(i),r)}var Se=g((function(e,t,i){return ye(x,e,t,i)}),3),ve=g((function(e,t,i,r){return ye(A(t),e,i,r)}),4),Ne=g((function(e,t,i){return ye(R,e,t,i)}),3),Te=g((function(e,t){var i=N(t),r=m(he(e));return function e(t){if(t)return i(t);!1!==t&&r(e)}()}),2),Ae=g((function(e,t,i,r){var n=m(i);return K(e,t,((e,t)=>{n(e,((i,r)=>i?t(i):t(i,{key:r,val:e})))}),((e,t)=>{for(var i={},{hasOwnProperty:n}=Object.prototype,s=0;s<t.length;s++)if(t[s]){var{key:a}=t[s],{val:o}=t[s];n.call(i,a)?i[a].push(o):i[a]=[o]}return r(e,i)}))}),4);function Ee(e,t,i){return Ae(e,1/0,t,i)}function we(e,t,i){return Ae(e,1,t,i)}var Ie=se("log"),xe=g((function(e,t,i,r){r=v(r);var n={},s=m(i);return A(t)(e,((e,t,i)=>{s(e,t,((e,r)=>{if(e)return i(e);n[t]=r,i(e)}))}),(e=>r(e,n)))}),4);function Ce(e,t,i){return xe(e,1/0,t,i)}function Oe(e,t,i){return xe(e,1,t,i)}function Re(e,t=(e=>e)){var i=Object.create(null),r=Object.create(null),s=m(e),a=n(((e,n)=>{var a=t(...e);a in i?u((()=>n(null,...i[a]))):a in r?r[a].push(n):(r[a]=[n],s(...e,((e,...t)=>{e||(i[a]=t);var n=r[a];delete r[a];for(var s=0,o=n.length;s<o;s++)n[s](e,...t)})))}));return a.memo=i,a.unmemoized=e,a}var Pe=c(o?process.nextTick:a?setImmediate:l),je=g(((e,t,i)=>{var r=y(t)?[]:{};e(t,((e,t,i)=>{m(e)(((e,...n)=>{n.length<2&&([n]=n),r[t]=n,i(e)}))}),(e=>i(e,r)))}),3);function ke(e,t){return je(x,e,t)}function Me(e,t,i){return je(A(t),e,i)}function Le(e,t){var i=m(e);return z(((e,t)=>{i(e[0],t)}),t,1)}class De{constructor(){this.heap=[],this.pushCount=Number.MIN_SAFE_INTEGER}get length(){return this.heap.length}empty(){return this.heap=[],this}percUp(e){let t;for(;e>0&&Be(this.heap[e],this.heap[t=Fe(e)]);){let i=this.heap[e];this.heap[e]=this.heap[t],this.heap[t]=i,e=t}}percDown(e){let t;for(;(t=1+(e<<1))<this.heap.length&&(t+1<this.heap.length&&Be(this.heap[t+1],this.heap[t])&&(t+=1),!Be(this.heap[e],this.heap[t]));){let i=this.heap[e];this.heap[e]=this.heap[t],this.heap[t]=i,e=t}}push(e){e.pushCount=++this.pushCount,this.heap.push(e),this.percUp(this.heap.length-1)}unshift(e){return this.heap.push(e)}shift(){let[e]=this.heap;return this.heap[0]=this.heap[this.heap.length-1],this.heap.pop(),this.percDown(0),e}toArray(){return[...this]}*[Symbol.iterator](){for(let e=0;e<this.heap.length;e++)yield this.heap[e].data}remove(e){let t=0;for(let i=0;i<this.heap.length;i++)e(this.heap[i])||(this.heap[t]=this.heap[i],t++);this.heap.splice(t);for(let e=Fe(this.heap.length-1);e>=0;e--)this.percDown(e);return this}}function Fe(e){return(e+1>>1)-1}function Be(e,t){return e.priority!==t.priority?e.priority<t.priority:e.pushCount<t.pushCount}function qe(e,t){var i=Le(e,t),{push:r,pushAsync:n}=i;function s(e,t){return Array.isArray(e)?e.map((e=>({data:e,priority:t}))):{data:e,priority:t}}return i._tasks=new De,i._createTaskItem=({data:e,priority:t},i)=>({data:e,priority:t,callback:i}),i.push=function(e,t=0,i){return r(s(e,t),i)},i.pushAsync=function(e,t=0,i){return n(s(e,t),i)},delete i.unshift,delete i.unshiftAsync,i}var Ue=g((function(e,t){if(t=v(t),!Array.isArray(e))return t(new TypeError("First argument to race must be an array of functions"));if(!e.length)return t();for(var i=0,r=e.length;i<r;i++)m(e[i])(t)}),2);function Je(e,t,i,r){var n=[...e].reverse();return $(n,t,i,r)}function Ge(e){var t=m(e);return n((function(e,i){return e.push(((e,...t)=>{let r={};if(e&&(r.error=e),t.length>0){var n=t;t.length<=1&&([n]=t),r.value=n}i(null,r)})),t.apply(this,e)}))}function ze(e){var t;return Array.isArray(e)?t=e.map(Ge):(t={},Object.keys(e).forEach((i=>{t[i]=Ge.call(this,e[i])}))),t}function He(e,t,i,r){const n=m(i);return ye(e,t,((e,t)=>{n(e,((e,i)=>{t(e,!i)}))}),r)}var Ve=g((function(e,t,i){return He(x,e,t,i)}),3),$e=g((function(e,t,i,r){return He(A(t),e,i,r)}),4),We=g((function(e,t,i){return He(R,e,t,i)}),3);function Qe(e){return function(){return e}}const Ke=5,Xe=0;function Ye(e,t,i){var r={times:Ke,intervalFunc:Qe(Xe)};if(arguments.length<3&&"function"==typeof e?(i=t||M(),t=e):(function(e,t){if("object"==typeof t)e.times=+t.times||Ke,e.intervalFunc="function"==typeof t.interval?t.interval:Qe(+t.interval||Xe),e.errorFilter=t.errorFilter;else{if("number"!=typeof t&&"string"!=typeof t)throw new Error("Invalid arguments for async.retry");e.times=+t||Ke}}(r,e),i=i||M()),"function"!=typeof t)throw new Error("Invalid arguments for async.retry");var n=m(t),s=1;return function e(){n(((t,...n)=>{!1!==t&&(t&&s++<r.times&&("function"!=typeof r.errorFilter||r.errorFilter(t))?setTimeout(e,r.intervalFunc(s-1)):i(t,...n))}))}(),i[k]}function Ze(e,t){t||(t=e,e=null);let i=e&&e.arity||t.length;f(t)&&(i+=1);var r=m(t);return n(((t,n)=>{function s(e){r(...t,e)}return(t.length<i-1||null==n)&&(t.push(n),n=M()),e?Ye(e,s,n):Ye(s,n),n[k]}))}function et(e,t){return je(R,e,t)}var tt=g((function(e,t,i){return te(Boolean,(e=>e))(x,e,t,i)}),3),it=g((function(e,t,i,r){return te(Boolean,(e=>e))(A(t),e,i,r)}),4),rt=g((function(e,t,i){return te(Boolean,(e=>e))(R,e,t,i)}),3),nt=g((function(e,t,i){var r=m(t);return C(e,((e,t)=>{r(e,((i,r)=>{if(i)return t(i);t(i,{value:e,criteria:r})}))}),((e,t)=>{if(e)return i(e);i(null,t.sort(n).map((e=>e.value)))}));function n(e,t){var i=e.criteria,r=t.criteria;return i<r?-1:i>r?1:0}}),3);function st(e,t,i){var r=m(e);return n(((n,s)=>{var a,o=!1;n.push(((...e)=>{o||(s(...e),clearTimeout(a))})),a=setTimeout((function(){var t=e.name||"anonymous",r=new Error('Callback function "'+t+'" timed out.');r.code="ETIMEDOUT",i&&(r.info=i),o=!0,s(r)}),t),r(...n)}))}function at(e,t,i,r){var n=m(i);return K(function(e){for(var t=Array(e);e--;)t[e]=e;return t}(e),t,n,r)}function ot(e,t,i){return at(e,1/0,t,i)}function lt(e,t,i){return at(e,1,t,i)}function ct(e,t,i,r){arguments.length<=3&&"function"==typeof t&&(r=i,i=t,t=Array.isArray(e)?[]:{}),r=v(r||M());var n=m(i);return x(e,((e,i,r)=>{n(t,e,i,r)}),(e=>r(e,t))),r[k]}var ut=g((function(e,t){var i,r=null;return de(e,((e,t)=>{m(e)(((e,...n)=>{if(!1===e)return t(e);n.length<2?[i]=n:i=n,r=e,t(e?null:{})}))}),(()=>t(r,i)))}));function pt(e){return(...t)=>(e.unmemoized||e)(...t)}var dt=g((function(e,t,i){i=N(i);var r=m(t),n=m(e),s=[];function a(e,...t){if(e)return i(e);s=t,!1!==e&&n(o)}function o(e,t){return e?i(e):!1!==e?t?void r(a):i(null,...s):void 0}return n(o)}),3);function ht(e,t,i){const r=m(e);return dt((e=>r(((t,i)=>e(t,!i)))),t,i)}var ft=g((function(e,t){if(t=v(t),!Array.isArray(e))return t(new Error("First argument to waterfall must be an array of functions"));if(!e.length)return t();var i=0;function r(t){m(e[i++])(...t,N(n))}function n(n,...s){if(!1!==n)return n||i===e.length?t(n,...s):void r(s)}r([])})),mt={apply:r,applyEach:O,applyEachSeries:j,asyncify:p,auto:L,autoInject:U,cargo:H,cargoQueue:V,compose:Q,concat:Y,concatLimit:X,concatSeries:Z,constant:ee,detect:ie,detectLimit:re,detectSeries:ne,dir:ae,doUntil:le,doWhilst:oe,each:ue,eachLimit:pe,eachOf:x,eachOfLimit:E,eachOfSeries:R,eachSeries:de,ensureAsync:he,every:fe,everyLimit:me,everySeries:ge,filter:Se,filterLimit:ve,filterSeries:Ne,forever:Te,groupBy:Ee,groupByLimit:Ae,groupBySeries:we,log:Ie,map:C,mapLimit:K,mapSeries:P,mapValues:Ce,mapValuesLimit:xe,mapValuesSeries:Oe,memoize:Re,nextTick:Pe,parallel:ke,parallelLimit:Me,priorityQueue:qe,queue:Le,race:Ue,reduce:$,reduceRight:Je,reflect:Ge,reflectAll:ze,reject:Ve,rejectLimit:$e,rejectSeries:We,retry:Ye,retryable:Ze,seq:W,series:et,setImmediate:u,some:tt,someLimit:it,someSeries:rt,sortBy:nt,timeout:st,times:ot,timesLimit:at,timesSeries:lt,transform:ct,tryEach:ut,unmemoize:pt,until:ht,waterfall:ft,whilst:dt,all:fe,allLimit:me,allSeries:ge,any:tt,anyLimit:it,anySeries:rt,find:ie,findLimit:re,findSeries:ne,flatMap:Y,flatMapLimit:X,flatMapSeries:Z,forEach:ue,forEachSeries:de,forEachLimit:pe,forEachOf:x,forEachOfSeries:R,forEachOfLimit:E,inject:$,foldl:$,foldr:Je,select:Se,selectLimit:ve,selectSeries:Ne,wrapSync:p,during:dt,doDuring:oe}},7582:(e,t,i)=>{i.r(t),i.d(t,{__addDisposableResource:()=>k,__assign:()=>s,__asyncDelegator:()=>E,__asyncGenerator:()=>A,__asyncValues:()=>w,__await:()=>T,__awaiter:()=>f,__classPrivateFieldGet:()=>R,__classPrivateFieldIn:()=>j,__classPrivateFieldSet:()=>P,__createBinding:()=>g,__decorate:()=>o,__disposeResources:()=>L,__esDecorate:()=>c,__exportStar:()=>_,__extends:()=>n,__generator:()=>m,__importDefault:()=>O,__importStar:()=>C,__makeTemplateObject:()=>I,__metadata:()=>h,__param:()=>l,__propKey:()=>p,__read:()=>y,__rest:()=>a,__runInitializers:()=>u,__setFunctionName:()=>d,__spread:()=>S,__spreadArray:()=>N,__spreadArrays:()=>v,__values:()=>b,default:()=>D});var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},r(e,t)};function n(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}var s=function(){return s=Object.assign||function(e){for(var t,i=1,r=arguments.length;i<r;i++)for(var n in t=arguments[i])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},s.apply(this,arguments)};function a(e,t){var i={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(i[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(r=Object.getOwnPropertySymbols(e);n<r.length;n++)t.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(i[r[n]]=e[r[n]])}return i}function o(e,t,i,r){var n,s=arguments.length,a=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,r);else for(var o=e.length-1;o>=0;o--)(n=e[o])&&(a=(s<3?n(a):s>3?n(t,i,a):n(t,i))||a);return s>3&&a&&Object.defineProperty(t,i,a),a}function l(e,t){return function(i,r){t(i,r,e)}}function c(e,t,i,r,n,s){function a(e){if(void 0!==e&&"function"!=typeof e)throw new TypeError("Function expected");return e}for(var o,l=r.kind,c="getter"===l?"get":"setter"===l?"set":"value",u=!t&&e?r.static?e:e.prototype:null,p=t||(u?Object.getOwnPropertyDescriptor(u,r.name):{}),d=!1,h=i.length-1;h>=0;h--){var f={};for(var m in r)f[m]="access"===m?{}:r[m];for(var m in r.access)f.access[m]=r.access[m];f.addInitializer=function(e){if(d)throw new TypeError("Cannot add initializers after decoration has completed");s.push(a(e||null))};var g=(0,i[h])("accessor"===l?{get:p.get,set:p.set}:p[c],f);if("accessor"===l){if(void 0===g)continue;if(null===g||"object"!=typeof g)throw new TypeError("Object expected");(o=a(g.get))&&(p.get=o),(o=a(g.set))&&(p.set=o),(o=a(g.init))&&n.unshift(o)}else(o=a(g))&&("field"===l?n.unshift(o):p[c]=o)}u&&Object.defineProperty(u,r.name,p),d=!0}function u(e,t,i){for(var r=arguments.length>2,n=0;n<t.length;n++)i=r?t[n].call(e,i):t[n].call(e);return r?i:void 0}function p(e){return"symbol"==typeof e?e:"".concat(e)}function d(e,t,i){return"symbol"==typeof t&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:i?"".concat(i," ",t):t})}function h(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function f(e,t,i,r){return new(i||(i=Promise))((function(n,s){function a(e){try{l(r.next(e))}catch(e){s(e)}}function o(e){try{l(r.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(a,o)}l((r=r.apply(e,t||[])).next())}))}function m(e,t){var i,r,n,s,a={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return s={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function o(o){return function(l){return function(o){if(i)throw new TypeError("Generator is already executing.");for(;s&&(s=0,o[0]&&(a=0)),a;)try{if(i=1,r&&(n=2&o[0]?r.return:o[0]?r.throw||((n=r.return)&&n.call(r),0):r.next)&&!(n=n.call(r,o[1])).done)return n;switch(r=0,n&&(o=[2&o[0],n.value]),o[0]){case 0:case 1:n=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((n=(n=a.trys).length>0&&n[n.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!n||o[1]>n[0]&&o[1]<n[3])){a.label=o[1];break}if(6===o[0]&&a.label<n[1]){a.label=n[1],n=o;break}if(n&&a.label<n[2]){a.label=n[2],a.ops.push(o);break}n[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{i=n=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}}var g=Object.create?function(e,t,i,r){void 0===r&&(r=i);var n=Object.getOwnPropertyDescriptor(t,i);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,r,n)}:function(e,t,i,r){void 0===r&&(r=i),e[r]=t[i]};function _(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||g(t,e,i)}function b(e){var t="function"==typeof Symbol&&Symbol.iterator,i=t&&e[t],r=0;if(i)return i.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function y(e,t){var i="function"==typeof Symbol&&e[Symbol.iterator];if(!i)return e;var r,n,s=i.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=s.next()).done;)a.push(r.value)}catch(e){n={error:e}}finally{try{r&&!r.done&&(i=s.return)&&i.call(s)}finally{if(n)throw n.error}}return a}function S(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(y(arguments[t]));return e}function v(){for(var e=0,t=0,i=arguments.length;t<i;t++)e+=arguments[t].length;var r=Array(e),n=0;for(t=0;t<i;t++)for(var s=arguments[t],a=0,o=s.length;a<o;a++,n++)r[n]=s[a];return r}function N(e,t,i){if(i||2===arguments.length)for(var r,n=0,s=t.length;n<s;n++)!r&&n in t||(r||(r=Array.prototype.slice.call(t,0,n)),r[n]=t[n]);return e.concat(r||Array.prototype.slice.call(t))}function T(e){return this instanceof T?(this.v=e,this):new T(e)}function A(e,t,i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,n=i.apply(e,t||[]),s=[];return r={},a("next"),a("throw"),a("return"),r[Symbol.asyncIterator]=function(){return this},r;function a(e){n[e]&&(r[e]=function(t){return new Promise((function(i,r){s.push([e,t,i,r])>1||o(e,t)}))})}function o(e,t){try{(i=n[e](t)).value instanceof T?Promise.resolve(i.value.v).then(l,c):u(s[0][2],i)}catch(e){u(s[0][3],e)}var i}function l(e){o("next",e)}function c(e){o("throw",e)}function u(e,t){e(t),s.shift(),s.length&&o(s[0][0],s[0][1])}}function E(e){var t,i;return t={},r("next"),r("throw",(function(e){throw e})),r("return"),t[Symbol.iterator]=function(){return this},t;function r(r,n){t[r]=e[r]?function(t){return(i=!i)?{value:T(e[r](t)),done:!1}:n?n(t):t}:n}}function w(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,i=e[Symbol.asyncIterator];return i?i.call(e):(e=b(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(i){t[i]=e[i]&&function(t){return new Promise((function(r,n){!function(e,t,i,r){Promise.resolve(r).then((function(t){e({value:t,done:i})}),t)}(r,n,(t=e[i](t)).done,t.value)}))}}}function I(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var x=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t};function C(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&g(t,e,i);return x(t,e),t}function O(e){return e&&e.__esModule?e:{default:e}}function R(e,t,i,r){if("a"===i&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?r:"a"===i?r.call(e):r?r.value:t.get(e)}function P(e,t,i,r,n){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?n.call(e,i):n?n.value=i:t.set(e,i),i}function j(e,t){if(null===t||"object"!=typeof t&&"function"!=typeof t)throw new TypeError("Cannot use 'in' operator on non-object");return"function"==typeof e?t===e:e.has(t)}function k(e,t,i){if(null!=t){if("object"!=typeof t&&"function"!=typeof t)throw new TypeError("Object expected.");var r;if(i){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=t[Symbol.asyncDispose]}if(void 0===r){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=t[Symbol.dispose]}if("function"!=typeof r)throw new TypeError("Object not disposable.");e.stack.push({value:t,dispose:r,async:i})}else i&&e.stack.push({async:!0});return t}var M="function"==typeof SuppressedError?SuppressedError:function(e,t,i){var r=new Error(i);return r.name="SuppressedError",r.error=e,r.suppressed=t,r};function L(e){function t(t){e.error=e.hasError?new M(t,e.error,"An error was suppressed during disposal."):t,e.hasError=!0}return function i(){for(;e.stack.length;){var r=e.stack.pop();try{var n=r.dispose&&r.dispose.call(r.value);if(r.async)return Promise.resolve(n).then(i,(function(e){return t(e),i()}))}catch(e){t(e)}}if(e.hasError)throw e.error}()}const D={__extends:n,__assign:s,__rest:a,__decorate:o,__param:l,__metadata:h,__awaiter:f,__generator:m,__createBinding:g,__exportStar:_,__values:b,__read:y,__spread:S,__spreadArrays:v,__spreadArray:N,__await:T,__asyncGenerator:A,__asyncDelegator:E,__asyncValues:w,__makeTemplateObject:I,__importStar:C,__importDefault:O,__classPrivateFieldGet:R,__classPrivateFieldSet:P,__classPrivateFieldIn:j,__addDisposableResource:k,__disposeResources:L}}},t={};function i(r){var n=t[r];if(void 0!==n)return n.exports;var s=t[r]={exports:{}};return e[r](s,s.exports,i),s.exports}i.d=(e,t)=>{for(var r in t)i.o(t,r)&&!i.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r=i(3081);window.XMPP=r})();